!function(c){var r={params:wc_braintree_client_manager_params,init:function(){this.container=this.get_container_class(),this.currency=this.params.currency,c(document.body).on("update_checkout",this.update_currency),c(document.body).on("updated_checkout",this.updated_checkout),c(document.body).on("removed_coupon_in_checkout",this.coupon_removed.bind(this)),"checkout"===this.params.page_id&&"undefined"!=typeof wc_braintree_cart_needs_payment||this.create_client()},is_processing:function(){return this.processing},create_client:function(n){this.processing=!0,"undefined"==typeof wc_braintree_client_token?r.submit_error({code:"INVALID_CLIENT_TOKEN"}):(Array.isArray(wc_braintree_client_token)&&(wc_braintree_client_token=wc_braintree_client_token[0]),braintree.client.create({authorization:wc_braintree_client_token},function(e,t){if(this.processing=!1,e)return e.code&&"CLIENT_AUTHORIZATION_INVALID"===e.code?r.get_client_token():r.submit_error(e);r.client=t,void 0!==n?wc_braintree.triggerClientUpdate(t,r.params.merchant_account):wc_braintree.triggerClientReady(t,r.params.merchant_account),c(document.body).triggerHandler("wc_braintree_client_created",[t,wc_braintree_client_token,r.params.merchant_account])}))},submit_error:function(e){c(document.body).triggerHandler("wc_braintree_submit_error",{error:e,element:r.container})},get_container_class:function(){return c("body").hasClass("woocommerce-cart")?"div.woocommerce":c("body").hasClass("woocommerce-checkout")?"ul.payment_methods":c("body").hasClass("woocommerce-add-payment-method")?"div.woocommerce":c("body").hasClass("single-product")?"div.woocommerce-notices-wrapper":void 0},update_currency:function(){r.currency=r.get_currency()},get_currency:function(){var e=c('[id^="payment_method_braintree_"][name="payment_method"]').first();return(e&&c(".woocommerce_"+e.val()+"_data").data("gateway")||r).currency},updated_checkout:function(){r.currency!==r.get_currency()&&(r.get_client_token(),r.currency=r.get_currency()),!r.client&&!r.is_processing()&&"undefined"!=typeof wc_braintree_cart_needs_payment&&0<c('[name="payment_method"]').length&&r.create_client()},get_client_token:function(){c.ajax({method:"POST",url:r.params.url,data:{_wpnonce:this.params._wpnonce,currency:r.get_currency()}}).done(function(e){wc_braintree_client_token=e,r.create_client(!0)}).fail(function(){})},coupon_removed:function(){r.client||"undefined"==typeof wc_braintree_cart_needs_payment||c(document.body).one("updated_checkout",function(){r.create_client()})}};r.init()}(jQuery,window.wc_braintree);