{"version":3,"file":"commons.js","mappings":"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","sources":["webpack://wcBraintree/./packages/blocks/assets/js/components/error-boundary/index.js","webpack://wcBraintree/./packages/blocks/assets/js/components/index.js","webpack://wcBraintree/./packages/blocks/assets/js/components/notice/index.js","webpack://wcBraintree/./packages/blocks/assets/js/components/payment-method-label/index.js","webpack://wcBraintree/./packages/blocks/assets/js/components/payment-method/index.js","webpack://wcBraintree/./packages/blocks/assets/js/components/saved-token-component/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/applepay/hooks/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/applepay/hooks/use-create-payment-request.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/applepay/hooks/use-create-session.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/applepay/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/applepay/utils.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/context/action-emitter.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/context/action-reducer.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/context/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/context/payment-context.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/custom-form/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/custom-form/registry.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/custom-forms/bootstrap/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/custom-forms/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/custom-forms/simple/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/dropin-form/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/hosted-fields/card-cvv.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/hosted-fields/card-expiration-date.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/hosted-fields/card-number.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/hosted-fields/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/googlepay/helpers.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/googlepay/hooks/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/googlepay/hooks/use-create-payments-client.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/googlepay/hooks/use-handle-tokenization.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/googlepay/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/hooks/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/hooks/use-breakpoint-width.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/hooks/use-device-data.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/hooks/use-notice-handler.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/hooks/use-payment-events-handler.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/hooks/use-process-payment-failure.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/hooks/use-process-payment.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/hooks/use-three-d-secure.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/paypal/hooks/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/paypal/hooks/use-load-paypal.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/paypal/hooks/use-paypal-options.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/paypal/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/utils.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/venmo/hooks/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/venmo/hooks/use-handle-tokenization.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/venmo/index.js","webpack://wcBraintree/./node_modules/classnames/index.js","webpack://wcBraintree/./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack://wcBraintree/./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack://wcBraintree/./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack://wcBraintree/./node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack://wcBraintree/./node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack://wcBraintree/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://wcBraintree/./node_modules/@babel/runtime/helpers/construct.js","webpack://wcBraintree/./node_modules/@babel/runtime/helpers/createClass.js","webpack://wcBraintree/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://wcBraintree/./node_modules/@babel/runtime/helpers/extends.js","webpack://wcBraintree/./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack://wcBraintree/./node_modules/@babel/runtime/helpers/inherits.js","webpack://wcBraintree/./node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack://wcBraintree/./node_modules/@babel/runtime/helpers/isNativeFunction.js","webpack://wcBraintree/./node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js","webpack://wcBraintree/./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack://wcBraintree/./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack://wcBraintree/./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack://wcBraintree/./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack://wcBraintree/./node_modules/@babel/runtime/helpers/objectWithoutProperties.js","webpack://wcBraintree/./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","webpack://wcBraintree/./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack://wcBraintree/./node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack://wcBraintree/./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack://wcBraintree/./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack://wcBraintree/./node_modules/@babel/runtime/helpers/typeof.js","webpack://wcBraintree/./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack://wcBraintree/./node_modules/@babel/runtime/helpers/wrapNativeSuper.js"],"sourcesContent":["import {Component} from '@wordpress/element';\n\nclass ErrorBoundary extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {hasError: false, error: null, errorInfo: null};\n    }\n\n    componentDidCatch(error, errorInfo) {\n        this.setState({\n            hasError: true,\n            error,\n            errorInfo\n        })\n    }\n\n    render() {\n        if (this.state.hasError) {\n            return (\n                <>\n                    {this.state.error &&\n                    <div className='wc-braintree-blocks__error'>{this.state.error.toString()}</div>}\n                    {this.state.errorInfo &&\n                    <div className='wc-braintree-blocks__error'>{this.state.errorInfo.componentStack}</div>}\n                </>\n            )\n        }\n        return this.props.children;\n    }\n}\n\nexport default ErrorBoundary;","export * from './notice';\nexport * from './payment-method';\nexport * from './payment-method-label';\nexport * from './saved-token-component';","import classNames from \"classnames\";\nimport {Notice as WordpressNotice} from '@wordpress/components';\n\nexport const Notice = ({notice, onRemove}) => {\n    const classes = classNames(`wc-braintree-blocks__notice ${notice.type}`);\n    return (\n        <WordpressNotice\n            key={`notice-${notice.type}`}\n            className={classes}\n            onRemove={() => {\n                if (notice.isDismissible) {\n                    onRemove();\n                }\n            }} {...notice}>\n            {notice.message}\n        </WordpressNotice>\n    )\n}\n\nexport default Notice;","export const PaymentMethodLabel = ({title, paymentMethod, components, icon = []}) => {\n    const {PaymentMethodLabel: Label, PaymentMethodIcons: Icons} = components;\n    if (!Array.isArray(icon)) {\n        icon = [icon];\n    }\n    return (\n        <span className={'wc-braintree-blocks-paymentMethod__label'}>\n            <Label text={title}/>\n            <Icons icons={icon} align='left'/>\n        </span>\n    )\n}\n\nexport default PaymentMethodLabel;","import {useRef, useState, useEffect} from '@wordpress/element';\nimport {PaymentMethodDataProvider} from '../../payment-methods/context';\nimport {useProcessPayment, useProcessPaymentFailure} from \"../../payment-methods/hooks\";\n\nexport const PaymentMethod = ({content, description = '', icons, ...props}) => {\n    const el = useRef();\n    const [container, setContainer] = useState(null);\n    const Content = content;\n    useEffect(() => {\n        if (el.current) {\n            setContainer(el.current);\n        }\n    }, []);\n    return (\n        <div ref={el} className={\"wc-braintree-blocks-payment-method__container\"}>\n            {description &&\n            <div className=\"wc-braintree-blocks-payment-method__description\">\n                {description}\n            </div>}\n            <PaymentMethodDataProvider container={container} {...props}>\n                <PaymentMethodProviderContainer {...props}>\n                    <Content {...props}/>\n                </PaymentMethodProviderContainer>\n            </PaymentMethodDataProvider>\n        </div>\n    )\n}\n\nconst PaymentMethodProviderContainer = (\n    {\n        children,\n        name,\n        billing,\n        shippingData,\n        eventRegistration,\n        emitResponse,\n        activePaymentMethod,\n        isExpress = false,\n        advancedFraudOptions = {}\n    }) => {\n    const {onPaymentProcessing, onCheckoutAfterProcessingWithError} = eventRegistration;\n    const {responseTypes, noticeContexts} = emitResponse;\n\n    useProcessPayment({\n        onPaymentProcessing,\n        responseTypes,\n        name,\n        billing,\n        shippingData,\n        activePaymentMethod,\n        advancedFraudOptions\n    });\n\n    useProcessPaymentFailure({\n        event: onCheckoutAfterProcessingWithError,\n        responseTypes,\n        messageContext: isExpress ? noticeContexts.EXPRESS_PAYMENTS : null\n    });\n    return children;\n}\n\nexport default PaymentMethod;","import {useEffect, useRef, useCallback} from '@wordpress/element';\nimport {ensureSuccessResponse, ensureErrorResponse, BraintreeError} from \"../../payment-methods/utils\";\nimport {useThreeDSecure, useProcessPaymentFailure, useDeviceData} from \"../../payment-methods/hooks\";\nimport apiFetch from '@wordpress/api-fetch';\nimport {usePaymentMethodDataContext, PaymentMethodDataProvider} from \"../../payment-methods/context\";\n\nexport const SavedTokenProvider = (props) => {\n    return (\n        <PaymentMethodDataProvider {...{...props}}>\n            <SavedTokenComponent {...{...props}}/>\n        </PaymentMethodDataProvider>\n    )\n}\nexport const SavedTokenComponent = (\n    {\n        name,\n        vaultedThreeDSecure = false,\n        token,\n        eventRegistration,\n        billing,\n        shippingData,\n        emitResponse\n    }) => {\n    const {responseTypes} = emitResponse;\n    const {onPaymentProcessing, onCheckoutAfterProcessingWithError} = eventRegistration;\n    const currentData = useRef({billing, shippingData});\n    const {doPaymentDataFilter} = usePaymentMethodDataContext();\n    useDeviceData();\n    useThreeDSecure({name, vaulted: vaultedThreeDSecure});\n    useProcessPaymentFailure({\n        event: onCheckoutAfterProcessingWithError,\n        responseTypes\n    });\n\n    useEffect(() => {\n        currentData.current = {name, billing, shippingData};\n    });\n\n    const fetchTokenNonce = useCallback(async (token_id) => {\n        try {\n            let result = await apiFetch({\n                path: '/wc-braintree/v1/3ds/vaulted_nonce',\n                method: 'POST',\n                data: {token_id, version: 2}\n            });\n            return result;\n        } catch (error) {\n\n        }\n    }, []);\n\n    useEffect(() => {\n        const unsubscribe = onPaymentProcessing(async () => {\n            if (vaultedThreeDSecure) {\n                try {\n                    let result = await fetchTokenNonce(token);\n                    if (!result.success) {\n                        throw new BraintreeError({message: result.message});\n                    }\n                    result = await doPaymentDataFilter({\n                        meta: {\n                            paymentMethodData: {\n                                [`${name}_3ds_nonce_key`]: 'true'\n                            }\n                        }\n                    }, {...currentData.current, ...{result: result.data}});\n                    return ensureSuccessResponse(responseTypes, result);\n                } catch (error) {\n                    return ensureErrorResponse(responseTypes, error);\n                }\n            }\n            return null;\n        });\n        return () => unsubscribe();\n    }, [\n        onPaymentProcessing,\n        vaultedThreeDSecure,\n        token,\n        name,\n        responseTypes\n    ]);\n    return null;\n}\n\nexport default SavedTokenComponent;","export * from './use-create-payment-request';\nexport * from './use-create-session';","import {useEffect, useMemo, useRef, useCallback} from '@wordpress/element';\nimport {removeNumberPrecision} from \"../../utils\";\nimport {formatLineItems, formatShippingMethods} from \"../utils\";\n\nexport const useCreatePaymentRequest = (\n    {\n        applePayInstance,\n        billing,\n        shippingData,\n        getData\n    }) => {\n    const currentData = useRef({});\n\n    useEffect(() => {\n        currentData.current.billing = billing;\n        currentData.current.shippingData = shippingData;\n    }, [billing, shippingData]);\n\n    const request = useMemo(() => {\n        if (applePayInstance) {\n            const {cartTotal, currency, cartTotalItems, billingData} = currentData.current.billing;\n            const {needsShipping, shippingRates} = currentData.current.shippingData;\n            const request = {\n                total: {\n                    label: getData('displayName'),\n                    type: 'final',\n                    amount: removeNumberPrecision(cartTotal.value, currency.minorUnit).toString()\n                },\n                lineItems: formatLineItems(cartTotalItems, currency.minorUnit),\n                currencyCode: currency.code,\n                countryCode: getData('countryCode'),\n                requiredBillingContactFields: ['postalAddress'],\n                requiredShippingContactFields: (() => {\n                    let fields = needsShipping ? ['postalAddress'] : [];\n                    if (!billingData.email) {\n                        fields = [...fields, 'email'];\n                    }\n                    if (!billingData.phone) {\n                        fields = [...fields, 'phone'];\n                    }\n                    return fields;\n                })()\n            }\n            if (needsShipping) {\n                request.shippingMethods = formatShippingMethods(shippingRates);\n            }\n            const paymentRequest = applePayInstance.createPaymentRequest(request);\n            return paymentRequest;\n        }\n        return null;\n    }, [applePayInstance]);\n    return request;\n}\n\nexport default useCreatePaymentRequest;","import {useEffect, useState, useRef, useCallback} from '@wordpress/element';\nimport {__} from '@wordpress/i18n';\nimport {range} from 'lodash';\nimport {usePaymentMethodDataContext} from \"../../context\";\nimport {usePaymentEventsHandler} from \"../../hooks\";\nimport apiFetch from '@wordpress/api-fetch';\nimport {isEqual, isEmpty} from 'lodash';\nimport {getSetting} from '@woocommerce/settings';\nimport {formatLineItems, formatShippingMethods} from \"../utils\";\nimport {\n    removeNumberPrecision,\n    extractSelectedShippingOption,\n    getSelectedShippingOptionId,\n    extractAddressLines,\n    DEFAULT_BILLING_ADDRESS,\n    DEFAULT_SHIPPING_ADDRESS\n} from \"../../utils\";\n\nconst isOlderVersion = getSetting('wcBraintreeData').isOlderVersion;\n\nexport const useCreateSession = (\n    {\n        applePayInstance,\n        billing,\n        shippingData,\n        paymentRequest,\n        eventRegistration,\n        onClick,\n        onClose,\n        getData\n    }) => {\n    const {addShippingHandler} = usePaymentEventsHandler({\n        billing,\n        shippingData,\n        eventRegistration\n    });\n    const {setPaymentMethodNonce, onPaymentDataFilter, notice: {addNotice}} = usePaymentMethodDataContext();\n    const applePayData = useRef({});\n    const currentData = useRef({\n        billing,\n        shippingData,\n        onClick,\n        onClose,\n        addNotice,\n        addShippingHandler,\n        setPaymentMethodNonce,\n        onPaymentDataFilter\n    });\n\n    const getApplePayVersion = useCallback(() => {\n        // always check support from highest version first\n        for (let version of range(10, 2, -1)) {\n            if (ApplePaySession.supportsVersion(version)) {\n                return version;\n            }\n        }\n        return 3;\n    }, []);\n\n    const onSessionCancel = useCallback(() => {\n        const {onClose} = currentData.current;\n        onClose();\n    }, []);\n\n    const onValidateMerchant = useCallback((event) => {\n        const {session} = currentData.current;\n        applePayInstance.performValidation({\n            validationURL: event.validationURL,\n            displayName: getData('displayName')\n        }).then(merchantSession => {\n            session.completeMerchantValidation(merchantSession);\n        }).catch(error => {\n            session.abort();\n            addNotice(error);\n        })\n    }, [applePayInstance, addNotice]);\n\n    const onPaymentMethodSelected = useCallback((event) => {\n        // update the cart billing address info\n        const {paymentMethod} = event;\n        const {session, addNotice} = currentData.current;\n        let address = null;\n        if (paymentMethod.billingContact) {\n            address = {\n                country: paymentMethod.billingContact?.countryCode || '',\n                state: paymentMethod.billingContact?.administrativeArea || '',\n                postcode: paymentMethod.billingContact?.postalCode || '',\n                city: paymentMethod.billingContact?.locality || ''\n            }\n        }\n        apiFetch({\n            url: getData('routes').paymentMethod,\n            method: 'POST',\n            data: {\n                address\n            }\n        }).then(response => {\n            if (response.code) {\n                session.abort();\n                addNotice(response.messages);\n            } else {\n                session.completePaymentMethodSelection(response.data);\n            }\n        }).catch((xhr) => {\n\n        });\n    }, []);\n\n    const onShippingContactSelected = useCallback((event) => {\n        const {shippingContact} = event;\n        const {shippingData, addShippingHandler} = currentData.current;\n        const {shippingAddress, setShippingAddress} = shippingData;\n        const {country, state, city, postcode} = shippingAddress;\n        const newAddress = {\n            country: shippingContact?.countryCode.toUpperCase(),\n            state: shippingContact?.administrativeArea.toUpperCase(),\n            city: shippingContact.locality,\n            postcode: shippingContact.postalCode\n        }\n        const addressEqual = isEqual({country, state, city, postcode}, newAddress);\n        addShippingHandler((success, {billing, shippingData}) => {\n            const {session} = currentData.current;\n            const {cartTotal, cartTotalItems, currency} = billing;\n            const {shippingRates, selectedRates} = shippingData;\n            const updateData = {\n                newTotal: {\n                    label: getData('displayName'),\n                    type: 'final',\n                    amount: removeNumberPrecision(cartTotal.value, currency.minorUnit).toString()\n                },\n                newLineItems: formatLineItems(cartTotalItems, currency.minorUnit),\n                newShippingMethods: formatShippingMethods(shippingRates)\n            };\n            currentData.current.errors = [];\n            if (!success) {\n                updateData.newShippingMethods = [{\n                    identifier: '0:error:1',\n                    label: __('No shipping methods', 'woo-payment-gateway'),\n                    detail: __('There are no shipping options available for the selected address.', 'woo-payment-gateway'),\n                    amount: '0.00'\n                }];\n                currentData.current.errors = [new ApplePayError('addressUnserviceable')];\n            }\n            session.completeShippingContactSelection(updateData);\n        }, addressEqual);\n        setShippingAddress({...shippingAddress, ...newAddress});\n    }, []);\n\n    const onShippingMethodSelected = useCallback((event) => {\n        const {shippingMethod} = event;\n        const {session, billing, shippingData, addNotice} = currentData.current;\n        const {cartTotal} = billing;\n        const {setSelectedRates, selectedRates} = shippingData;\n        const selectedRate = getSelectedShippingOptionId(selectedRates);\n        const isRateEqual = selectedRate == shippingMethod.identifier;\n        setSelectedRates(...extractSelectedShippingOption(shippingMethod.identifier));\n        addShippingHandler((success, {billing}) => {\n            const {currency, cartTotalItems, cartTotal} = billing;\n            if (success) {\n                session.completeShippingMethodSelection({\n                    newTotal: {\n                        label: getData('displayName'),\n                        type: 'final',\n                        amount: removeNumberPrecision(cartTotal.value, currency.minorUnit).toString()\n                    },\n                    newLineItems: formatLineItems(cartTotalItems, currency.minorUnit)\n                });\n            } else {\n                session.abort();\n                addNotice(__('There was an error updating your cart totals.', 'woo-payment-gateway'));\n            }\n        }, isRateEqual);\n    }, []);\n\n    const onPaymentAuthorized = useCallback((event) => {\n        const {session, setPaymentMethodNonce, errors = []} = currentData.current;\n        if (errors?.length > 0) {\n            session.completePayment({\n                status: ApplePaySession.STATUS_FAILURE,\n                errors\n            });\n        } else {\n            applePayInstance.tokenize({\n                token: event?.payment?.token\n            }).then(response => {\n                const {shippingContact = null, billingContact = null} = event.payment;\n                applePayData.current.billingData = {};\n                if (shippingContact) {\n                    if (currentData.current.shippingData.needsShipping) {\n                        applePayData.current.shippingAddress = {\n                            first_name: shippingContact?.givenName,\n                            last_name: shippingContact?.familyName,\n                            city: shippingContact?.locality,\n                            state: shippingContact?.administrativeArea,\n                            postcode: shippingContact?.postalCode,\n                            country: shippingContact?.countryCode,\n                            ...extractAddressLines(shippingContact?.addressLines || [])\n                        }\n                    }\n                    if (shippingContact?.phoneNumber) {\n                        applePayData.current.billingData.phone = shippingContact?.phoneNumber;\n                    }\n                    if (shippingContact?.emailAddress) {\n                        applePayData.current.billingData.email = shippingContact?.emailAddress;\n                    }\n                }\n                if (billingContact) {\n                    applePayData.current.billingData = {\n                        first_name: billingContact?.givenName,\n                        last_name: billingContact?.familyName,\n                        city: billingContact?.locality,\n                        state: billingContact?.administrativeArea,\n                        postcode: billingContact?.postalCode,\n                        country: billingContact?.countryCode,\n                        ...extractAddressLines(billingContact?.addressLines || ''),\n                        ...applePayData.current.billingData\n                    }\n                }\n                setPaymentMethodNonce(response.nonce);\n                session.completePayment(ApplePaySession.STATUS_SUCCESS);\n            }).catch(error => {\n                session.completePayment(ApplePaySession.STATUS_FAILURE);\n            })\n        }\n    }, [applePayInstance]);\n\n    useEffect(() => {\n        currentData.current = {\n            ...currentData.current,\n            billing,\n            shippingData,\n            onClick,\n            onClose,\n            addNotice,\n            addShippingHandler,\n            setPaymentMethodNonce\n        };\n    });\n\n    useEffect(() => {\n        const unsubscribe = onPaymentDataFilter((data, {billing, shippingData}) => {\n            if (!isEmpty(applePayData.current?.billingData)) {\n                if (isOlderVersion) {\n                    data.meta.billingData = {...billing.billingData, ...applePayData.current.billingData};\n                } else {\n                    data.meta.billingAddress = {\n                        ...DEFAULT_BILLING_ADDRESS,\n                        ...billing.billingData,\n                        ...applePayData.current.billingData\n                    };\n                }\n            }\n            if (!isEmpty(applePayData.current?.shippingAddress)) {\n                if (isOlderVersion) {\n                    data.meta.shippingData = {\n                        address: {...shippingData.shippingAddress, ...applePayData.current.shippingAddress}\n                    }\n                } else {\n                    data.meta.shippingAddress = {\n                        ...DEFAULT_SHIPPING_ADDRESS,\n                        ...shippingData.shippingAddress,\n                        ...applePayData.current.shippingAddress\n                    };\n                }\n            }\n            return data;\n        });\n        return () => unsubscribe();\n    }, [onPaymentDataFilter]);\n\n    const createSession = useCallback(() => {\n        const {shippingData} = currentData.current;\n        const session = new ApplePaySession(getApplePayVersion(), paymentRequest);\n        session.onvalidatemerchant = onValidateMerchant;\n        session.onpaymentmethodselected = onPaymentMethodSelected;\n        session.onpaymentauthorized = onPaymentAuthorized;\n        session.oncancel = onSessionCancel;\n        if (shippingData.needsShipping) {\n            session.onshippingcontactselected = onShippingContactSelected;\n            session.onshippingmethodselected = onShippingMethodSelected;\n        }\n        currentData.current.session = session;\n        return session;\n    }, [\n        applePayInstance,\n        paymentRequest,\n        getApplePayVersion,\n        onValidateMerchant,\n        onPaymentMethodSelected,\n        onPaymentAuthorized,\n        onShippingContactSelected,\n        onShippingMethodSelected\n    ]);\n\n    const handleClick = useCallback((e) => {\n        e.preventDefault();\n        currentData.current.onClick();\n        try {\n            const session = createSession();\n            session.begin();\n        } catch (error) {\n            alert(error);\n        }\n    }, [createSession]);\n\n    return {handleClick};\n}\n\nexport default useCreateSession;","import {useState, useEffect} from '@wordpress/element';\nimport {registerExpressPaymentMethod} from '@woocommerce/blocks-registry';\nimport {create as createApplePay} from '@braintree/apple-pay';\nimport {getSettings, getClientToken} from \"../utils\";\nimport {PaymentMethod} from \"../../components/payment-method\";\nimport {usePaymentMethodDataContext} from \"../context\";\nimport {useCreatePaymentRequest, useCreateSession} from \"./hooks\";\nimport ErrorBoundary from \"../../components/error-boundary\";\n\nconst getData = getSettings('braintree_applepay');\n\nconst loadApplePay = new Promise((resolve, reject) => {\n    createApplePay({\n        authorization: getClientToken()\n    }).then(instance => resolve(instance)).catch(error => reject(error));\n});\n\nconst Test = (props) => {\n    return (\n        <ErrorBoundary>\n            <ApplePayContainer {...props}/>\n        </ErrorBoundary>\n    )\n}\n\nconst ApplePayContainer = (\n    {\n        getData,\n        billing,\n        shippingData,\n        eventRegistration,\n        onClick,\n        onClose\n    }) => {\n    const [applePayInstance, setApplePayInstance] = useState(null);\n    const {notice: {addNotice}} = usePaymentMethodDataContext();\n    const paymentRequest = useCreatePaymentRequest({\n        applePayInstance,\n        billing,\n        shippingData,\n        getData\n    });\n    const {handleClick} = useCreateSession({\n        applePayInstance,\n        billing,\n        shippingData,\n        paymentRequest,\n        eventRegistration,\n        onClick,\n        onClose,\n        getData\n    });\n    useEffect(() => {\n        loadApplePay.then(instance => setApplePayInstance(instance)).catch(error => addNotice(error));\n    }, []);\n\n    return (\n        <div\n            className={'wc-braintree-blocks-apple-pay-button__container'}>\n            <ApplePayButton\n                onClick={handleClick}\n                type={getData('buttonType')}\n                style={getData('buttonStyle')}\n                rounded={getData('roundedButton')}/>\n        </div>\n    )\n}\n\nconst ApplePayButton = ({onClick, type, style, rounded = false}) => {\n    const getButtonStyle = (style) => {\n        switch (style) {\n            case 'apple-pay-button-black':\n                return 'black';\n            case 'apple-pay-button-white':\n                return 'white';\n            case 'apple-pay-button-white-with-line':\n                return 'white-outline';\n        }\n    }\n    const styles = {\n        '-apple-pay-button-type': type,\n        '-apple-pay-button-style': getButtonStyle(style)\n    }\n    return <button\n        className={`wc-braintree-blocks-apple-pay__button ${style} ${rounded ? 'apple-pay-button-rounded' : ''}`}\n        style={styles}\n        onClick={onClick}/>\n\n}\n\nregisterExpressPaymentMethod({\n    name: getData('name'),\n    canMakePayment: async () => {\n        return window.ApplePaySession && ApplePaySession.canMakePayments();\n    },\n    content: <PaymentMethod content={Test}\n                            title={getData('title')}\n                            description={getData('description')}\n                            name={getData('name')}\n                            icon={getData('icon')}\n                            getData={getData}\n                            isExpress={true}/>,\n    edit: <PaymentMethod content={ApplePayContainer} getData={getData}/>,\n    supports: {\n        features: getData('features')\n    }\n});","import {getShippingOptionId, removeNumberPrecision} from \"../utils\";\n\nexport const formatLineItems = (lineItems, minorUnit) => {\n    let items = [];\n    const keys = ['total_tax', 'total_shipping'];\n    lineItems.forEach(item => {\n        if (0 < item.value || (item.key && keys.includes(item.key))) {\n            items.push({\n                label: item.label,\n                type: 'final',\n                amount: removeNumberPrecision(item.value, minorUnit).toString()\n            });\n        }\n    })\n    return items;\n}\n\nexport const formatShippingMethods = (shippingRates) => {\n    let options = [];\n    shippingRates.forEach((shippingPackage, idx) => {\n        let rates = shippingPackage.shipping_rates.map(rate => {\n            let txt = document.createElement('textarea');\n            txt.innerHTML = rate.name;\n            return {\n                identifier: getShippingOptionId(idx, rate.rate_id),\n                label: txt.value,\n                detail: '',\n                amount: removeNumberPrecision(rate.price, rate.currency_minor_unit)\n            }\n        });\n        options = [...options, ...rates];\n    });\n    return options;\n}","import {useMemo} from '@wordpress/element';\nimport {uniqueId} from 'lodash';\nimport {ACTIONS} from './action-reducer';\n\nexport const useActionEmitter = (dispatch) => {\n    const data = useMemo(() => ({\n        onPaymentDataFilter: (callback, priority = 10) => {\n            const action = {\n                action: ACTIONS.ADD_ACTION,\n                type: 'payment_data_filter',\n                id: uniqueId(),\n                callback,\n                priority\n            };\n            dispatch(action);\n            return () => dispatch({action: ACTIONS.REMOVE_ACTION, type: action.type, id: action.id})\n        }\n    }), [dispatch]);\n    return data;\n}\n\nexport const emittFilter = async (data, args, {handlers, type}) => {\n    const events = handlers[type];\n    const sortedEvents = Array.from(events.values()).sort((a, b) => a.priority - b.priority);\n    try {\n        for (const event of sortedEvents) {\n            data = await Promise.resolve(event.callback(data, args));\n        }\n    } catch (error) {\n        console.log(error);\n        throw error;\n    }\n    return data;\n}\n\n","export const ACTIONS = {\n    ADD_ACTION: 'add_action',\n    REMOVE_ACTION: 'remove_action'\n}\n\nexport const actionReducer = (state = {}, {action, type, id, callback, priority = 10}) => {\n    const event = state[type] ? state[type] : new Map();\n    switch (action) {\n        case ACTIONS.ADD_ACTION:\n            event.set(id, {callback, priority});\n            return {...state, [type]: event};\n        case ACTIONS.REMOVE_ACTION:\n            event.delete(id);\n            return {...state, [type]: event};\n    }\n    return state;\n}","export * from './payment-context';\nexport * from './action-reducer';\nexport * from './action-emitter';","import {useState, useRef, useEffect, useCallback, createContext, useContext, useReducer} from '@wordpress/element';\nimport {actionReducer, useActionEmitter, emittFilter} from \"../context\";\nimport {loadClient} from \"../utils\";\nimport {useNoticeHandler, useProcessPayment, useProcessPaymentFailure} from \"../hooks\";\n\nconst PaymentMethodDataContext = createContext();\nexport const PaymentMethodDataProvider = (\n    {\n        children,\n        container,\n        onSubmit,\n        getData,\n        isExpress = null,\n        setExpressPaymentError\n    }) => {\n    const [client, setClient] = useState();\n    const [paymentMethodNonce, setPaymentMethodNonce] = useState(null);\n    const [eventHandlers, dispatch] = useReducer(actionReducer, {});\n    const {onPaymentDataFilter} = useActionEmitter(dispatch);\n    const currentEventHandlers = useRef(eventHandlers);\n    const currentData = useRef({onSubmit});\n    const paymentHandler = useRef(null);\n    const [notice, addNotice, removeNotice] = useNoticeHandler({isExpress, setExpressPaymentError});\n\n    const doPaymentDataFilter = useCallback(async (data, args) => {\n        return await emittFilter(data, args, {\n            handlers: currentEventHandlers.current,\n            type: 'payment_data_filter'\n        });\n    }, []);\n\n    const setPaymentHandler = useCallback((handler) => {\n        paymentHandler.current = handler;\n    }, []);\n    useEffect(() => {\n        currentEventHandlers.current = eventHandlers;\n    }, [eventHandlers]);\n\n    useEffect(() => {\n        loadClient.then(client => setClient(client)).catch(error => {\n            addNotice(error)\n        });\n    }, [addNotice]);\n\n    useEffect(() => {\n        currentData.current = {onSubmit};\n    }, [onSubmit]);\n\n    useEffect(() => {\n        if (paymentMethodNonce) {\n            currentData.current.onSubmit();\n        }\n    }, [paymentMethodNonce]);\n\n    const paymentMethodDataContext = {\n        container,\n        client,\n        paymentMethodNonce,\n        setPaymentMethodNonce,\n        onPaymentDataFilter,\n        doPaymentDataFilter,\n        setPaymentHandler,\n        onSubmit,\n        paymentHandler: paymentHandler.current,\n        notice: {\n            notice,\n            addNotice,\n            removeNotice\n        },\n        fraud: {\n            enabled: getData('advancedFraudEnabled')\n        },\n        threeDSecureEnabled: getData('threeDSecureEnabled')\n    };\n    return (\n        <PaymentMethodDataContext.Provider value={paymentMethodDataContext}>\n            {children}\n        </PaymentMethodDataContext.Provider>\n    )\n}\n\nexport const usePaymentMethodDataContext = () => {\n    return useContext(PaymentMethodDataContext);\n}","import {useState, useEffect, useCallback, useRef, cloneElement} from '@wordpress/element';\nimport {__, sprintf} from '@wordpress/i18n';\nimport {create} from '@braintree/hosted-fields';\nimport classnames from \"classnames\";\nimport {getCustomFormConfig} from \"./registry\";\nimport {useBreakpointWidth} from \"../../hooks\";\nimport '../custom-forms';\n\nexport const CustomForm = ({options, client, id, setPaymentHandler}) => {\n    const config = getCustomFormConfig(id);\n    const {breakpoint = 0, fields: fieldKeys = [], content: Content = null, className = ''} = config;\n    const [hostedFieldInstance, setHostedFieldsInstance] = useState(false);\n    const [fields, setFields] = useState({});\n    const [containerElement, setContainerElement] = useState();\n    const [cardBrand, setCardBrand] = useState(null);\n    const fieldOrder = useRef([]);\n    const setFieldOrder = (id) => {\n        if (!fieldOrder.current.includes(id)) {\n            fieldOrder.current.push(id);\n        }\n    }\n    const getIconSrc = (type) => {\n        for (let icon of options.icons) {\n            if (icon.type === type) {\n                return icon.src;\n            }\n        }\n        return null;\n    };\n    const assertFieldsValid = useCallback(fields => {\n        const missingFields = fieldKeys.reduce((acc, prop) => {\n            if (!fields.hasOwnProperty(prop)) {\n                acc.push(prop);\n            }\n            return acc;\n        }, []);\n        return missingFields.length == 0;\n    }, []);\n    const setFieldContainer = useCallback((id) => (container) => {\n        if (!fields?.[id]?.container && container !== null) {\n            const field = {\n                container,\n                ...options.fields[id]\n            }\n            setFields({...fields, [id]: field});\n        }\n    }, [fields, setFields]);\n\n    const addClassToFields = useCallback((keys, className) => {\n        keys.forEach(key => {\n            fields?.[key]?.container.classList.add(className);\n        });\n    }, [fields]);\n\n    const paymentHandler = useCallback(({shippingData, billing}) => new Promise((resolve, reject) => {\n        const options = {billingAddress: {}};\n        if (billing?.billingData?.address_1) {\n            options.billingAddress.streetAddress = billing.billingData.address_1;\n        }\n        if (billing?.billingData?.postcode) {\n            options.billingAddress.postalCode = billing.billingData.postcode;\n        }\n        hostedFieldInstance.tokenize(options, (error, payload) => {\n            if (error) {\n                if (error.code === 'HOSTED_FIELDS_FIELDS_INVALID') {\n                    addClassToFields(error?.details?.invalidFieldKeys || [], 'braintree-hosted-fields-invalid');\n                } else if (error.code === 'HOSTED_FIELDS_FIELDS_EMPTY') {\n                    addClassToFields(fieldKeys, 'braintree-hosted-fields-invalid');\n                }\n                reject(error);\n            } else {\n                resolve(payload);\n            }\n        });\n    }), [hostedFieldInstance]);\n\n    useEffect(() => {\n        setPaymentHandler(paymentHandler);\n    }, [paymentHandler]);\n\n    useBreakpointWidth({key: id, el: containerElement, className, breakpoint});\n\n    useEffect(() => {\n        if (assertFieldsValid(fields)) {\n            client.then(clientInstance => {\n                create({\n                    client: clientInstance,\n                    fields,\n                    styles: options.styles\n                }).then(instance => setHostedFieldsInstance(instance)).catch(error => {\n\n                });\n            });\n        }\n    }, [fields]);\n\n    useEffect(() => {\n        if (hostedFieldInstance) {\n            hostedFieldInstance.on('cardTypeChange', (event) => {\n                if (event?.cards?.length == 1) {\n                    setCardBrand(event.cards[0].type);\n                } else {\n                    setCardBrand(null);\n                }\n            });\n            hostedFieldInstance.on('validityChange', (event) => {\n                const field = event.fields[event.emittedBy];\n                if (field.isValid) {\n                    const idx = fieldOrder.current.indexOf(event.emittedBy);\n                    if (fieldOrder.current?.[idx + 1]) {\n                        const nextField = fieldOrder.current[idx + 1];\n                        hostedFieldInstance.focus(nextField);\n                    }\n                }\n            });\n        }\n    }, [hostedFieldInstance]);\n    if (!Content) {\n        return <InvalidCustomForm id={id}/>;\n    }\n    return (\n        <div ref={setContainerElement} className='wc-braintree-blocks-custom__form'>\n            {cloneElement(Content, {\n                setFieldContainer,\n                setFieldOrder,\n                CardIcon: <CardIcon type={cardBrand} src={getIconSrc(cardBrand)}/>\n            })}\n        </div>\n    );\n}\n\nconst InvalidCustomForm = ({id}) => {\n    return (\n        <div className={'wc-braintree-blocks-notice__info'}>\n            {sprintf(__('%s is not a supported custom form.', 'woo-payment-gateway'), id)}\n        </div>\n    );\n};\n\nconst CardIcon = ({type, src}) => {\n    if (!type) {\n        return null;\n    }\n    const classes = classnames('wc-braintree-blocks-current-card__icon', type);\n    return (\n        <img className={classes} src={src}/>\n    )\n}\n\nexport default CustomForm;","const forms = {};\n\nexport const registerCustomForm = (config) => {\n    assertValidConfig(config);\n    forms[config.id] = config;\n}\n\nexport const getCustomFormConfig = (id) => {\n    if (assertValidFormId(id)) {\n        return forms[id];\n    }\n    return {};\n}\n\nconst assertValidFormId = (id) => {\n    return forms.hasOwnProperty(id);\n}\n\nconst assertValidConfig = (config) => {\n    if (!config.id) {\n        throw new Error('Custom forms must have a unique ID.');\n    }\n    assertConfigHasProperties(config, ['content', 'breakpoint']);\n}\n\nconst assertConfigHasProperties = (config, props = []) => {\n    const missingParams = props.reduce((acc, prop) => {\n        if (!config.hasOwnProperty(prop)) {\n            acc.push(prop);\n        }\n        return acc;\n    }, []);\n    if (missingParams.length > 0) {\n        throw new TypeError(`Custom form config missing params ${missingParams.join(', ')}`);\n    }\n}","import {__} from '@wordpress/i18n';\nimport {CardNumber, CardExpirationDate, CardCVV} from \"../../hosted-fields\";\nimport './style.scss';\n\nexport const BootstrapForm = (props) => {\n    return (\n        <div className='wc-braintree-blocks-bootstrap__form'>\n            <div className='row'>\n                <div className='col-md-6'>\n                    <div className={'form-group cardnumber-form-group'}>\n                        <label>{__('Card Number', 'woo-payment-gateway')}</label>\n                        <CardNumber className={'bootstrap-input'} {...props}/>\n                    </div>\n                </div>\n                <div className='col-md-3'>\n                    <div className={'form-group'}>\n                        <label>{__('Exp Date', 'woo-payment-gateway')}</label>\n                        <CardExpirationDate className={'bootstrap-input'} {...props}/>\n                    </div>\n                </div>\n                <div className='col-md-3'>\n                    <div className={'form-group'}>\n                        <label>{__('CVV', 'woo-payment-gateway')}</label>\n                        <CardCVV className={'bootstrap-input'} {...props}/>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default BootstrapForm;","import {registerCustomForm} from \"../custom-form/registry\";\nimport BootstrapForm from './bootstrap';\nimport SimpleForm from './simple';\n\nregisterCustomForm({\n    id: 'bootstrap_form',\n    content: <BootstrapForm/>,\n    breakpoint: 425,\n    fields: ['number', 'expirationDate', 'cvv'],\n    className: 'bootstrap-md'\n});\nregisterCustomForm({\n    id: 'simple_form',\n    content: <SimpleForm/>,\n    breakpoint: 425,\n    fields: ['number', 'expirationDate', 'cvv'],\n    className: 'simple-form-md'\n})","import {__} from '@wordpress/i18n';\nimport {CardNumber, CardExpirationDate, CardCVV} from \"../../hosted-fields\";\nimport './style.scss';\n\nexport const SimpleForm = (props) => {\n    return (\n        <div className='wc-braintree-blocks-simple__form'>\n            <div className='form-group'>\n                <label>{__('Card Number', 'woo-payment-gateway')}</label>\n                <CardNumber className='hosted-field braintree-card-number' {...props}/>\n            </div>\n            <div className='form-group'>\n                <label>{__('Exp Date', 'woo-payment-gateway')}</label>\n                <CardExpirationDate className='hosted-field' {...props}/>\n            </div>\n            <div className='form-group'>\n                <label>{__('CVV', 'woo-payment-gateway')}</label>\n                <CardCVV className='hosted-field' {...props}/>\n            </div>\n        </div>\n    )\n}\n\nexport default SimpleForm;","import {create as createDropin} from '@braintree/dropin';\nimport {useEffect, useState, useRef} from '@wordpress/element';\n\nexport const DropinForm = ({options, setDropinInstance}) => {\n    const {clientToken, locale = 'en_US'} = options;\n    const [error, setError] = useState(null);\n    const el = useRef(null);\n    useEffect(() => {\n        createDropin({\n            authorization: clientToken,\n            container: '.wc-braintree-blocks-dropin__form',\n            locale: locale\n        }, (error, dropinInstance) => {\n            if (error) {\n                setError(error?.message);\n            } else {\n                setDropinInstance(dropinInstance);\n            }\n        })\n    }, []);\n    return (\n        <>\n            {error && <div className={'wc-braintree-blocks__error'}>{error}</div>}\n            <div ref={el} className={'wc-braintree-blocks-dropin__form'}>\n\n            </div>\n        </>\n    )\n\n}\n\nexport default DropinForm;","import classnames from \"classnames\";\n\nexport const CardCVV = ({setFieldContainer, setFieldOrder, className}) => {\n    setFieldOrder('cvv');\n    const classes = classnames('braintree-web-hosted-field', className);\n    return <div ref={setFieldContainer('cvv')} id='braintree-cvv' className={classes}></div>\n}\n\nexport default CardCVV;","import classnames from \"classnames\";\n\nexport const CardExpirationDate = ({setFieldContainer, setFieldOrder, className}) => {\n    setFieldOrder('expirationDate');\n    const classes = classnames('braintree-web-hosted-field', className);\n    return (\n        <div ref={setFieldContainer('expirationDate')} id='braintree-exp-date'\n             className={classes}></div>\n    )\n}\n\nexport default CardExpirationDate;","import {useEffect, useRef} from \"@wordpress/element\";\nimport classnames from \"classnames\";\n\nexport const CardNumber = ({onChange, setFieldContainer, setFieldOrder, className, CardIcon}) => {\n    setFieldOrder('number');\n    const classes = classnames('braintree-web-hosted-field', className);\n    return (\n        <div ref={setFieldContainer('number')} id='braintree-number' className={classes}>\n            {CardIcon}\n        </div>\n    )\n}\n\nexport default CardNumber;","export * from './card-number';\nexport * from './card-expiration-date';\nexport * from './card-cvv';","import {useState, useEffect, useCallback} from '@wordpress/element';\nimport {registerPaymentMethod} from '@woocommerce/blocks-registry';\nimport classnames from 'classnames';\nimport {__} from '@wordpress/i18n';\nimport {getSettings, loadClient, getClientToken, canShowSavedCard} from \"../utils\";\nimport {PaymentMethod, PaymentMethodLabel, SavedTokenProvider, Notice} from '../../components';\nimport DropinForm from \"./dropin-form\";\nimport CustomForm from \"./custom-form\";\nimport {usePaymentMethodDataContext} from \"../context\";\n\nconst getData = getSettings('braintree_cc');\n\nconst CreditCardComponent = (props) => {\n    const {setPaymentHandler, notice} = usePaymentMethodDataContext();\n    const dropinEnabled = getData('dropinEnabled');\n    const Content = dropinEnabled ? DropinContainer : HostedFieldsContainer;\n    const classes = classnames('wc-braintree-card-container', {\n        'dropin': dropinEnabled,\n        'customForm': !dropinEnabled\n    })\n\n    return (\n        <>\n            {notice?.notice && <Notice notice={notice.notice} onRemove={notice.removeNotice}/>}\n            <div className={classes}>\n                <Content setPaymentHandler={setPaymentHandler}/>\n            </div>\n        </>\n    )\n}\n\nconst HostedFieldsContainer = (props) => {\n    const options = {\n        fields: getData('hostedFieldsOptions'),\n        styles: getData('hostedFieldsStyles'),\n        icons: getData('icons')\n    };\n    return <CustomForm options={options} client={loadClient} id={getData('customForm')} {...props}/>\n}\n\nconst DropinContainer = ({setPaymentHandler}) => {\n    const [dropinInstance, setDropinInstance] = useState(null);\n    const handlePaymentProcessing = useCallback(() => {\n        return new Promise((resolve, reject) => {\n            dropinInstance.requestPaymentMethod((err, payload) => {\n                if (err) {\n                    reject(err);\n                } else {\n                    resolve(payload);\n                }\n            });\n        })\n    }, [dropinInstance]);\n    useEffect(() => {\n        setPaymentHandler(handlePaymentProcessing);\n    }, [handlePaymentProcessing]);\n\n    const options = {\n        clientToken: getClientToken(),\n        locale: 'en_US'\n    }\n    return (\n        <DropinForm options={options} setDropinInstance={setDropinInstance}/>\n    )\n}\n\nregisterPaymentMethod({\n    name: getData('name'),\n    label: <PaymentMethodLabel\n        title={getData('title')}\n        paymentMethod={getData('name')}\n        icon={getData('icon')}/>,\n    ariaLabel: __('Credit Cards', 'woo-payment-gateway'),\n    canMakePayment: () => true,\n    content: <PaymentMethod content={CreditCardComponent}\n                            title={getData('title')}\n                            description={getData('description')}\n                            name={getData('name')}\n                            icon={getData('icon')}\n                            getData={getData}/>,\n    savedTokenComponent: <SavedTokenProvider getData={getData}\n                                             name={getData('name')}\n                                             vaultedThreeDSecure={getData('vaultedThreeDSecure')}/>,\n    edit: <PaymentMethod content={CreditCardComponent} getData={getData}/>,\n    supports: {\n        showSavedCards: getData('features').includes('tokenization'),\n        showSaveOption: canShowSavedCard(),\n        features: getData('features')\n    }\n});","import {removeNumberPrecision, formatPrice, getShippingOptionId} from \"../utils\";\n\n\nexport const getDisplayItems = (cartTotalItems, unit = 2) => {\n    let items = [];\n    const keys = ['total_tax', 'total_shipping'];\n    cartTotalItems.forEach(item => {\n        if (0 < item.value || (item.key && keys.includes(item.key))) {\n            items.push({\n                label: item.label,\n                type: 'LINE_ITEM',\n                price: removeNumberPrecision(item.value, unit).toString()\n            });\n        }\n    })\n    return items;\n}\n\nexport const getShippingOptions = (shippingRates) => {\n    let options = [];\n    shippingRates.forEach((shippingPackage, idx) => {\n        let rates = shippingPackage.shipping_rates.map(rate => {\n            let txt = document.createElement('textarea');\n            txt.innerHTML = rate.name;\n            let price = formatPrice(rate.price, rate.currency_code);\n            return {\n                id: getShippingOptionId(idx, rate.rate_id),\n                label: txt.value,\n                description: `${price}`\n            }\n        });\n        options = [...options, ...rates];\n    });\n    return options;\n}\n\nexport const getSelectedShippingOptionId = (shippingRates) => {\n    let defaultSelectedOptionId = '';\n    shippingRates.forEach((shippingPackage, idx) => {\n        shippingPackage.shipping_rates.forEach(rate => {\n            if (rate.selected) {\n                defaultSelectedOptionId = getShippingOptionId(idx, rate.rate_id);\n            }\n        });\n    });\n    return defaultSelectedOptionId;\n}","export * from './use-create-payments-client';\nexport * from './use-handle-tokenization';","import {useState, useEffect, useRef} from '@wordpress/element';\nimport {__} from '@wordpress/i18n';\nimport apiFetch from '@wordpress/api-fetch';\nimport google from '@googlepay';\nimport {isEqual} from 'lodash';\nimport {usePaymentEventsHandler} from \"../../hooks\";\nimport {removeNumberPrecision, extractSelectedShippingOption} from \"../../utils\";\nimport {getDisplayItems, getSelectedShippingOptionId, getShippingOptions} from \"../helpers\";\n\nexport const useCreatePaymentsClient = ({getData, shippingData, billing, eventRegistration}) => {\n    const {needsShipping} = shippingData;\n    const [paymentsClient, setPaymentsClient] = useState(null);\n    const {addShippingHandler} = usePaymentEventsHandler({billing, shippingData, eventRegistration});\n    const currentData = useRef({billing, shippingData});\n    useEffect(() => {\n        currentData.current = {billing, shippingData};\n    }, [billing, shippingData]);\n    useEffect(() => {\n        const args = {\n            environment: getData('googleEnvironment'),\n            merchantInfo: {\n                merchantName: getData('merchantName'),\n                merchantId: getData('googleMerchantId')\n            },\n            paymentDataCallbacks: {\n                onPaymentAuthorized: () => Promise.resolve({\n                    transactionState: \"SUCCESS\"\n                })\n            }\n        }\n        if (needsShipping) {\n            args.paymentDataCallbacks.onPaymentDataChanged = (data) => {\n                return new Promise((resolve, reject) => {\n                    const {shippingAddress, shippingOptionData} = data;\n                    const {shippingData} = currentData.current;\n                    const {shippingRates} = shippingData;\n                    const shippingOptions = getShippingOptions(shippingRates)\n                    let shippingOptionId = shippingOptionData?.id;\n                    //const shippingOptionsEqual = shippingOptionId === shippingOptionData?.id;\n                    const newAddress = {\n                        city: shippingAddress?.locality || '',\n                        state: shippingAddress?.administrativeArea || '',\n                        postcode: shippingAddress?.postalCode || '',\n                        country: shippingAddress?.countryCode || ''\n                    };\n                    const shippingAddressEqual = isEqual({\n                        city: shippingData.shippingAddress.city,\n                        state: shippingData.shippingAddress.state,\n                        postcode: shippingData.shippingAddress.postcode,\n                        country: shippingData.shippingAddress.country\n                    }, newAddress);\n                    apiFetch({\n                        method: 'POST',\n                        url: getData('routes').shipping,\n                        data: {\n                            payment_method: 'braintree_googlepay',\n                            address: newAddress,\n                            shipping_method: shippingOptionId\n                        }\n                    }).then(response => {\n                        if (response.code) {\n                            shippingOptionId = null;\n                            resolve(response.data.braintree_googlepay);\n                        } else {\n                            resolve(response.data.braintree_googlepay.requestUpdate);\n                        }\n                    }).catch(response => {\n                        resolve(response.data.braintree_googlepay);\n                    }).finally(() => {\n                        shippingData.setShippingAddress({...shippingData.shippingAddress, ...newAddress});\n                        if (shippingOptionId && shippingOptionId !== 'shipping_option_unselected') {\n                            shippingData.setSelectedRates(...extractSelectedShippingOption(shippingOptionId));\n                        }\n                    });\n                });\n            }\n        }\n        setPaymentsClient(new google.payments.api.PaymentsClient(args));\n    }, [\n        needsShipping,\n        addShippingHandler\n    ]);\n    return paymentsClient;\n}","import {useState, useRef, useCallback, useEffect} from '@wordpress/element';\nimport {getSetting} from '@woocommerce/settings';\nimport {getDisplayItems, getShippingOptions, getSelectedShippingOptionId} from \"../helpers\";\nimport {\n    removeNumberPrecision,\n    extractFullName,\n    DEFAULT_BILLING_ADDRESS,\n    DEFAULT_SHIPPING_ADDRESS\n} from \"../../utils\";\nimport {usePaymentMethodDataContext} from \"../../context\";\n\nconst isOlderVersion = getSetting('wcBraintreeData').isOlderVersion;\n\nexport const useHandleTokenization = (\n    {\n        getData,\n        onClick,\n        onClose,\n        googlePayInstance,\n        paymentsClient,\n        billing,\n        shippingData\n    }) => {\n    const currentData = useRef({billing, shippingData});\n    const payloadData = useRef({});\n    const {setPaymentMethodNonce, onPaymentDataFilter} = usePaymentMethodDataContext();\n    useEffect(() => {\n        currentData.current = {billing, shippingData, onClick, onClose};\n    }, [\n        onClick,\n        onClose,\n        shippingData,\n        billing\n    ]);\n\n    useEffect(() => {\n        const unsubscribe = onPaymentDataFilter((data, {billing, shippingData}) => {\n            if (payloadData.current?.billingData) {\n                let key = 'billingAddress';\n                if (isOlderVersion) {\n                    key = 'billingData';\n                    data.meta.billingData = {\n                        ...billing.billingData,\n                        ...payloadData.current.billingData\n                    };\n                } else {\n                    data.meta.billingAddress = {\n                        ...DEFAULT_BILLING_ADDRESS,\n                        ...payloadData.current.billingData\n                    };\n                }\n                if (payloadData.current.email) {\n                    data.meta[key].email = payloadData.current.email;\n                }\n            }\n            if (payloadData.current?.shippingAddress) {\n                if (isOlderVersion) {\n                    data.meta.shippingData = {\n                        address: {...shippingData.shippingAddress, ...payloadData.current.shippingAddress}\n                    }\n                } else {\n                    data.meta.shippingAddress = {\n                        ...DEFAULT_SHIPPING_ADDRESS,\n                        ...shippingData.shippingAddress,\n                        ...payloadData.current.shippingAddress\n                    }\n                }\n            }\n            return data;\n        });\n        return () => unsubscribe();\n    }, [onPaymentDataFilter]);\n\n    const handleClick = useCallback(() => {\n        const {billing, shippingData} = currentData.current;\n        const {billingData, currency, cartTotal, cartTotalItems} = billing;\n        const {needsShipping, shippingRates} = shippingData;\n        currentData.current.onClick();\n        const paymentDataRequestArgs = {\n            merchantInfo: {\n                merchantName: getData('googleMerchantName'),\n                merchantId: getData('googleMerchantId')\n            },\n            transactionInfo: {\n                countryCode: getData('countryCode'),\n                currencyCode: currency.code,\n                totalPriceStatus: 'FINAL',\n                totalPrice: removeNumberPrecision(cartTotal.value, currency.minorUnit).toString(),\n                totalPriceLabel: getData('totalPriceLabel'),\n                displayItems: getDisplayItems(cartTotalItems, currency.minorUnit)\n            },\n            emailRequired: !billingData.email,\n            callbackIntents: ['PAYMENT_AUTHORIZATION'],\n            shippingAddressRequired: needsShipping\n        };\n        if (needsShipping) {\n            paymentDataRequestArgs.shippingAddressParameters = {};\n            paymentDataRequestArgs.shippingOptionRequired = true;\n            paymentDataRequestArgs.callbackIntents = [...paymentDataRequestArgs.callbackIntents, 'SHIPPING_ADDRESS', 'SHIPPING_OPTION'];\n            const shippingOptions = getShippingOptions(shippingRates);\n            if (shippingOptions.length) {\n                paymentDataRequestArgs.shippingOptionParameters = {\n                    shippingOptions,\n                    defaultSelectedOptionId: getSelectedShippingOptionId(shippingRates)\n                }\n            }\n        }\n        const paymentDataRequest = googlePayInstance.createPaymentDataRequest(paymentDataRequestArgs);\n        paymentDataRequest.allowedPaymentMethods[0].parameters.assuranceDetailsRequired = true;\n        paymentDataRequest.allowedPaymentMethods[0].parameters.billingAddressRequired = true;\n        paymentDataRequest.allowedPaymentMethods[0].parameters.billingAddressParameters = {\n            format: 'FULL',\n            phoneNumberRequired: true\n        }\n        paymentsClient.loadPaymentData(paymentDataRequest).then(async (payload) => {\n            // parse the payload\n            if (payload?.paymentMethodData?.info?.billingAddress) {\n                const address = payload.paymentMethodData.info.billingAddress;\n                const [first_name, last_name] = extractFullName(address.name);\n                payloadData.current.billingData = {\n                    first_name,\n                    last_name,\n                    address_1: address.address1,\n                    address_2: address.address2,\n                    city: address.locality,\n                    state: address.administrativeArea,\n                    postcode: address.postalCode,\n                    country: address.countryCode\n                }\n            }\n            if (payload.shippingAddress) {\n                const address = payload.shippingAddress;\n                const [first_name, last_name] = extractFullName(address.name);\n                payloadData.current.shippingAddress = {\n                    first_name,\n                    last_name,\n                    address_1: address.address1,\n                    address_2: address.address2,\n                    city: address.locality,\n                    state: address.administrativeArea,\n                    postcode: address.postalCode,\n                    country: address.countryCode\n                };\n            }\n            if (payload.email) {\n                payloadData.current.email = payload.email;\n            }\n            const data = await googlePayInstance.parseResponse(payload);\n            // set payment method\n            payloadData.current.paymentMethodNonce = data.nonce;\n            setPaymentMethodNonce(data.nonce);\n        }).catch(error => {\n            if (error?.statusCode === 'CANCELED') {\n                currentData.current.onClose();\n                return;\n            }\n            console.log(error);\n        });\n    }, [\n        paymentsClient,\n        googlePayInstance,\n        setPaymentMethodNonce\n    ]);\n    return handleClick;\n}\n\nexport default useHandleTokenization;","import {useState, useEffect, useRef, useCallback} from '@wordpress/element';\nimport {create as createGooglePay} from '@braintree/google-payment';\nimport {registerExpressPaymentMethod} from '@woocommerce/blocks-registry';\nimport {PaymentMethod, PaymentMethodLabel} from \"../../components\";\nimport {getSettings, getClientToken} from \"../utils\";\nimport google from '@googlepay';\nimport {useCreatePaymentsClient, useHandleTokenization} from \"./hooks\";\nimport {usePaymentMethodDataContext} from \"../context\";\nimport {useExpressBreakpointWidth} from \"../hooks\";\n\nconst getData = getSettings('braintree_googlepay');\nlet canPay = null;\nconst paymentsClient = new google.payments.api.PaymentsClient({\n    environment: getData('googleEnvironment'),\n    merchantInfo: {\n        merchantName: getData('googleMerchantName'),\n        merchantId: getData('googleMerchantId')\n    }\n});\nconst GooglePayContainer = ({getData, billing, shippingData, eventRegistration, onClick, onClose}) => {\n    const el = useRef(null);\n    const [googlePayInstance, setGooglePayInstance] = useState(null);\n    useExpressBreakpointWidth({breakpoint: 375});\n    const {notice} = usePaymentMethodDataContext();\n    const paymentsClient = useCreatePaymentsClient({getData, billing, shippingData, eventRegistration});\n    const handleClick = useHandleTokenization({\n        getData,\n        onClick,\n        onClose,\n        googlePayInstance,\n        paymentsClient,\n        billing,\n        shippingData\n    });\n\n    const removeButton = useCallback((el) => {\n        while (el.lastChild) {\n            el.removeChild(el.lastChild);\n        }\n    }, []);\n\n    useEffect(() => {\n        createGooglePay({\n            authorization: getClientToken(),\n            googlePayVersion: 2,\n            googleMerchantId: getData('googleMerchantId')\n        }).then(instance => {\n            setGooglePayInstance(instance);\n        }).catch(error => notice.addNotice(error));\n    }, []);\n    useEffect(() => {\n        if (el.current && paymentsClient) {\n            removeButton(el.current);\n            const button = paymentsClient.createButton({\n                ...getData('buttonOptions'), ...{\n                    onClick: handleClick\n                }\n            });\n            if (getData('buttonShape') === 'rect') {\n                button.querySelector('button')?.classList?.remove('new_style');\n            } else {\n                button.querySelector('button')?.classList?.add('gpay-button-round');\n            }\n            el.current.append(button);\n        }\n    }, [\n        paymentsClient,\n        removeButton,\n        handleClick\n    ]);\n    return (\n        <div ref={el} className={'wc-braintree-blocks-gpay-button'}>\n\n        </div>\n    );\n}\n\nregisterExpressPaymentMethod({\n    name: getData('name'),\n    canMakePayment: async () => {\n        if (canPay !== null) {\n            return canPay;\n        }\n        try {\n            const googlePayInstance = await createGooglePay({\n                authorization: getClientToken(),\n                googlePayVersion: 2,\n                googleMerchantId: getData('googleMerchantId')\n            });\n            let result = await paymentsClient.isReadyToPay({\n                apiVersion: 2,\n                apiVersionMinor: 0,\n                allowedPaymentMethods: googlePayInstance.createPaymentDataRequest().allowedPaymentMethods\n            });\n            if (result.result) {\n                canPay = true;\n            } else {\n                canPay = false;\n            }\n            return canPay;\n        } catch (error) {\n            return error;\n        }\n    },\n    content: <PaymentMethod content={GooglePayContainer}\n                            title={getData('title')}\n                            description={getData('description')}\n                            name={getData('name')}\n                            icon={getData('icon')}\n                            getData={getData}\n                            isExpress={true}/>,\n    edit: <PaymentMethod content={GooglePayContainer} getData={getData}/>,\n    supports: {\n        showSavedCards: getData('features').includes('tokenization'),\n        showSaveOption: true,\n        features: getData('features')\n    }\n});\n","export * from './use-process-payment';\nexport * from './use-three-d-secure';\nexport * from './use-process-payment-failure';\nexport * from './use-device-data';\nexport * from './use-notice-handler';\nexport * from './use-payment-events-handler';\nexport * from './use-breakpoint-width'","import {useEffect, useState, useRef} from '@wordpress/element';\nimport {getFromCache, storeInCache} from \"../utils\";\nimport {usePaymentMethodDataContext} from \"../context\";\n\nexport const useBreakpointWidth = (\n    {\n        key,\n        el,\n        className = '',\n        breakpoint = 0\n    }) => {\n    const [windowWidth, setWindowWidth] = useState(window.innerWidth);\n    key = `${key}:breakpoint`;\n    useEffect(() => {\n        if (el) {\n            let minWidth = getFromCache(key, 0);\n            if (breakpoint < minWidth || !minWidth) {\n                minWidth = breakpoint;\n                storeInCache(key, minWidth);\n            }\n            if (el.clientWidth < minWidth) {\n                el.classList.add(className);\n            } else {\n                el.classList.remove(className);\n            }\n        }\n    }, [el, windowWidth]);\n\n    useEffect(() => {\n        const onWindowResize = (e) => setWindowWidth(window.innerWidth);\n        window.addEventListener('resize', onWindowResize);\n        return () => window.removeEventListener('resize', onWindowResize);\n    });\n}\n\nexport const useExpressBreakpointWidth = (\n    {\n        breakpoint,\n        className = 'wc-braintree-blocks-express-sm'\n    }) => {\n    const [element, setElement] = useState(null);\n    const {container} = usePaymentMethodDataContext();\n\n    useEffect(() => {\n        if (container) {\n            setElement(container.parentNode?.parentNode);\n        }\n    }, [container])\n\n    useBreakpointWidth({\n        key: 'express',\n        el: element,\n        breakpoint,\n        className\n    })\n}","import {useState, useEffect} from '@wordpress/element';\nimport {create} from '@braintree/data-collector';\nimport {usePaymentMethodDataContext} from \"../context\";\n\nexport const useDeviceData = (options = {}) => {\n    const {client, notice, onPaymentDataFilter, fraud} = usePaymentMethodDataContext();\n    const enabled = fraud.enabled;\n    const {addNotice} = notice;\n    const [dataCollector, setDataCollector] = useState(null);\n    useEffect(() => {\n        if (enabled && client) {\n            create({\n                client,\n                kount: true, ...options\n            }, (error, instance) => {\n                if (error) {\n                    addNotice(error);\n                } else {\n                    setDataCollector(instance);\n                }\n            });\n        }\n    }, [enabled, client, addNotice]);\n\n    useEffect(() => {\n        const unsubscribe = onPaymentDataFilter((data, {name}) => {\n            data.meta.paymentMethodData[`${name}_device_data`] = dataCollector?.deviceData;\n            return data;\n        }, 10);\n        return () => unsubscribe();\n    }, [dataCollector, onPaymentDataFilter]);\n    return dataCollector;\n}\n\nexport default useDeviceData;","import {useState, useCallback} from '@wordpress/element';\nimport {getErrorMessage} from \"../utils\";\n\nexport const useNoticeHandler = ({isExpress, setExpressPaymentError}) => {\n    const [notice, setNotice] = useState(null);\n    const addNotice = useCallback((error, type = 'error', isDismissible = true) => {\n        if (isExpress && type == 'error') {\n            setExpressPaymentError(getErrorMessage(error));\n        } else {\n            setNotice({\n                message: getErrorMessage(error),\n                type,\n                isDismissible\n            });\n        }\n\n    }, [setNotice, isExpress, setExpressPaymentError]);\n    const removeNotice = useCallback(() => setNotice(null), [setNotice]);\n    return [\n        notice,\n        addNotice,\n        removeNotice\n    ]\n}\n\nexport default useNoticeHandler;","import {useEffect, useRef, useCallback, useMemo} from '@wordpress/element';\n\nexport const usePaymentEventsHandler = (\n    {\n        billing,\n        shippingData,\n        eventRegistration\n    }) => {\n    const currentData = useRef({billing, shippingData});\n    const {onShippingRateSuccess, onShippingRateFail, onShippingRateSelectSuccess} = eventRegistration;\n    const handlers = useRef(new Map([\n        ['shippingHandler', []],\n        ['shippingMethodHandler', []],\n        ['shippingAddressHandler', []]\n    ]));\n    useEffect(() => {\n        currentData.current = {billing, shippingData};\n    });\n\n    const hasShippingOptions = (shippingRates) => shippingRates.map(rate => rate?.shipping_rates.length > 0).filter(Boolean).length > 0;\n\n    const handleShippingChange = useCallback(async () => {\n        const {billing, shippingData} = currentData.current;\n        const handler = handlers.current.get('shippingHandler');\n        if (handler.length > 0 && !shippingData.isSelectingRate && !shippingData.shippingRatesLoading) {\n            const success = hasShippingOptions(shippingData.shippingRates);\n            while (handler.length) {\n                const callback = handler.pop();\n                await Promise.resolve(callback(success, {billing, shippingData}));\n            }\n        }\n    }, []);\n\n    const handleShippingRateFail = useCallback(() => {\n        const {billing, shippingData} = currentData.current;\n        const handler = handlers.current.get('shippingHandler');\n        while (handler.length) {\n            const callback = handler.pop();\n            callback(false, {billing, shippingData});\n        }\n    }, []);\n\n    const addPaymentEventHandler = useCallback(type => (callback, execute = false) => {\n        const handler = handlers.current.get(type);\n        handler.push(callback);\n        if (execute) {\n            handleShippingChange();\n        }\n    }, [\n        handleShippingChange,\n        handlers.current\n    ]);\n\n    const addShippingHandler = useCallback(addPaymentEventHandler('shippingHandler'), [addPaymentEventHandler]);\n    const addShippingMethodHandler = useCallback(addPaymentEventHandler('shippingMethodHandler'), [addPaymentEventHandler]);\n    const addShippingAddressHandler = useCallback(addPaymentEventHandler('shippingAddressHandler'), [addPaymentEventHandler]);\n\n    useEffect(() => {\n        const unsubscribeShippingRateSuccess = onShippingRateSuccess(handleShippingChange);\n        const unsubscribeShippingRateSelectSuccess = onShippingRateSelectSuccess(handleShippingChange);\n        const unsubscribeShippingRateFail = onShippingRateFail(handleShippingRateFail);\n        return () => {\n            unsubscribeShippingRateSuccess();\n            unsubscribeShippingRateSelectSuccess();\n            unsubscribeShippingRateFail();\n        }\n    }, [\n        onShippingRateSuccess,\n        onShippingRateSelectSuccess,\n        onShippingRateFail\n    ]);\n\n    return {\n        addShippingHandler,\n        addShippingMethodHandler,\n        addShippingAddressHandler\n    }\n}","import {useEffect} from '@wordpress/element';\n\nexport const useProcessPaymentFailure = ({event, responseTypes, messageContext = null}) => {\n    useEffect(() => {\n        const unsubscribe = event((data) => {\n            if (data?.processingResponse?.paymentDetails?.braintreeErrorMessage) {\n                const message = data.processingResponse.paymentDetails.braintreeErrorMessage;\n                return {\n                    type: responseTypes.ERROR,\n                    message,\n                    messageContext\n                }\n            }\n            return null;\n        });\n        return () => unsubscribe();\n    }, [event]);\n}\n\nexport default useProcessPaymentFailure;","import {useEffect, useRef} from '@wordpress/element';\nimport {ensureErrorResponse, ensureSuccessResponse} from \"../utils\";\nimport {useThreeDSecure} from \"./use-three-d-secure\";\nimport {useDeviceData} from \"./use-device-data\";\nimport {usePaymentMethodDataContext} from '../context';\n\nexport const useProcessPayment = (\n    {\n        onPaymentProcessing,\n        responseTypes,\n        name,\n        shippingData,\n        billing,\n        activePaymentMethod,\n        advancedFraudOptions = {}\n    }) => {\n    const currentData = useRef({shippingData, billing, name, activePaymentMethod});\n    const {paymentMethodNonce, paymentHandler, doPaymentDataFilter} = usePaymentMethodDataContext();\n    useThreeDSecure({name});\n    useDeviceData(advancedFraudOptions);\n\n    useEffect(() => {\n        currentData.current = {shippingData, billing, name, activePaymentMethod, paymentMethodNonce};\n    });\n\n    useEffect(() => {\n        const unsubscribe = onPaymentProcessing(async () => {\n            if (currentData.current.activePaymentMethod == currentData.current.name) {\n                try {\n                    const nonce = currentData.current?.paymentMethodNonce || '';\n                    let data = {meta: {paymentMethodData: {[`${name}_nonce_key`]: nonce}}}, result;\n                    if (paymentHandler) {\n                        result = await Promise.resolve(paymentHandler(currentData.current));\n                        if (result?.nonce) {\n                            data.meta.paymentMethodData[`${name}_nonce_key`] = result.nonce;\n                        }\n                    }\n                    result = await doPaymentDataFilter(data, {...currentData.current, ...{result}});\n                    return ensureSuccessResponse(responseTypes, result);\n                } catch (error) {\n                    return ensureErrorResponse(responseTypes, error);\n                }\n            }\n        });\n        return () => unsubscribe();\n    }, [\n        onPaymentProcessing,\n        doPaymentDataFilter,\n        paymentHandler\n    ]);\n}\n\nexport default useProcessPayment;","import {useState, useEffect, useCallback} from '@wordpress/element';\nimport {__} from '@wordpress/i18n';\nimport {create} from '@braintree/three-d-secure';\nimport {removeNumberPrecision} from \"../utils\";\nimport {usePaymentMethodDataContext} from \"../context\";\nimport {getSettings} from '../utils';\n\nexport const useThreeDSecure = ({name, vaulted = false}) => {\n    const settings = getSettings(name);\n    const {client, notice, onPaymentDataFilter, threeDSecureEnabled} = usePaymentMethodDataContext();\n    const {addNotice} = notice;\n    const [instance, setInstance] = useState(null);\n    useEffect(() => {\n        if ((threeDSecureEnabled || vaulted) && client && !instance) {\n            try {\n                create({\n                    version: 2,\n                    client\n                }, (error, instance) => {\n                    if (!error) {\n                        setInstance(instance);\n                    } else {\n                        addNotice(error);\n                    }\n                });\n            } catch (error) {\n                console.log(error);\n            }\n        }\n    }, [\n        instance,\n        threeDSecureEnabled,\n        vaulted,\n        client,\n        addNotice\n    ]);\n\n    useEffect(() => {\n        if (instance) {\n            const unsubscribe = onPaymentDataFilter((data, {result, name, shippingData, billing}) => {\n                return new Promise((resolve, reject) => {\n                    const {needsShipping, shippingAddress} = shippingData;\n                    const {billingData, cartTotal, currency} = billing;\n                    instance.verifyCard({\n                        amount: removeNumberPrecision(cartTotal.value, currency.minorUnit),\n                        nonce: result.nonce,\n                        bin: result?.details?.bin,\n                        email: billingData.email || '',\n                        challengeRequested: settings('challengeRequested'),\n                        billingAddress: {\n                            givenName: billingData.first_name,\n                            surname: billingData.last_name,\n                            phoneNumber: billingData.phone,\n                            streetAddress: billingData.address_1?.slice(0, 50),\n                            extendedAddress: billingData.address_2?.slice(0, 50),\n                            locality: billingData.city?.slice(0, 50),\n                            region: billingData.state,\n                            postalCode: billingData.postcode,\n                            countryCodeAlpha2: billingData.country\n                        },\n                        additionalInformation: needsShipping ? {\n                            shippingGivenName: shippingAddress.first_name,\n                            shippingSurname: shippingAddress.last_name,\n                            shippingAddress: {\n                                streetAddress: shippingAddress.address_1?.slice(0, 50),\n                                extendedAddress: shippingAddress.address_2?.slice(0, 50),\n                                locality: shippingAddress.city?.slice(0, 50),\n                                region: shippingAddress.state,\n                                postalCode: shippingAddress.postcode,\n                                countryCodeAlpha2: shippingAddress.country\n                            }\n                        } : {},\n                        onLookupComplete: (data, next) => next()\n                    }, (error, payload) => {\n                        if (error) {\n                            reject(error);\n                        } else if (payload?.threeDSecureInfo?.status === 'challenge_required') {\n                            // 3DS was cancelled so teardown and set to null.\n                            instance.teardown().then(() => setInstance(null));\n                            reject({\n                                message: __('3DS authorization cancelled.', 'woo-payment-gateway')\n                            });\n                        } else {\n                            data.meta.paymentMethodData[`${name}_nonce_key`] = payload.nonce;\n                            resolve(data);\n                        }\n                    });\n                })\n            }, 20);\n            return () => unsubscribe();\n        }\n    }, [instance]);\n\n    return instance;\n}\n\nexport default useThreeDSecure;","export * from './use-load-paypal';\nexport * from './use-paypal-options';","import {useState, useEffect, useRef} from '@wordpress/element';\n\nexport const useLoadPayPal = (\n    {\n        paypalCheckoutInstance,\n        currency,\n        addNotice,\n        clientToken,\n        intent,\n        flow,\n        partnerCode\n    }) => {\n    const [paypal, setPayPal] = useState(null);\n    const currentData = useRef({});\n    useEffect(() => {\n        currentData.current.addNotice = addNotice;\n    }, [\n        addNotice\n    ]);\n    useEffect(() => {\n        if (paypalCheckoutInstance) {\n            if (window.paypal) {\n                setPayPal(window.paypal)\n            } else {\n                clientToken = JSON.parse(window.atob(clientToken));\n                const args = {\n                    'client-id': clientToken?.paypal?.clientId,\n                    commit: true,\n                    intent: flow === 'vault' ? 'tokenize' : intent,\n                    currency,\n                    vault: flow === 'vault' ? true : false,\n                    components: 'buttons,messages',\n                    dataAttributes: {\n                        'partner-attribution-id': partnerCode\n                    }\n                };\n                paypalCheckoutInstance.loadPayPalSDK(args).then(() => {\n                    setPayPal(window.paypal)\n                }).catch(error => {\n                    currentData.current.addNotice(error);\n                });\n            }\n        }\n    }, [paypalCheckoutInstance]);\n    return paypal;\n}\n\nexport default useLoadPayPal;","import {useEffect, useMemo, useCallback, useRef} from '@wordpress/element';\nimport {__} from '@wordpress/i18n';\nimport {isEqual, isEmpty} from 'lodash';\nimport {getSetting} from '@woocommerce/settings';\nimport {\n    extractSelectedShippingOption,\n    removeNumberPrecision,\n    getCartTotalItem,\n    extractFullName,\n    getShippingOptionId,\n    cartContainsSubscription,\n    DEFAULT_BILLING_ADDRESS,\n    DEFAULT_SHIPPING_ADDRESS\n} from \"../../utils\";\nimport {usePaymentEventsHandler} from \"../../hooks\";\nimport {getSelectedShippingOptionId} from \"../../googlepay/helpers\";\nimport {usePaymentMethodDataContext} from \"../../context\";\n\nconst isOlderVersion = getSetting('wcBraintreeData').isOlderVersion;\n\nexport const usePayPalOptions = (\n    {\n        getData,\n        addNotice,\n        paypal,\n        paypalCheckoutInstance,\n        billing,\n        shippingData,\n        eventRegistration,\n        emitResponse,\n        onClick,\n        onClose\n    }) => {\n    const {cartTotal, currency} = billing;\n    const {needsShipping} = shippingData;\n    const {noticeContexts, responseTypes} = emitResponse;\n    const currentData = useRef({billing, shippingData});\n    const paymentData = useRef({});\n    const {addShippingHandler} = usePaymentEventsHandler({billing, shippingData, eventRegistration});\n    const {setPaymentMethodNonce, onPaymentDataFilter, onSubmit} = usePaymentMethodDataContext();\n    const {onCheckoutAfterProcessingWithError} = eventRegistration;\n\n    useEffect(() => {\n        const unsubscribe = onCheckoutAfterProcessingWithError(() => {\n            if (paymentData.current.incompleteBilling) {\n                return {\n                    type: responseTypes.ERROR,\n                    message: __('Please complete all required billing fields below then click Place Order.', 'woo-payment-gateway'),\n                    messageContext: noticeContexts.EXPRESS_PAYMENTS\n                };\n            }\n            return null;\n        });\n        return () => unsubscribe();\n    }, [\n        onCheckoutAfterProcessingWithError,\n        responseTypes,\n        noticeContexts\n    ]);\n\n    const getButtonStyle = useCallback((type) => {\n        const baseStyle = getData('buttonStyle');\n        switch (type) {\n            case paypal.FUNDING.PAYPAL:\n                return baseStyle;\n            case paypal.FUNDING.PAYLATER:\n                return {...baseStyle, ...getData('bnplButtonStyle')};\n            default:\n                return baseStyle;\n\n        }\n    }, [paypal]);\n\n    const getFormattedShippingOptions = (shippingRates) => {\n        let options = [];\n        shippingRates.forEach((shippingPackage, idx) => {\n            let rates = shippingPackage.shipping_rates.map(rate => {\n                let txt = document.createElement('textarea');\n                txt.innerHTML = rate.name;\n                return {\n                    id: getShippingOptionId(idx, rate.rate_id),\n                    label: txt.value,\n                    type: 'SHIPPING',\n                    selected: rate.selected,\n                    amount: {\n                        value: removeNumberPrecision(rate.price, 2),\n                        currency_code: rate.currency_code\n                    }\n                }\n            });\n            options = [...options, ...rates];\n        });\n        return options;\n    };\n\n    useEffect(() => {\n        currentData.current = {billing, shippingData, onClick, onClose, onSubmit, addNotice};\n    }, [\n        billing,\n        shippingData,\n        onClick\n    ]);\n\n    useEffect(() => {\n        const unsubscribe = onPaymentDataFilter((data, {billing, shippingData}) => {\n            data.meta.paymentMethodData[`${getData('name')}_nonce_key`] = paymentData.current.nonce;\n            if (isOlderVersion) {\n                data.meta.billingData = {...billing.billingData, ...paymentData.current.billingData};\n                data.meta.shippingData = {\n                    address: {...shippingData.shippingAddress, ...paymentData.current.shippingAddress}\n                }\n            } else {\n                data.meta.billingAddress = {\n                    ...DEFAULT_BILLING_ADDRESS,\n                    ...billing.billingData,\n                    ...paymentData.current.billingData\n                };\n                data.meta.shippingAddress = {\n                    ...DEFAULT_SHIPPING_ADDRESS,\n                    ...shippingData.shippingAddress,\n                    ...paymentData.current.shippingAddress\n                }\n            }\n\n            return data;\n        }, 5);\n        return () => unsubscribe();\n    }, [onPaymentDataFilter]);\n\n    const onShippingChange = useCallback((actions, selectedShippingOption, shippingDataEqual, resolve) => (success, {billing, shippingData}) => {\n        const {currency, cartTotal, cartTotalItems} = billing;\n        const {shippingRates} = shippingData;\n        if (success) {\n            // create the patch\n            const patch = [{\n                'op': 'replace',\n                'path': '/purchase_units/@reference_id==\\'default\\'/amount',\n                'value': {\n                    'currency_code': currency.code,\n                    'value': removeNumberPrecision(cartTotal.value, 2),\n                    'breakdown': {\n                        'item_total': {\n                            'currency_code': currency.code,\n                            'value': removeNumberPrecision(getCartTotalItem('total_items', cartTotalItems), 2) +\n                                removeNumberPrecision(getCartTotalItem('total_fees', cartTotalItems), 2)\n                        },\n                        'shipping': {\n                            'currency_code': currency.code,\n                            'value': removeNumberPrecision(getCartTotalItem('total_shipping', cartTotalItems), 2)\n                        },\n                        'tax_total': {\n                            'currency_code': currency.code,\n                            'value': removeNumberPrecision(getCartTotalItem('total_tax', cartTotalItems), 2)\n                        },\n                        'shipping_discount': {\n                            'currency_code': currency.code,\n                            'value': removeNumberPrecision(getCartTotalItem('total_discount', cartTotalItems), 2)\n                        }\n                    }\n                }\n            }, {\n                'op': !selectedShippingOption ? 'add' : 'replace',\n                'path': '/purchase_units/@reference_id==\\'default\\'/shipping/options',\n                'value': getFormattedShippingOptions(shippingRates)\n            }];\n            return actions.order.patch(patch).then(() => {\n                resolve();\n                actions.resolve()\n            });\n        } else {\n            resolve();\n            return actions.reject();\n        }\n    }, []);\n\n    const options = useMemo(() => {\n        if (paypal && paypalCheckoutInstance) {\n            const options = [];\n            const sources = [paypal.FUNDING.PAYPAL];\n            if (getData('bnplEnabled')) {\n                sources.push(paypal.FUNDING.PAYLATER);\n            }\n            for (let fundingSource of sources) {\n                const option = {\n                    fundingSource,\n                    style: getButtonStyle(fundingSource),\n                    onError: (error) => currentData.current.addNotice(error),\n                    onClick: () => {\n                        currentData.current.onClick();\n                    },\n                    onApprove: (data, actions) => {\n                        return paypalCheckoutInstance.tokenizePayment(data).then(response => {\n                            const {billingData} = currentData.current.billing;\n                            const {needsShipping} = currentData.current.shippingData;\n                            // set shipping address\n                            paymentData.current = {nonce: response.nonce, billingData: {}};\n                            if (response?.details?.billingAddress) {\n                                const address = response.details.billingAddress;\n                                paymentData.current.billingData = {\n                                    address_1: address.line1,\n                                    address_2: address.line2,\n                                    city: address.city,\n                                    state: address.state,\n                                    postcode: address.postalCode,\n                                    country: address.countryCode\n                                }\n                            }\n                            if (!isEmpty(response?.details?.shippingAddress)) {\n                                const {shippingAddress} = response.details;\n                                const [first_name, last_name] = extractFullName(shippingAddress.recipientName);\n                                paymentData.current.shippingAddress = {\n                                    first_name,\n                                    last_name,\n                                    address_1: shippingAddress.line1 || '',\n                                    address_2: shippingAddress.line2 || '',\n                                    city: shippingAddress.city || '',\n                                    state: shippingAddress.state || '',\n                                    postcode: shippingAddress.postalCode || '',\n                                    country: shippingAddress.countryCode || ''\n                                }\n                                if (isEmpty(paymentData.current.billingData)) {\n                                    paymentData.current.billingData = paymentData.current.shippingAddress;\n                                }\n                            }\n                            if (response.details?.phone) {\n                                paymentData.current.billingData.phone = response.details.phone;\n                            }\n                            if (response.details?.email) {\n                                paymentData.current.billingData.email = response.details.email;\n                            }\n                            if (response.details?.firstName) {\n                                paymentData.current.billingData.first_name = response.details.firstName;\n                            }\n                            if (response.details?.lastName) {\n                                paymentData.current.billingData.last_name = response.details.lastName;\n                            }\n                            if (!paymentData.current.billingData.address_1 && !billingData.address_1) {\n                                paymentData.current.incompleteBilling = true;\n                            }\n                            if (cartContainsSubscription() && needsShipping) {\n                                currentData.current.addNotice(__('Please select a shipping option then click Place Order to complete your payment.', 'woo-payment-gateway'), 'info');\n                            } else {\n                                setPaymentMethodNonce(response.nonce);\n                            }\n                        });\n                    },\n                    createOrder: () => {\n                        return paypalCheckoutInstance.createPayment({\n                            flow: cartContainsSubscription() ? 'vault' : 'checkout',\n                            intent: getData('intent'),\n                            currency: currency.code,\n                            displayName: getData('displayName'),\n                            amount: removeNumberPrecision(cartTotal.value, currency.minorUnit),\n                            enableShippingAddress: needsShipping,\n                            shippingAddressEditable: needsShipping\n                        }).then(id => {\n                            return id;\n                        }).catch(error => {\n                            console.log(error);\n                        })\n                    },\n                    onCancel: () => {\n                        currentData.current.onClose();\n                    }\n                }\n                if (cartContainsSubscription()) {\n                    option.createBillingAgreement = option.createOrder;\n                    delete (option.createOrder);\n                }\n                // can't update shipping options when using billing agreements.\n                if (needsShipping && !option.hasOwnProperty('createBillingAgreement')) {\n                    option.onShippingChange = (data, actions) => {\n                        const {shipping_address: address, selected_shipping_option} = data;\n                        const selectedShippingOption = selected_shipping_option?.id;\n                        const shippingData = currentData.current.shippingData;\n                        const {shippingAddress} = shippingData;\n                        const {city, state, postcode, country} = shippingAddress;\n                        const shippingOptionId = getSelectedShippingOptionId(currentData.current.shippingData.shippingRates);\n                        const newAddress = {\n                            city: address.city || '',\n                            state: address.state || '',\n                            postcode: address.postal_code || '',\n                            country: address.country_code || ''\n                        }\n                        const isShippingOptionEqual = selectedShippingOption == null || selectedShippingOption == shippingOptionId;\n                        const isAddressEqual = isEqual({\n                            city, state, postcode, country\n                        }, newAddress);\n                        const shippingDataEqual = isAddressEqual && isShippingOptionEqual;\n                        if (selectedShippingOption) {\n                            shippingData.setSelectedRates(...extractSelectedShippingOption(selectedShippingOption));\n                        }\n                        shippingData.setShippingAddress({...shippingAddress, ...newAddress});\n                        return new Promise(resolve => {\n                            addShippingHandler(onShippingChange(actions, selected_shipping_option?.id, shippingDataEqual, resolve), shippingDataEqual);\n                        });\n                    }\n                }\n                let button = paypal.Buttons(option);\n                if (button.isEligible()) {\n                    options.push(option);\n                }\n            }\n            return options;\n        }\n    }, [\n        paypal,\n        paypalCheckoutInstance,\n        needsShipping,\n        onShippingChange,\n        addShippingHandler,\n        setPaymentMethodNonce\n    ]);\n    return options;\n}\n\nexport default usePayPalOptions;","import {useState, useEffect, useRef, useCallback} from '@wordpress/element';\nimport {registerExpressPaymentMethod} from '@woocommerce/blocks-registry';\nimport {ExperimentalOrderMeta, TotalsWrapper} from '@woocommerce/blocks-checkout';\nimport {registerPlugin} from '@wordpress/plugins';\nimport {create as createPayPalCheckout} from '@braintree/paypal-checkout';\nimport {getClientToken, getSettings, getMerchantAccount, cartContainsSubscription} from \"../utils\";\nimport {Notice, PaymentMethod} from \"../../components\";\nimport {usePaymentMethodDataContext} from \"../context\";\nimport {useLoadPayPal, usePayPalOptions} from \"./hooks\";\nimport {useExpressBreakpointWidth} from \"../hooks\";\n\nconst getData = getSettings('braintree_paypal');\n\nconst PayPalContainer = ({billing, shippingData, eventRegistration, emitResponse, onClick, onClose}) => {\n    const {currency} = billing;\n    const {notice} = usePaymentMethodDataContext();\n    const {addNotice} = notice;\n    const [paypalCheckoutInstance, setPayPalCheckoutInstance] = useState(null);\n    const [isPayPalButton, setIsPayPalButton] = useState(false);\n    const paypalButton = useRef();\n    useExpressBreakpointWidth({breakpoint: 375});\n    const paypal = useLoadPayPal({\n        paypalCheckoutInstance,\n        currency: currency.code,\n        clientToken: getClientToken(),\n        addNotice,\n        intent: getData('intent'),\n        flow: cartContainsSubscription() ? 'vault' : 'checkout',\n        partnerCode: getData('partnerCode')\n    });\n    const options = usePayPalOptions({\n        getData,\n        addNotice,\n        paypal,\n        paypalCheckoutInstance,\n        billing,\n        shippingData,\n        eventRegistration,\n        emitResponse,\n        onClick,\n        onClose\n    })\n    useEffect(() => {\n        createPayPalCheckout({\n            authorization: getClientToken(),\n            merchantAccountId: getMerchantAccount(currency.code)\n        }).then(instance => {\n            setPayPalCheckoutInstance(instance)\n        }).catch(error => {\n            addNotice(error)\n        });\n    }, []);\n\n    useEffect(() => {\n        if (paypal) {\n            paypal.Buttons.driver(\"react\", {React, ReactDOM});\n            paypalButton.current = paypal.Buttons.driver(\"react\", {React, ReactDOM});\n            setIsPayPalButton(true);\n        }\n    }, [paypal]);\n    const PayPalButton = paypalButton.current;\n    const BUTTON = isPayPalButton && options ? options.map(option => {\n        return <PayPalButton key={option.fundingSource} {...option}/>\n    }) : null;\n    return (\n        <>\n            {notice?.notice && <Notice notice={notice.notice} onRemove={notice.removeNotice}/>}\n            {BUTTON}\n        </>\n    )\n}\n\nregisterExpressPaymentMethod({\n    name: getData('name'),\n    canMakePayment: () => {\n        return true;\n    },\n    content: <PaymentMethod content={PayPalContainer}\n                            title={getData('title')}\n                            description={getData('description')}\n                            name={getData('name')}\n                            icon={getData('icon')}\n                            getData={getData}\n                            isExpress={true}\n                            advancedFraudOptions={{paypal: true}}/>,\n    edit: <PaymentMethod content={PayPalContainer} getData={getData}/>,\n    supports: {\n        showSavedCards: getData('features').includes('tokenization'),\n        showSaveOption: true,\n        features: getData('features')\n    }\n});\n\nconst OrderItemMessaging = ({cart, extensions, context}) => {\n    const {cartTotals} = cart;\n    const {currency_code: currency, total_price} = cartTotals;\n    const [paypalCheckout, setPayPalCheckout] = useState();\n    const currencies = getData('payLaterMsgCurrencies');\n    const isAvailable = getData('paylaterMsgEnabled') && currencies.includes(currency) && !cartContainsSubscription();\n    const container = useRef(null);\n    if (!isAvailable) {\n        return null;\n    }\n    useEffect(() => {\n        createPayPalCheckout({\n            authorization: getClientToken(),\n            merchantAccountId: getMerchantAccount(currency)\n        }).then((instance) => setPayPalCheckout(instance)).catch(() => {\n        });\n    }, []);\n    const paypal = useLoadPayPal({\n        paypalCheckoutInstance: paypalCheckout,\n        currency,\n        addNotice: null,\n        clientToken: getClientToken(),\n        intent: getData('intent'),\n        flow: 'checkout',\n        partnerCode: getData('partnerCode')\n    });\n\n    useEffect(() => {\n        if (paypal) {\n            paypal.Messages({\n                amount: total_price / (10 ** cartTotals.currency_minor_unit),\n                currency,\n                placement: 'checkout',\n                style: {\n                    layout: 'text',\n                    logo: {\n                        type: 'primary',\n                        position: 'left'\n                    },\n                    text: {color: getData('paylaterTxtColor')}\n                }\n            }).render(container.current);\n        }\n    }, [paypal, total_price]);\n    return (\n        <TotalsWrapper>\n            <div className='wc-block-components-totals-item'>\n                <div ref={container} className='paypal-msg-container'></div>\n            </div>\n        </TotalsWrapper>\n    )\n}\n\nconst render = () => {\n    return (\n        <ExperimentalOrderMeta>\n            <OrderItemMessaging/>\n        </ExperimentalOrderMeta>\n    )\n}\n\n\nregisterPlugin('wc-braintree', {\n    render,\n    scope: 'woocommerce-checkout'\n});\n","import {getSetting} from '@woocommerce/settings';\nimport {create as createClient} from '@braintree/client';\nimport {getCurrency, formatPrice as wcFormatPrice} from '@woocommerce/price-format';\n\nconst wcBraintreeData = getSetting('wcBraintreeData');\n\nconst errorMessages = getSetting('wcBraintreeMessages');\n\nconst CACHE_PREFIX = 'wcBraintree:';\n\nconst SHIPPING_OPTION_REGEX = /^([\\w]+)\\:(.+)$/;\n\nexport const getSettings = (name) => {\n    name = `${name}_data`;\n    return (key) => {\n        if (key) {\n            return getSetting(name)[key];\n        }\n        return getSetting(name);\n    }\n}\n\nexport const getClientToken = () => wcBraintreeData.clientToken;\n\nexport const getMerchantAccount = (currency) => wcBraintreeData?.merchantAccounts?.[currency] ? wcBraintreeData.merchantAccounts[currency] : null\n\nexport const loadClient = new Promise((resolve, reject) => {\n    createClient({\n        authorization: wcBraintreeData.clientToken\n    }, (err, clientInstance) => {\n        if (err) {\n            reject(err);\n        } else {\n            resolve(clientInstance);\n        }\n    });\n});\n\nexport const canMakePayment = () => {\n    return new Promise((resolve, reject) => {\n        loadClient.then(() => resolve(true)).catch(error => {\n            console.log('Error loading client: ', error);\n            resolve({error});\n        });\n    });\n}\n\nexport const ensureSuccessResponse = (responseTypes, data = {}) => {\n    return {type: responseTypes.SUCCESS, ...data};\n}\n\nexport const ensureErrorResponse = (responseTypes, error) => {\n    return {type: responseTypes.ERROR, message: getErrorMessage(error)}\n};\n\nexport const getErrorMessage = (error) => {\n    let msg = error?.message;\n    if (typeof error == 'string') {\n        msg = error;\n    } else {\n        if (error.code && errorMessages[error.code]) {\n            msg = errorMessages[error.code];\n        }\n    }\n    return msg;\n}\n\nexport const removeNumberPrecision = (value, unit) => {\n    return value / 10 ** unit;\n}\n\nexport class BraintreeError extends Error {\n    constructor(error) {\n        super(error.message);\n        this.error = error;\n    }\n}\n\nconst getCacheKey = (key) => `${CACHE_PREFIX}${key}`;\n\nexport const storeInCache = (key, value) => {\n    const exp = Math.floor(new Date().getTime() / 1000) + (60 * 15);\n    if ('sessionStorage' in window) {\n        sessionStorage.setItem(getCacheKey(key), JSON.stringify({value, exp}));\n    }\n}\n\nexport const getFromCache = (key, defaultValue = null) => {\n    if ('sessionStorage' in window) {\n        try {\n            const item = JSON.parse(sessionStorage.getItem(getCacheKey(key)));\n            if (item) {\n                const {value, exp} = item;\n                if (Math.floor(new Date().getTime() / 1000) > exp) {\n                    deleteFromCache(getCacheKey(key));\n                } else {\n                    return value;\n                }\n            }\n        } catch (err) {\n        }\n    }\n    return defaultValue;\n}\n\nexport const deleteFromCache = (key) => {\n    if ('sessionStorage' in window) {\n        sessionStorage.removeItem(getCacheKey(key));\n    }\n}\n\nexport const formatPrice = (price, currencyCode) => {\n    const {prefix, suffix, decimalSeparator, minorUnit, thousandSeparator} = getCurrency(currencyCode);\n    if (price == '' || price === undefined) {\n        return price;\n    }\n\n    price = typeof price === 'string' ? parseInt(price, 10) : price;\n    price = price / 10 ** minorUnit;\n    price = price.toString().replace('.', decimalSeparator);\n    let fractional = '';\n    const index = price.indexOf(decimalSeparator);\n    if (index < 0) {\n        if (minorUnit > 0) {\n            price += `${decimalSeparator}${new Array(minorUnit + 1).join('0')}`;\n        }\n    } else {\n        const fractional = price.substr(index + 1);\n        if (fractional.length < minorUnit) {\n            price += new Array(minorUnit - fractional.length + 1).join('0');\n        }\n    }\n    // separate out price and decimals so thousands separator can be added.\n    const match = price.match(new RegExp(`(\\\\d+)\\\\${decimalSeparator}(\\\\d+)`));\n    if (match) {\n        ({1: price, 2: fractional} = match);\n    }\n    price = price.replace(new RegExp(`\\\\B(?=(\\\\d{3})+(?!\\\\d))`, 'g'), `${thousandSeparator}`);\n    price = fractional?.length > 0 ? price + decimalSeparator + fractional : price;\n    price = prefix + price + suffix;\n    return price;\n}\n\nexport const getShippingOptionId = (packageId, rateId) => `${packageId}:${rateId}`;\n\nexport const extractSelectedShippingOption = (id) => {\n    const result = id.match(SHIPPING_OPTION_REGEX);\n    if (result) {\n        const {1: packageIdx, 2: rate} = result;\n        return [rate, packageIdx];\n    }\n    return [];\n}\n\nexport const getSelectedShippingOptionId = (selectedRates) => {\n    for (let idx of Object.keys(selectedRates)) {\n        return getShippingOptionId(idx, selectedRates[idx]);\n    }\n}\n\nexport const extractFullName = (name) => {\n    const firstName = name.split(' ').slice(0, -1).join(' ');\n    const lastName = name.split(' ').pop();\n    return [firstName, lastName];\n}\n\nexport const extractAddressLines = (lines) => {\n    let address_1, address_2;\n    if (Array.isArray(lines)) {\n        address_1 = lines?.[0];\n        if (lines.length > 1) {\n            address_2 = lines?.[1];\n        }\n    }\n    return {address_1, address_2};\n}\n\nexport const getCartTotalItem = (key, cartTotalItems) => {\n    for (let item of cartTotalItems) {\n        if (item.key === key) {\n            return item.value;\n        }\n    }\n    return null;\n}\n\nexport const canShowSavedCard = () => {\n    return !cartContainsSubscription();\n}\n\nexport const cartContainsSubscription = () => wcBraintreeData?.hasSubscription == true;\n\nexport const versionCompare = (ver1, ver2, compare) => {\n    switch (compare) {\n        case '<':\n            return ver1 < ver2;\n        case '>':\n            return ver1 > ver2;\n        case '<=':\n            return ver1 <= ver2;\n        case '>=':\n            return ver1 >= ver2;\n        case '=':\n            return ver1 == ver2;\n    }\n    return false;\n}\n\nexport const DEFAULT_SHIPPING_ADDRESS = {\n    'first_name': '',\n    'last_name': '',\n    'company': '',\n    'address_1': '',\n    'address_2': '',\n    'city': '',\n    'state': '',\n    'postcode': '',\n    'country': '',\n    'phone': '',\n}\n\nexport const DEFAULT_BILLING_ADDRESS = {\n    ...DEFAULT_SHIPPING_ADDRESS,\n    'email': ''\n}\n","export * from './use-handle-tokenization';","import {useEffect, useCallback, useRef} from '@wordpress/element';\nimport {usePaymentMethodDataContext} from \"../../context\";\n\nexport const useHandleTokenization = ({venmoInstance, onSubmit}) => {\n    const paymentData = useRef(null);\n    const {onPaymentDataFilter, paymentMethodNonce, setPaymentMethodNonce, notice: {addNotice}} = usePaymentMethodDataContext();\n    const handleClick = useCallback(async () => {\n        try {\n            if (paymentMethodNonce) {\n                onSubmit();\n            } else {\n                const result = await venmoInstance.tokenize();\n                paymentData.current = {nonce: result.nonce};\n                setPaymentMethodNonce(result.nonce);\n            }\n        } catch (error) {\n            addNotice(error);\n        }\n    }, [\n        venmoInstance,\n        onSubmit,\n        paymentMethodNonce\n    ]);\n\n    useEffect(() => {\n        const unsubscribe = onPaymentDataFilter((data, {name}) => {\n            data.meta.paymentMethodData[`${name}_nonce_key`] = paymentData.current.nonce;\n            return data;\n        }, 5);\n        return () => unsubscribe();\n    }, [onPaymentDataFilter]);\n\n    return {handleClick}\n}\n\nexport default useHandleTokenization;","import {create as createVenmo} from '@braintree/venmo';\nimport {useState, useEffect} from '@wordpress/element';\nimport {__} from '@wordpress/i18n';\nimport {registerPaymentMethod} from '@woocommerce/blocks-registry';\nimport {Notice, PaymentMethodLabel} from \"../../components\";\nimport {PaymentMethod} from \"../../components\";\nimport {SavedTokenProvider} from \"../../components\";\nimport {getSettings, getClientToken} from \"../utils\";\nimport {usePaymentMethodDataContext} from \"../context\";\nimport {useHandleTokenization} from \"./hooks\";\n\nconst getData = getSettings('braintree_venmo');\n\nconst loadVenmo = new Promise((resolve, reject) => {\n    createVenmo({\n        authorization: getClientToken(),\n        allowNewBrowserTab: false\n    }).then(instance => resolve(instance)).catch(error => reject(error));\n});\n\nconst VenmoComponent = ({onSubmit}) => {\n    const {notice} = usePaymentMethodDataContext();\n    const [venmoInstance, setVenmoInstance] = useState(null);\n    const {handleClick} = useHandleTokenization({\n        venmoInstance,\n        onSubmit\n    });\n\n    useEffect(() => {\n        loadVenmo.then(instance => setVenmoInstance(instance)).catch(error => notice.addNotice(error));\n    }, []);\n    return (\n        <>\n            {notice?.notice && <Notice notice={notice.notice} onRemove={notice.removeNotice}/>}\n            <div className={'wc-braintree-blocks-venmo-button__container'}>\n                <p>{__('Complete your order with', 'woo-payment-gateway')}</p>\n                {venmoInstance && <VenmoButton onClick={handleClick} src={getData('buttonIcon')}/>}\n            </div>\n        </>\n    )\n}\n\nconst VenmoButton = ({onClick, src}) => {\n    return (\n        <button className={'wc-braintree-blocks-venmo__button'} onClick={onClick}>\n            <img src={src}/>\n        </button>\n    )\n}\n\nregisterPaymentMethod({\n    name: getData('name'),\n    label: <PaymentMethodLabel\n        title={getData('title')}\n        paymentMethod={getData('name')}\n        icon={getData('icon')}/>,\n    ariaLabel: __('Venmo', 'woo-payment-gateway'),\n    placeOrderButtonLabel: getData('placeOrderButtonLabel'),\n    canMakePayment: () => new Promise((resolve, reject) => {\n        loadVenmo.then(instance => {\n            resolve(instance.isBrowserSupported());\n        }).catch(error => {\n            resolve(false);\n        });\n    }),\n    content: <PaymentMethod content={VenmoComponent}\n                            title={getData('title')}\n                            description={getData('description')}\n                            name={getData('name')}\n                            icon={getData('icon')}\n                            getData={getData}/>,\n    savedTokenComponent: <SavedTokenProvider getData={getData}\n                                             name={getData('name')}\n                                             vaultedThreeDSecure={getData('vaultedThreeDSecure')}/>,\n    edit: <PaymentMethod content={VenmoComponent} getData={getData}/>,\n    supports: {\n        showSavedCards: getData('features').includes('tokenization'),\n        showSaveOption: false,\n        features: getData('features')\n    }\n});","/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\tvar nativeCodeString = '[native code]';\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var setPrototypeOf = require(\"./setPrototypeOf.js\");\n\nvar isNativeReflectConstruct = require(\"./isNativeReflectConstruct.js\");\n\nfunction _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    module.exports = _construct = Reflect.construct.bind(), module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  } else {\n    module.exports = _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nmodule.exports = _construct, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _extends() {\n  module.exports = _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var setPrototypeOf = require(\"./setPrototypeOf.js\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n\nmodule.exports = _isNativeFunction, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nmodule.exports = _isNativeReflectConstruct, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose.js\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\n\nvar assertThisInitialized = require(\"./assertThisInitialized.js\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithHoles = require(\"./arrayWithHoles.js\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableRest = require(\"./nonIterableRest.js\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\n\nvar iterableToArray = require(\"./iterableToArray.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\n\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var getPrototypeOf = require(\"./getPrototypeOf.js\");\n\nvar setPrototypeOf = require(\"./setPrototypeOf.js\");\n\nvar isNativeFunction = require(\"./isNativeFunction.js\");\n\nvar construct = require(\"./construct.js\");\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  module.exports = _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _wrapNativeSuper(Class);\n}\n\nmodule.exports = _wrapNativeSuper, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;"],"names":["ErrorBoundary","props","state","hasError","error","errorInfo","this","setState","className","toString","componentStack","children","Component","Notice","notice","onRemove","classes","classNames","type","key","isDismissible","message","PaymentMethodLabel","title","components","paymentMethod","icon","Label","Icons","PaymentMethodIcons","Array","isArray","text","icons","align","PaymentMethod","content","description","el","useRef","useState","container","setContainer","Content","useEffect","current","ref","PaymentMethodDataProvider","PaymentMethodProviderContainer","name","billing","shippingData","eventRegistration","emitResponse","activePaymentMethod","isExpress","advancedFraudOptions","onPaymentProcessing","onCheckoutAfterProcessingWithError","responseTypes","noticeContexts","useProcessPayment","useProcessPaymentFailure","event","messageContext","EXPRESS_PAYMENTS","SavedTokenComponent","vaultedThreeDSecure","token","currentData","doPaymentDataFilter","usePaymentMethodDataContext","useDeviceData","useThreeDSecure","vaulted","fetchTokenNonce","useCallback","token_id","apiFetch","path","method","data","version","result","unsubscribe","success","BraintreeError","meta","paymentMethodData","ensureSuccessResponse","ensureErrorResponse","useCreatePaymentRequest","applePayInstance","getData","useMemo","cartTotal","currency","cartTotalItems","billingData","needsShipping","shippingRates","request","total","label","amount","removeNumberPrecision","value","minorUnit","lineItems","formatLineItems","currencyCode","code","countryCode","requiredBillingContactFields","requiredShippingContactFields","fields","email","phone","shippingMethods","formatShippingMethods","createPaymentRequest","isOlderVersion","getSetting","useCreateSession","paymentRequest","onClick","onClose","addShippingHandler","usePaymentEventsHandler","setPaymentMethodNonce","onPaymentDataFilter","addNotice","applePayData","getApplePayVersion","range","ApplePaySession","supportsVersion","onSessionCancel","onValidateMerchant","session","performValidation","validationURL","displayName","then","merchantSession","completeMerchantValidation","catch","abort","onPaymentMethodSelected","address","billingContact","country","administrativeArea","postcode","postalCode","city","locality","url","response","messages","completePaymentMethodSelection","xhr","onShippingContactSelected","shippingContact","shippingAddress","setShippingAddress","newAddress","toUpperCase","updateData","selectedRates","newTotal","newLineItems","newShippingMethods","errors","identifier","__","detail","ApplePayError","completeShippingContactSelection","isEqual","onShippingMethodSelected","shippingMethod","setSelectedRates","isRateEqual","getSelectedShippingOptionId","extractSelectedShippingOption","completeShippingMethodSelection","onPaymentAuthorized","length","completePayment","status","STATUS_FAILURE","tokenize","payment","first_name","givenName","last_name","familyName","extractAddressLines","addressLines","phoneNumber","emailAddress","nonce","STATUS_SUCCESS","isEmpty","billingAddress","DEFAULT_BILLING_ADDRESS","DEFAULT_SHIPPING_ADDRESS","createSession","onvalidatemerchant","onpaymentmethodselected","onpaymentauthorized","oncancel","onshippingcontactselected","onshippingmethodselected","handleClick","e","preventDefault","begin","alert","getSettings","loadApplePay","Promise","resolve","reject","createApplePay","authorization","getClientToken","instance","ApplePayContainer","setApplePayInstance","ApplePayButton","style","rounded","styles","getButtonStyle","registerExpressPaymentMethod","canMakePayment","window","canMakePayments","edit","supports","features","items","keys","forEach","item","includes","push","options","shippingPackage","idx","rates","shipping_rates","map","rate","txt","document","createElement","innerHTML","getShippingOptionId","rate_id","price","currency_minor_unit","dispatch","callback","priority","action","ACTIONS","ADD_ACTION","id","uniqueId","REMOVE_ACTION","emittFilter","args","handlers","events","sortedEvents","from","values","sort","a","b","console","log","Map","set","delete","PaymentMethodDataContext","createContext","onSubmit","setExpressPaymentError","client","setClient","paymentMethodNonce","useReducer","actionReducer","eventHandlers","useActionEmitter","currentEventHandlers","paymentHandler","useNoticeHandler","removeNotice","setPaymentHandler","handler","loadClient","paymentMethodDataContext","fraud","enabled","threeDSecureEnabled","Provider","useContext","CustomForm","config","getCustomFormConfig","breakpoint","fieldKeys","hostedFieldInstance","setHostedFieldsInstance","setFields","containerElement","setContainerElement","cardBrand","setCardBrand","fieldOrder","assertFieldsValid","reduce","acc","prop","hasOwnProperty","setFieldContainer","field","addClassToFields","classList","add","address_1","streetAddress","payload","details","invalidFieldKeys","useBreakpointWidth","clientInstance","create","on","cards","emittedBy","isValid","indexOf","nextField","focus","cloneElement","setFieldOrder","CardIcon","src","getIconSrc","InvalidCustomForm","sprintf","classnames","forms","assertValidConfig","assertValidFormId","Error","assertConfigHasProperties","missingParams","TypeError","join","BootstrapForm","CardNumber","CardExpirationDate","CardCVV","registerCustomForm","SimpleForm","DropinForm","setDropinInstance","clientToken","locale","setError","createDropin","dropinInstance","onChange","CreditCardComponent","dropinEnabled","DropinContainer","HostedFieldsContainer","handlePaymentProcessing","requestPaymentMethod","err","registerPaymentMethod","ariaLabel","savedTokenComponent","SavedTokenProvider","showSavedCards","showSaveOption","canShowSavedCard","unit","formatPrice","currency_code","defaultSelectedOptionId","selected","paymentsClient","setPaymentsClient","environment","merchantInfo","merchantName","merchantId","paymentDataCallbacks","transactionState","onPaymentDataChanged","shippingOptionData","shippingOptionId","getShippingOptions","shipping","payment_method","shipping_method","braintree_googlepay","requestUpdate","finally","google","payments","api","PaymentsClient","useHandleTokenization","googlePayInstance","payloadData","paymentDataRequestArgs","transactionInfo","totalPriceStatus","totalPrice","totalPriceLabel","displayItems","getDisplayItems","emailRequired","callbackIntents","shippingAddressRequired","shippingAddressParameters","shippingOptionRequired","shippingOptions","shippingOptionParameters","paymentDataRequest","createPaymentDataRequest","allowedPaymentMethods","parameters","assuranceDetailsRequired","billingAddressRequired","billingAddressParameters","format","phoneNumberRequired","loadPaymentData","info","extractFullName","address1","address_2","address2","parseResponse","statusCode","canPay","GooglePayContainer","setGooglePayInstance","useExpressBreakpointWidth","useCreatePaymentsClient","removeButton","lastChild","removeChild","createGooglePay","googlePayVersion","googleMerchantId","button","createButton","querySelector","remove","append","isReadyToPay","apiVersion","apiVersionMinor","innerWidth","windowWidth","setWindowWidth","minWidth","getFromCache","storeInCache","clientWidth","onWindowResize","addEventListener","removeEventListener","element","setElement","parentNode","dataCollector","setDataCollector","kount","deviceData","setNotice","getErrorMessage","onShippingRateSuccess","onShippingRateFail","onShippingRateSelectSuccess","handleShippingChange","get","isSelectingRate","shippingRatesLoading","filter","Boolean","pop","handleShippingRateFail","addPaymentEventHandler","execute","addShippingMethodHandler","addShippingAddressHandler","unsubscribeShippingRateSuccess","unsubscribeShippingRateSelectSuccess","unsubscribeShippingRateFail","processingResponse","paymentDetails","braintreeErrorMessage","ERROR","settings","setInstance","verifyCard","bin","challengeRequested","surname","slice","extendedAddress","region","countryCodeAlpha2","additionalInformation","shippingGivenName","shippingSurname","onLookupComplete","next","threeDSecureInfo","teardown","useLoadPayPal","paypalCheckoutInstance","intent","flow","partnerCode","paypal","setPayPal","JSON","parse","atob","clientId","commit","vault","dataAttributes","loadPayPalSDK","usePayPalOptions","paymentData","incompleteBilling","baseStyle","FUNDING","PAYPAL","PAYLATER","getFormattedShippingOptions","onShippingChange","actions","selectedShippingOption","shippingDataEqual","patch","getCartTotalItem","order","sources","fundingSource","option","onError","onApprove","tokenizePayment","line1","line2","recipientName","firstName","lastName","cartContainsSubscription","createOrder","createPayment","enableShippingAddress","shippingAddressEditable","onCancel","createBillingAgreement","shipping_address","selected_shipping_option","postal_code","country_code","isShippingOptionEqual","Buttons","isEligible","PayPalContainer","setPayPalCheckoutInstance","isPayPalButton","setIsPayPalButton","paypalButton","createPayPalCheckout","merchantAccountId","getMerchantAccount","driver","React","ReactDOM","PayPalButton","BUTTON","OrderItemMessaging","cart","cartTotals","extensions","context","total_price","paypalCheckout","setPayPalCheckout","currencies","isAvailable","Messages","placement","layout","logo","position","color","render","TotalsWrapper","registerPlugin","ExperimentalOrderMeta","scope","wcBraintreeData","errorMessages","SHIPPING_OPTION_REGEX","merchantAccounts","createClient","SUCCESS","msg","getCacheKey","exp","Math","floor","Date","getTime","sessionStorage","setItem","stringify","defaultValue","getItem","deleteFromCache","removeItem","getCurrency","prefix","suffix","decimalSeparator","thousandSeparator","undefined","parseInt","fractional","index","replace","substr","match","RegExp","packageId","rateId","packageIdx","Object","split","lines","hasSubscription","ver1","ver2","compare","venmoInstance","loadVenmo","createVenmo","allowNewBrowserTab","VenmoComponent","setVenmoInstance","VenmoButton","placeOrderButtonLabel","isBrowserSupported","hasOwn","i","arguments","arg","argType","inner","apply","prototype","call","module","exports","default","arr","len","arr2","__esModule","arrayLikeToArray","self","ReferenceError","asyncGeneratorStep","gen","_next","_throw","done","fn","Constructor","setPrototypeOf","isNativeReflectConstruct","_construct","Parent","Class","Reflect","construct","bind","Function","_defineProperties","target","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","obj","_extends","assign","source","_getPrototypeOf","o","getPrototypeOf","__proto__","subClass","superClass","constructor","sham","Proxy","valueOf","iter","Symbol","iterator","_i","_s","_e","_arr","_n","_d","objectWithoutPropertiesLoose","excluded","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","sourceKeys","_typeof","assertThisInitialized","_setPrototypeOf","p","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","arrayWithoutHoles","iterableToArray","nonIterableSpread","minLen","n","test","isNativeFunction","_wrapNativeSuper","_cache","has","Wrapper"],"sourceRoot":""}