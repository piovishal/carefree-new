/*! For license information please see commons.js.LICENSE.txt */
(self.webpackChunkwcBraintree=self.webpackChunkwcBraintree||[]).push([[351],{2266:function(e,t,n){var r=n(9307),a=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(6690)),i=a(n(9728)),c=a(n(1655)),u=a(n(4993)),l=a(n(3808));var s=function(e){(0,c.default)(s,e);var t,n,a=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,l.default)(t);if(n){var a=(0,l.default)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,u.default)(this,e)});function s(e){var t;return(0,o.default)(this,s),(t=a.call(this,e)).state={hasError:!1,error:null,errorInfo:null},t}return(0,i.default)(s,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0,error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.hasError?r.createElement(r.Fragment,null,this.state.error&&r.createElement("div",{className:"wc-braintree-blocks__error"},this.state.error.toString()),this.state.errorInfo&&r.createElement("div",{className:"wc-braintree-blocks__error"},this.state.errorInfo.componentStack)):this.props.children}}]),s}(n(9307).Component);t.default=s},6723:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(9215);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var a=n(9448);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var o=n(7739);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=n(9548);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}))},9215:function(e,t,n){var r=n(9307),a=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Notice=void 0;var o=a(n(434)),i=a(n(4184)),c=n(5609),u=function(e){var t=e.notice,n=e.onRemove,a=(0,i.default)("wc-braintree-blocks__notice ".concat(t.type));return r.createElement(c.Notice,(0,o.default)({key:"notice-".concat(t.type),className:a,onRemove:function(){t.isDismissible&&n()}},t),t.message)};t.Notice=u;var l=u;t.default=l},7739:function(e,t,n){var r=n(9307);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PaymentMethodLabel=void 0;var a=function(e){var t=e.title,n=(e.paymentMethod,e.components),a=e.icon,o=void 0===a?[]:a,i=n.PaymentMethodLabel,c=n.PaymentMethodIcons;return Array.isArray(o)||(o=[o]),r.createElement("span",{className:"wc-braintree-blocks-paymentMethod__label"},r.createElement(i,{text:t}),r.createElement(c,{icons:o,align:"left"}))};t.PaymentMethodLabel=a;var o=a;t.default=o},9448:function(e,t,n){var r=n(9307),a=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PaymentMethod=void 0;var o=a(n(434)),i=a(n(7424)),c=a(n(215)),u=n(9307),l=n(89),s=n(3636),d=["content","description","icons"],p=function(e){var t=e.content,n=e.description,a=void 0===n?"":n,s=(e.icons,(0,c.default)(e,d)),p=(0,u.useRef)(),m=(0,u.useState)(null),v=(0,i.default)(m,2),y=v[0],g=v[1],b=t;return(0,u.useEffect)((function(){p.current&&g(p.current)}),[]),r.createElement("div",{ref:p,className:"wc-braintree-blocks-payment-method__container"},a&&r.createElement("div",{className:"wc-braintree-blocks-payment-method__description"},a),r.createElement(l.PaymentMethodDataProvider,(0,o.default)({container:y},s),r.createElement(f,s,r.createElement(b,s))))};t.PaymentMethod=p;var f=function(e){var t=e.children,n=e.name,r=e.billing,a=e.shippingData,o=e.eventRegistration,i=e.emitResponse,c=e.activePaymentMethod,u=e.isExpress,l=void 0!==u&&u,d=e.advancedFraudOptions,p=void 0===d?{}:d,f=o.onPaymentProcessing,m=o.onCheckoutAfterProcessingWithError,v=i.responseTypes,y=i.noticeContexts;return(0,s.useProcessPayment)({onPaymentProcessing:f,responseTypes:v,name:n,billing:r,shippingData:a,activePaymentMethod:c,advancedFraudOptions:p}),(0,s.useProcessPaymentFailure)({event:m,responseTypes:v,messageContext:l?y.EXPRESS_PAYMENTS:null}),t},m=p;t.default=m},9548:function(e,t,n){var r=n(9307),a=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SavedTokenProvider=t.SavedTokenComponent=void 0;var o=a(n(1284)),i=a(n(7156)),c=a(n(8416)),u=n(9307),l=n(9154),s=n(3636),d=a(n(6989)),p=n(89);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,c.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.SavedTokenProvider=function(e){return r.createElement(p.PaymentMethodDataProvider,m({},e),r.createElement(v,m({},e)))};var v=function(e){var t=e.name,n=e.vaultedThreeDSecure,r=void 0!==n&&n,a=e.token,f=e.eventRegistration,v=e.billing,y=e.shippingData,g=e.emitResponse.responseTypes,b=f.onPaymentProcessing,h=f.onCheckoutAfterProcessingWithError,_=(0,u.useRef)({billing:v,shippingData:y}),P=(0,p.usePaymentMethodDataContext)().doPaymentDataFilter;(0,s.useDeviceData)(),(0,s.useThreeDSecure)({name:t,vaulted:r}),(0,s.useProcessPaymentFailure)({event:h,responseTypes:g}),(0,u.useEffect)((function(){_.current={name:t,billing:v,shippingData:y}}));var O=(0,u.useCallback)(function(){var e=(0,i.default)(o.default.mark((function e(t){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.default)({path:"/wc-braintree/v1/3ds/vaulted_nonce",method:"POST",data:{token_id:t,version:2}});case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[]);return(0,u.useEffect)((function(){var e=b((0,i.default)(o.default.mark((function e(){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=16;break}return e.prev=1,e.next=4,O(a);case 4:if((n=e.sent).success){e.next=7;break}throw new l.BraintreeError({message:n.message});case 7:return e.next=9,P({meta:{paymentMethodData:(0,c.default)({},"".concat(t,"_3ds_nonce_key"),"true")}},m(m({},_.current),{result:n.data}));case 9:return n=e.sent,e.abrupt("return",(0,l.ensureSuccessResponse)(g,n));case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",(0,l.ensureErrorResponse)(g,e.t0));case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))));return function(){return e()}}),[b,r,a,t,g]),null};t.SavedTokenComponent=v;var y=v;t.default=y},4142:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1990);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var a=n(703);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}))},1990:function(e,t,n){var r=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.useCreatePaymentRequest=t.default=void 0;var a=r(n(861)),o=n(9307),i=n(9154),c=n(2338),u=function(e){var t=e.applePayInstance,n=e.billing,r=e.shippingData,u=e.getData,l=(0,o.useRef)({});return(0,o.useEffect)((function(){l.current.billing=n,l.current.shippingData=r}),[n,r]),(0,o.useMemo)((function(){if(t){var e=l.current.billing,n=e.cartTotal,r=e.currency,o=e.cartTotalItems,s=e.billingData,d=l.current.shippingData,p=d.needsShipping,f=d.shippingRates,m={total:{label:u("displayName"),type:"final",amount:(0,i.removeNumberPrecision)(n.value,r.minorUnit).toString()},lineItems:(0,c.formatLineItems)(o,r.minorUnit),currencyCode:r.code,countryCode:u("countryCode"),requiredBillingContactFields:["postalAddress"],requiredShippingContactFields:(v=p?["postalAddress"]:[],s.email||(v=[].concat((0,a.default)(v),["email"])),s.phone||(v=[].concat((0,a.default)(v),["phone"])),v)};return p&&(m.shippingMethods=(0,c.formatShippingMethods)(f)),t.createPaymentRequest(m)}var v;return null}),[t])};t.useCreatePaymentRequest=u;var l=u;t.default=l},703:function(e,t,n){var r=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.useCreateSession=t.default=void 0;var a=r(n(861)),o=r(n(8416)),i=n(9307),c=n(5736),u=n(2819),l=n(89),s=n(3636),d=r(n(6989)),p=n(4617),f=n(2338),m=n(9154);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=(0,p.getSetting)("wcBraintreeData").isOlderVersion,h=function(e){var t=e.applePayInstance,n=e.billing,r=e.shippingData,o=e.paymentRequest,p=e.eventRegistration,v=e.onClick,h=e.onClose,_=e.getData,P=(0,s.usePaymentEventsHandler)({billing:n,shippingData:r,eventRegistration:p}).addShippingHandler,O=(0,l.usePaymentMethodDataContext)(),S=O.setPaymentMethodNonce,E=O.onPaymentDataFilter,D=O.notice.addNotice,w=(0,i.useRef)({}),C=(0,i.useRef)({billing:n,shippingData:r,onClick:v,onClose:h,addNotice:D,addShippingHandler:P,setPaymentMethodNonce:S,onPaymentDataFilter:E}),x=(0,i.useCallback)((function(){var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}((0,u.range)(10,2,-1));try{for(t.s();!(e=t.n()).done;){var n=e.value;if(ApplePaySession.supportsVersion(n))return n}}catch(e){t.e(e)}finally{t.f()}return 3}),[]),k=(0,i.useCallback)((function(){(0,C.current.onClose)()}),[]),M=(0,i.useCallback)((function(e){var n=C.current.session;t.performValidation({validationURL:e.validationURL,displayName:_("displayName")}).then((function(e){n.completeMerchantValidation(e)})).catch((function(e){n.abort(),D(e)}))}),[t,D]),j=(0,i.useCallback)((function(e){var t,n,r,a,o=e.paymentMethod,i=C.current,c=i.session,u=i.addNotice,l=null;o.billingContact&&(l={country:(null===(t=o.billingContact)||void 0===t?void 0:t.countryCode)||"",state:(null===(n=o.billingContact)||void 0===n?void 0:n.administrativeArea)||"",postcode:(null===(r=o.billingContact)||void 0===r?void 0:r.postalCode)||"",city:(null===(a=o.billingContact)||void 0===a?void 0:a.locality)||""}),(0,d.default)({url:_("routes").paymentMethod,method:"POST",data:{address:l}}).then((function(e){e.code?(c.abort(),u(e.messages)):c.completePaymentMethodSelection(e.data)})).catch((function(e){}))}),[]),A=(0,i.useCallback)((function(e){var t=e.shippingContact,n=C.current,r=n.shippingData,a=n.addShippingHandler,o=r.shippingAddress,i=r.setShippingAddress,l=o.country,s=o.state,d=o.city,p=o.postcode,v={country:null==t?void 0:t.countryCode.toUpperCase(),state:null==t?void 0:t.administrativeArea.toUpperCase(),city:t.locality,postcode:t.postalCode};a((function(e,t){var n=t.billing,r=t.shippingData,a=C.current.session,o=n.cartTotal,i=n.cartTotalItems,u=n.currency,l=r.shippingRates,s=(r.selectedRates,{newTotal:{label:_("displayName"),type:"final",amount:(0,m.removeNumberPrecision)(o.value,u.minorUnit).toString()},newLineItems:(0,f.formatLineItems)(i,u.minorUnit),newShippingMethods:(0,f.formatShippingMethods)(l)});C.current.errors=[],e||(s.newShippingMethods=[{identifier:"0:error:1",label:(0,c.__)("No shipping methods","woo-payment-gateway"),detail:(0,c.__)("There are no shipping options available for the selected address.","woo-payment-gateway"),amount:"0.00"}],C.current.errors=[new ApplePayError("addressUnserviceable")]),a.completeShippingContactSelection(s)}),(0,u.isEqual)({country:l,state:s,city:d,postcode:p},v)),i(y(y({},o),v))}),[]),N=(0,i.useCallback)((function(e){var t=e.shippingMethod,n=C.current,r=n.session,o=n.billing,i=n.shippingData,u=n.addNotice,l=(o.cartTotal,i.setSelectedRates),s=i.selectedRates,d=(0,m.getSelectedShippingOptionId)(s)==t.identifier;l.apply(void 0,(0,a.default)((0,m.extractSelectedShippingOption)(t.identifier))),P((function(e,t){var n=t.billing,a=n.currency,o=n.cartTotalItems,i=n.cartTotal;e?r.completeShippingMethodSelection({newTotal:{label:_("displayName"),type:"final",amount:(0,m.removeNumberPrecision)(i.value,a.minorUnit).toString()},newLineItems:(0,f.formatLineItems)(o,a.minorUnit)}):(r.abort(),u((0,c.__)("There was an error updating your cart totals.","woo-payment-gateway")))}),d)}),[]),I=(0,i.useCallback)((function(e){var n,r=C.current,a=r.session,o=r.setPaymentMethodNonce,i=r.errors,c=void 0===i?[]:i;(null==c?void 0:c.length)>0?a.completePayment({status:ApplePaySession.STATUS_FAILURE,errors:c}):t.tokenize({token:null==e||null===(n=e.payment)||void 0===n?void 0:n.token}).then((function(t){var n=e.payment,r=n.shippingContact,i=void 0===r?null:r,c=n.billingContact,u=void 0===c?null:c;w.current.billingData={},i&&(C.current.shippingData.needsShipping&&(w.current.shippingAddress=y({first_name:null==i?void 0:i.givenName,last_name:null==i?void 0:i.familyName,city:null==i?void 0:i.locality,state:null==i?void 0:i.administrativeArea,postcode:null==i?void 0:i.postalCode,country:null==i?void 0:i.countryCode},(0,m.extractAddressLines)((null==i?void 0:i.addressLines)||[]))),null!=i&&i.phoneNumber&&(w.current.billingData.phone=null==i?void 0:i.phoneNumber),null!=i&&i.emailAddress&&(w.current.billingData.email=null==i?void 0:i.emailAddress)),u&&(w.current.billingData=y(y({first_name:null==u?void 0:u.givenName,last_name:null==u?void 0:u.familyName,city:null==u?void 0:u.locality,state:null==u?void 0:u.administrativeArea,postcode:null==u?void 0:u.postalCode,country:null==u?void 0:u.countryCode},(0,m.extractAddressLines)((null==u?void 0:u.addressLines)||"")),w.current.billingData)),o(t.nonce),a.completePayment(ApplePaySession.STATUS_SUCCESS)})).catch((function(e){a.completePayment(ApplePaySession.STATUS_FAILURE)}))}),[t]);(0,i.useEffect)((function(){C.current=y(y({},C.current),{},{billing:n,shippingData:r,onClick:v,onClose:h,addNotice:D,addShippingHandler:P,setPaymentMethodNonce:S})})),(0,i.useEffect)((function(){var e=E((function(e,t){var n,r,a=t.billing,o=t.shippingData;return(0,u.isEmpty)(null===(n=w.current)||void 0===n?void 0:n.billingData)||(b?e.meta.billingData=y(y({},a.billingData),w.current.billingData):e.meta.billingAddress=y(y(y({},m.DEFAULT_BILLING_ADDRESS),a.billingData),w.current.billingData)),(0,u.isEmpty)(null===(r=w.current)||void 0===r?void 0:r.shippingAddress)||(b?e.meta.shippingData={address:y(y({},o.shippingAddress),w.current.shippingAddress)}:e.meta.shippingAddress=y(y(y({},m.DEFAULT_SHIPPING_ADDRESS),o.shippingAddress),w.current.shippingAddress)),e}));return function(){return e()}}),[E]);var R=(0,i.useCallback)((function(){var e=C.current.shippingData,t=new ApplePaySession(x(),o);return t.onvalidatemerchant=M,t.onpaymentmethodselected=j,t.onpaymentauthorized=I,t.oncancel=k,e.needsShipping&&(t.onshippingcontactselected=A,t.onshippingmethodselected=N),C.current.session=t,t}),[t,o,x,M,j,I,A,N]);return{handleClick:(0,i.useCallback)((function(e){e.preventDefault(),C.current.onClick();try{R().begin()}catch(e){alert(e)}}),[R])}};t.useCreateSession=h;var _=h;t.default=_},3846:function(e,t,n){var r,a=n(9307),o=n(4836),i=o(n(1284)),c=o(n(7156)),u=o(n(7424)),l=n(9307),s=n(4613),d=n(1634),p=n(9154),f=n(9448),m=n(89),v=n(4142),y=o(n(2266)),g=(0,p.getSettings)("braintree_applepay"),b=new Promise((function(e,t){(0,d.create)({authorization:(0,p.getClientToken)()}).then((function(t){return e(t)})).catch((function(e){return t(e)}))})),h=function(e){var t=e.getData,n=e.billing,r=e.shippingData,o=e.eventRegistration,i=e.onClick,c=e.onClose,s=(0,l.useState)(null),d=(0,u.default)(s,2),p=d[0],f=d[1],y=(0,m.usePaymentMethodDataContext)().notice.addNotice,g=(0,v.useCreatePaymentRequest)({applePayInstance:p,billing:n,shippingData:r,getData:t}),h=(0,v.useCreateSession)({applePayInstance:p,billing:n,shippingData:r,paymentRequest:g,eventRegistration:o,onClick:i,onClose:c,getData:t}).handleClick;return(0,l.useEffect)((function(){b.then((function(e){return f(e)})).catch((function(e){return y(e)}))}),[]),a.createElement("div",{className:"wc-braintree-blocks-apple-pay-button__container"},a.createElement(_,{onClick:h,type:t("buttonType"),style:t("buttonStyle"),rounded:t("roundedButton")}))},_=function(e){var t=e.onClick,n=e.type,r=e.style,o=e.rounded,i=void 0!==o&&o,c={"-apple-pay-button-type":n,"-apple-pay-button-style":function(e){switch(e){case"apple-pay-button-black":return"black";case"apple-pay-button-white":return"white";case"apple-pay-button-white-with-line":return"white-outline"}}(r)};return a.createElement("button",{className:"wc-braintree-blocks-apple-pay__button ".concat(r," ").concat(i?"apple-pay-button-rounded":""),style:c,onClick:t})};(0,s.registerExpressPaymentMethod)({name:g("name"),canMakePayment:(r=(0,c.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.ApplePaySession&&ApplePaySession.canMakePayments());case 1:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)}),content:a.createElement(f.PaymentMethod,{content:function(e){return a.createElement(y.default,null,a.createElement(h,e))},title:g("title"),description:g("description"),name:g("name"),icon:g("icon"),getData:g,isExpress:!0}),edit:a.createElement(f.PaymentMethod,{content:h,getData:g}),supports:{features:g("features")}})},2338:function(e,t,n){var r=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.formatShippingMethods=t.formatLineItems=void 0;var a=r(n(861)),o=n(9154);t.formatLineItems=function(e,t){var n=[],r=["total_tax","total_shipping"];return e.forEach((function(e){(0<e.value||e.key&&r.includes(e.key))&&n.push({label:e.label,type:"final",amount:(0,o.removeNumberPrecision)(e.value,t).toString()})})),n},t.formatShippingMethods=function(e){var t=[];return e.forEach((function(e,n){var r=e.shipping_rates.map((function(e){var t=document.createElement("textarea");return t.innerHTML=e.name,{identifier:(0,o.getShippingOptionId)(n,e.rate_id),label:t.value,detail:"",amount:(0,o.removeNumberPrecision)(e.price,e.currency_minor_unit)}}));t=[].concat((0,a.default)(t),(0,a.default)(r))})),t}},658:function(e,t,n){var r=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.useActionEmitter=t.emittFilter=void 0;var a=r(n(1284)),o=r(n(7156)),i=n(9307),c=n(2819),u=n(3160);function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.useActionEmitter=function(e){var t=(0,i.useMemo)((function(){return{onPaymentDataFilter:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r={action:u.ACTIONS.ADD_ACTION,type:"payment_data_filter",id:(0,c.uniqueId)(),callback:t,priority:n};return e(r),function(){return e({action:u.ACTIONS.REMOVE_ACTION,type:r.type,id:r.id})}}}}),[e]);return t};var d=function(){var e=(0,o.default)(a.default.mark((function e(t,n,r){var o,i,c,u,s,d,p;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=r.handlers,i=r.type,c=o[i],u=Array.from(c.values()).sort((function(e,t){return e.priority-t.priority})),e.prev=3,s=l(u),e.prev=5,s.s();case 7:if((d=s.n()).done){e.next=14;break}return p=d.value,e.next=11,Promise.resolve(p.callback(t,n));case 11:t=e.sent;case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),s.e(e.t0);case 19:return e.prev=19,s.f(),e.finish(19);case 22:e.next=28;break;case 24:throw e.prev=24,e.t1=e.catch(3),console.log(e.t1),e.t1;case 28:return e.abrupt("return",t);case 29:case"end":return e.stop()}}),e,null,[[3,24],[5,16,19,22]])})));return function(t,n,r){return e.apply(this,arguments)}}();t.emittFilter=d},3160:function(e,t,n){var r=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.actionReducer=t.ACTIONS=void 0;var a=r(n(8416));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={ADD_ACTION:"add_action",REMOVE_ACTION:"remove_action"};t.ACTIONS=c,t.actionReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.action,r=t.type,o=t.id,u=t.callback,l=t.priority,s=void 0===l?10:l,d=e[r]?e[r]:new Map;switch(n){case c.ADD_ACTION:return d.set(o,{callback:u,priority:s}),i(i({},e),{},(0,a.default)({},r,d));case c.REMOVE_ACTION:return d.delete(o),i(i({},e),{},(0,a.default)({},r,d))}return e}},89:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(8085);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var a=n(3160);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var o=n(658);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}))},8085:function(e,t,n){var r=n(9307),a=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.usePaymentMethodDataContext=t.PaymentMethodDataProvider=void 0;var o=a(n(1284)),i=a(n(7156)),c=a(n(7424)),u=n(9307),l=n(89),s=n(9154),d=n(3636),p=(0,u.createContext)();t.PaymentMethodDataProvider=function(e){var t=e.children,n=e.container,a=e.onSubmit,f=e.getData,m=e.isExpress,v=void 0===m?null:m,y=e.setExpressPaymentError,g=(0,u.useState)(),b=(0,c.default)(g,2),h=b[0],_=b[1],P=(0,u.useState)(null),O=(0,c.default)(P,2),S=O[0],E=O[1],D=(0,u.useReducer)(l.actionReducer,{}),w=(0,c.default)(D,2),C=w[0],x=w[1],k=(0,l.useActionEmitter)(x).onPaymentDataFilter,M=(0,u.useRef)(C),j=(0,u.useRef)({onSubmit:a}),A=(0,u.useRef)(null),N=(0,d.useNoticeHandler)({isExpress:v,setExpressPaymentError:y}),I=(0,c.default)(N,3),R=I[0],T=I[1],F=I[2],L=(0,u.useCallback)(function(){var e=(0,i.default)(o.default.mark((function e(t,n){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.emittFilter)(t,n,{handlers:M.current,type:"payment_data_filter"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[]),H=(0,u.useCallback)((function(e){A.current=e}),[]);(0,u.useEffect)((function(){M.current=C}),[C]),(0,u.useEffect)((function(){s.loadClient.then((function(e){return _(e)})).catch((function(e){T(e)}))}),[T]),(0,u.useEffect)((function(){j.current={onSubmit:a}}),[a]),(0,u.useEffect)((function(){S&&j.current.onSubmit()}),[S]);var B={container:n,client:h,paymentMethodNonce:S,setPaymentMethodNonce:E,onPaymentDataFilter:k,doPaymentDataFilter:L,setPaymentHandler:H,onSubmit:a,paymentHandler:A.current,notice:{notice:R,addNotice:T,removeNotice:F},fraud:{enabled:f("advancedFraudEnabled")},threeDSecureEnabled:f("threeDSecureEnabled")};return r.createElement(p.Provider,{value:B},t)},t.usePaymentMethodDataContext=function(){return(0,u.useContext)(p)}},1926:function(e,t,n){var r=n(9307),a=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CustomForm=void 0;var o=a(n(8416)),i=a(n(7424)),c=n(9307),u=n(5736),l=n(2934),s=a(n(4184)),d=n(4427),p=n(3636);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(4824);var y=function(e){var t=e.options,n=e.client,a=e.id,u=e.setPaymentHandler,s=(0,d.getCustomFormConfig)(a),f=s.breakpoint,y=void 0===f?0:f,h=s.fields,_=void 0===h?[]:h,P=s.content,O=void 0===P?null:P,S=s.className,E=void 0===S?"":S,D=(0,c.useState)(!1),w=(0,i.default)(D,2),C=w[0],x=w[1],k=(0,c.useState)({}),M=(0,i.default)(k,2),j=M[0],A=M[1],N=(0,c.useState)(),I=(0,i.default)(N,2),R=I[0],T=I[1],F=(0,c.useState)(null),L=(0,i.default)(F,2),H=L[0],B=L[1],U=(0,c.useRef)([]),q=(0,c.useCallback)((function(e){return 0==_.reduce((function(t,n){return e.hasOwnProperty(n)||t.push(n),t}),[]).length}),[]),z=(0,c.useCallback)((function(e){return function(n){var r;if((null==j||null===(r=j[e])||void 0===r||!r.container)&&null!==n){var a=m({container:n},t.fields[e]);A(m(m({},j),{},(0,o.default)({},e,a)))}}}),[j,A]),V=(0,c.useCallback)((function(e,t){e.forEach((function(e){var n;null==j||null===(n=j[e])||void 0===n||n.container.classList.add(t)}))}),[j]),G=(0,c.useCallback)((function(e){e.shippingData;var t=e.billing;return new Promise((function(e,n){var r,a,o={billingAddress:{}};null!=t&&null!==(r=t.billingData)&&void 0!==r&&r.address_1&&(o.billingAddress.streetAddress=t.billingData.address_1),null!=t&&null!==(a=t.billingData)&&void 0!==a&&a.postcode&&(o.billingAddress.postalCode=t.billingData.postcode),C.tokenize(o,(function(t,r){var a;t?("HOSTED_FIELDS_FIELDS_INVALID"===t.code?V((null==t||null===(a=t.details)||void 0===a?void 0:a.invalidFieldKeys)||[],"braintree-hosted-fields-invalid"):"HOSTED_FIELDS_FIELDS_EMPTY"===t.code&&V(_,"braintree-hosted-fields-invalid"),n(t)):e(r)}))}))}),[C]);return(0,c.useEffect)((function(){u(G)}),[G]),(0,p.useBreakpointWidth)({key:a,el:R,className:E,breakpoint:y}),(0,c.useEffect)((function(){q(j)&&n.then((function(e){(0,l.create)({client:e,fields:j,styles:t.styles}).then((function(e){return x(e)})).catch((function(e){}))}))}),[j]),(0,c.useEffect)((function(){C&&(C.on("cardTypeChange",(function(e){var t;1==(null==e||null===(t=e.cards)||void 0===t?void 0:t.length)?B(e.cards[0].type):B(null)})),C.on("validityChange",(function(e){if(e.fields[e.emittedBy].isValid){var t,n=U.current.indexOf(e.emittedBy);if(null!==(t=U.current)&&void 0!==t&&t[n+1]){var r=U.current[n+1];C.focus(r)}}})))}),[C]),O?r.createElement("div",{ref:T,className:"wc-braintree-blocks-custom__form"},(0,c.cloneElement)(O,{setFieldContainer:z,setFieldOrder:function(e){U.current.includes(e)||U.current.push(e)},CardIcon:r.createElement(b,{type:H,src:function(e){var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}(t.icons);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.type===e)return a.src}}catch(e){r.e(e)}finally{r.f()}return null}(H)})})):r.createElement(g,{id:a})};t.CustomForm=y;var g=function(e){var t=e.id;return r.createElement("div",{className:"wc-braintree-blocks-notice__info"},(0,u.sprintf)((0,u.__)("%s is not a supported custom form.","woo-payment-gateway"),t))},b=function(e){var t=e.type,n=e.src;if(!t)return null;var a=(0,s.default)("wc-braintree-blocks-current-card__icon",t);return r.createElement("img",{className:a,src:n})},h=y;t.default=h},4427:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.registerCustomForm=t.getCustomFormConfig=void 0;var n={};t.registerCustomForm=function(e){a(e),n[e.id]=e},t.getCustomFormConfig=function(e){return r(e)?n[e]:{}};var r=function(e){return n.hasOwnProperty(e)},a=function(e){if(!e.id)throw new Error("Custom forms must have a unique ID.");o(e,["content","breakpoint"])},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.reduce((function(t,n){return e.hasOwnProperty(n)||t.push(n),t}),[]);if(n.length>0)throw new TypeError("Custom form config missing params ".concat(n.join(", ")))}},9587:function(e,t,n){var r=n(9307),a=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BootstrapForm=void 0;var o=a(n(434)),i=n(5736),c=n(638);n(7884);var u=function(e){return r.createElement("div",{className:"wc-braintree-blocks-bootstrap__form"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-6"},r.createElement("div",{className:"form-group cardnumber-form-group"},r.createElement("label",null,(0,i.__)("Card Number","woo-payment-gateway")),r.createElement(c.CardNumber,(0,o.default)({className:"bootstrap-input"},e)))),r.createElement("div",{className:"col-md-3"},r.createElement("div",{className:"form-group"},r.createElement("label",null,(0,i.__)("Exp Date","woo-payment-gateway")),r.createElement(c.CardExpirationDate,(0,o.default)({className:"bootstrap-input"},e)))),r.createElement("div",{className:"col-md-3"},r.createElement("div",{className:"form-group"},r.createElement("label",null,(0,i.__)("CVV","woo-payment-gateway")),r.createElement(c.CardCVV,(0,o.default)({className:"bootstrap-input"},e))))))};t.BootstrapForm=u;var l=u;t.default=l},4824:function(e,t,n){var r=n(9307),a=n(4836),o=n(4427),i=a(n(9587)),c=a(n(721));(0,o.registerCustomForm)({id:"bootstrap_form",content:r.createElement(i.default,null),breakpoint:425,fields:["number","expirationDate","cvv"],className:"bootstrap-md"}),(0,o.registerCustomForm)({id:"simple_form",content:r.createElement(c.default,null),breakpoint:425,fields:["number","expirationDate","cvv"],className:"simple-form-md"})},721:function(e,t,n){var r=n(9307),a=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SimpleForm=void 0;var o=a(n(434)),i=n(5736),c=n(638);n(2210);var u=function(e){return r.createElement("div",{className:"wc-braintree-blocks-simple__form"},r.createElement("div",{className:"form-group"},r.createElement("label",null,(0,i.__)("Card Number","woo-payment-gateway")),r.createElement(c.CardNumber,(0,o.default)({className:"hosted-field braintree-card-number"},e))),r.createElement("div",{className:"form-group"},r.createElement("label",null,(0,i.__)("Exp Date","woo-payment-gateway")),r.createElement(c.CardExpirationDate,(0,o.default)({className:"hosted-field"},e))),r.createElement("div",{className:"form-group"},r.createElement("label",null,(0,i.__)("CVV","woo-payment-gateway")),r.createElement(c.CardCVV,(0,o.default)({className:"hosted-field"},e))))};t.SimpleForm=u;var l=u;t.default=l},5982:function(e,t,n){var r=n(9307),a=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DropinForm=void 0;var o=a(n(7424)),i=n(7313),c=n(9307),u=function(e){var t=e.options,n=e.setDropinInstance,a=t.clientToken,u=t.locale,l=void 0===u?"en_US":u,s=(0,c.useState)(null),d=(0,o.default)(s,2),p=d[0],f=d[1],m=(0,c.useRef)(null);return(0,c.useEffect)((function(){(0,i.create)({authorization:a,container:".wc-braintree-blocks-dropin__form",locale:l},(function(e,t){e?f(null==e?void 0:e.message):n(t)}))}),[]),r.createElement(r.Fragment,null,p&&r.createElement("div",{className:"wc-braintree-blocks__error"},p),r.createElement("div",{ref:m,className:"wc-braintree-blocks-dropin__form"}))};t.DropinForm=u;var l=u;t.default=l},8660:function(e,t,n){var r=n(9307),a=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CardCVV=void 0;var o=a(n(4184)),i=function(e){var t=e.setFieldContainer,n=e.setFieldOrder,a=e.className;n("cvv");var i=(0,o.default)("braintree-web-hosted-field",a);return r.createElement("div",{ref:t("cvv"),id:"braintree-cvv",className:i})};t.CardCVV=i;var c=i;t.default=c},3908:function(e,t,n){var r=n(9307),a=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CardExpirationDate=void 0;var o=a(n(4184)),i=function(e){var t=e.setFieldContainer,n=e.setFieldOrder,a=e.className;n("expirationDate");var i=(0,o.default)("braintree-web-hosted-field",a);return r.createElement("div",{ref:t("expirationDate"),id:"braintree-exp-date",className:i})};t.CardExpirationDate=i;var c=i;t.default=c},436:function(e,t,n){var r=n(9307),a=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CardNumber=void 0,n(9307);var o=a(n(4184)),i=function(e){e.onChange;var t=e.setFieldContainer,n=e.setFieldOrder,a=e.className,i=e.CardIcon;n("number");var c=(0,o.default)("braintree-web-hosted-field",a);return r.createElement("div",{ref:t("number"),id:"braintree-number",className:c},i)};t.CardNumber=i;var c=i;t.default=c},638:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(436);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var a=n(3908);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var o=n(8660);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}))},627:function(e,t,n){var r=n(9307),a=n(4836),o=a(n(7424)),i=a(n(434)),c=n(9307),u=n(4613),l=a(n(4184)),s=n(5736),d=n(9154),p=n(6723),f=a(n(5982)),m=a(n(1926)),v=n(89),y=(0,d.getSettings)("braintree_cc"),g=function(e){var t=(0,v.usePaymentMethodDataContext)(),n=t.setPaymentHandler,a=t.notice,o=y("dropinEnabled"),i=o?h:b,c=(0,l.default)("wc-braintree-card-container",{dropin:o,customForm:!o});return r.createElement(r.Fragment,null,(null==a?void 0:a.notice)&&r.createElement(p.Notice,{notice:a.notice,onRemove:a.removeNotice}),r.createElement("div",{className:c},r.createElement(i,{setPaymentHandler:n})))},b=function(e){var t={fields:y("hostedFieldsOptions"),styles:y("hostedFieldsStyles"),icons:y("icons")};return r.createElement(m.default,(0,i.default)({options:t,client:d.loadClient,id:y("customForm")},e))},h=function(e){var t=e.setPaymentHandler,n=(0,c.useState)(null),a=(0,o.default)(n,2),i=a[0],u=a[1],l=(0,c.useCallback)((function(){return new Promise((function(e,t){i.requestPaymentMethod((function(n,r){n?t(n):e(r)}))}))}),[i]);(0,c.useEffect)((function(){t(l)}),[l]);var s={clientToken:(0,d.getClientToken)(),locale:"en_US"};return r.createElement(f.default,{options:s,setDropinInstance:u})};(0,u.registerPaymentMethod)({name:y("name"),label:r.createElement(p.PaymentMethodLabel,{title:y("title"),paymentMethod:y("name"),icon:y("icon")}),ariaLabel:(0,s.__)("Credit Cards","woo-payment-gateway"),canMakePayment:function(){return!0},content:r.createElement(p.PaymentMethod,{content:g,title:y("title"),description:y("description"),name:y("name"),icon:y("icon"),getData:y}),savedTokenComponent:r.createElement(p.SavedTokenProvider,{getData:y,name:y("name"),vaultedThreeDSecure:y("vaultedThreeDSecure")}),edit:r.createElement(p.PaymentMethod,{content:g,getData:y}),supports:{showSavedCards:y("features").includes("tokenization"),showSaveOption:(0,d.canShowSavedCard)(),features:y("features")}})},6066:function(e,t,n){var r=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.getShippingOptions=t.getSelectedShippingOptionId=t.getDisplayItems=void 0;var a=r(n(861)),o=n(9154);t.getDisplayItems=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=[],r=["total_tax","total_shipping"];return e.forEach((function(e){(0<e.value||e.key&&r.includes(e.key))&&n.push({label:e.label,type:"LINE_ITEM",price:(0,o.removeNumberPrecision)(e.value,t).toString()})})),n},t.getShippingOptions=function(e){var t=[];return e.forEach((function(e,n){var r=e.shipping_rates.map((function(e){var t=document.createElement("textarea");t.innerHTML=e.name;var r=(0,o.formatPrice)(e.price,e.currency_code);return{id:(0,o.getShippingOptionId)(n,e.rate_id),label:t.value,description:"".concat(r)}}));t=[].concat((0,a.default)(t),(0,a.default)(r))})),t},t.getSelectedShippingOptionId=function(e){var t="";return e.forEach((function(e,n){e.shipping_rates.forEach((function(e){e.selected&&(t=(0,o.getShippingOptionId)(n,e.rate_id))}))})),t}},5516:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(326);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var a=n(6874);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}))},326:function(e,t,n){var r=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.useCreatePaymentsClient=void 0;var a=r(n(861)),o=r(n(8416)),i=r(n(7424)),c=n(9307),u=(n(5736),r(n(6989))),l=r(n(1417)),s=n(2819),d=n(3636),p=n(9154),f=n(6066);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.useCreatePaymentsClient=function(e){var t=e.getData,n=e.shippingData,r=e.billing,o=e.eventRegistration,m=n.needsShipping,y=(0,c.useState)(null),g=(0,i.default)(y,2),b=g[0],h=g[1],_=(0,d.usePaymentEventsHandler)({billing:r,shippingData:n,eventRegistration:o}).addShippingHandler,P=(0,c.useRef)({billing:r,shippingData:n});return(0,c.useEffect)((function(){P.current={billing:r,shippingData:n}}),[r,n]),(0,c.useEffect)((function(){var e={environment:t("googleEnvironment"),merchantInfo:{merchantName:t("merchantName"),merchantId:t("googleMerchantId")},paymentDataCallbacks:{onPaymentAuthorized:function(){return Promise.resolve({transactionState:"SUCCESS"})}}};m&&(e.paymentDataCallbacks.onPaymentDataChanged=function(e){return new Promise((function(n,r){var o=e.shippingAddress,i=e.shippingOptionData,c=P.current.shippingData,l=c.shippingRates,d=((0,f.getShippingOptions)(l),null==i?void 0:i.id),m={city:(null==o?void 0:o.locality)||"",state:(null==o?void 0:o.administrativeArea)||"",postcode:(null==o?void 0:o.postalCode)||"",country:(null==o?void 0:o.countryCode)||""};(0,s.isEqual)({city:c.shippingAddress.city,state:c.shippingAddress.state,postcode:c.shippingAddress.postcode,country:c.shippingAddress.country},m),(0,u.default)({method:"POST",url:t("routes").shipping,data:{payment_method:"braintree_googlepay",address:m,shipping_method:d}}).then((function(e){e.code?(d=null,n(e.data.braintree_googlepay)):n(e.data.braintree_googlepay.requestUpdate)})).catch((function(e){n(e.data.braintree_googlepay)})).finally((function(){c.setShippingAddress(v(v({},c.shippingAddress),m)),d&&"shipping_option_unselected"!==d&&c.setSelectedRates.apply(c,(0,a.default)((0,p.extractSelectedShippingOption)(d)))}))}))}),h(new l.default.payments.api.PaymentsClient(e))}),[m,_]),b}},6874:function(e,t,n){var r=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.useHandleTokenization=t.default=void 0;var a=r(n(1284)),o=r(n(7424)),i=r(n(7156)),c=r(n(861)),u=r(n(8416)),l=n(9307),s=n(4617),d=n(6066),p=n(9154),f=n(89);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,u.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=(0,s.getSetting)("wcBraintreeData").isOlderVersion,g=function(e){var t=e.getData,n=e.onClick,r=e.onClose,u=e.googlePayInstance,s=e.paymentsClient,m=e.billing,g=e.shippingData,b=(0,l.useRef)({billing:m,shippingData:g}),h=(0,l.useRef)({}),_=(0,f.usePaymentMethodDataContext)(),P=_.setPaymentMethodNonce,O=_.onPaymentDataFilter;(0,l.useEffect)((function(){b.current={billing:m,shippingData:g,onClick:n,onClose:r}}),[n,r,g,m]),(0,l.useEffect)((function(){var e=O((function(e,t){var n,r,a=t.billing,o=t.shippingData;if(null!==(n=h.current)&&void 0!==n&&n.billingData){var i="billingAddress";y?(i="billingData",e.meta.billingData=v(v({},a.billingData),h.current.billingData)):e.meta.billingAddress=v(v({},p.DEFAULT_BILLING_ADDRESS),h.current.billingData),h.current.email&&(e.meta[i].email=h.current.email)}return null!==(r=h.current)&&void 0!==r&&r.shippingAddress&&(y?e.meta.shippingData={address:v(v({},o.shippingAddress),h.current.shippingAddress)}:e.meta.shippingAddress=v(v(v({},p.DEFAULT_SHIPPING_ADDRESS),o.shippingAddress),h.current.shippingAddress)),e}));return function(){return e()}}),[O]);var S=(0,l.useCallback)((function(){var e=b.current,n=e.billing,r=e.shippingData,l=n.billingData,f=n.currency,m=n.cartTotal,v=n.cartTotalItems,y=r.needsShipping,g=r.shippingRates;b.current.onClick();var _={merchantInfo:{merchantName:t("googleMerchantName"),merchantId:t("googleMerchantId")},transactionInfo:{countryCode:t("countryCode"),currencyCode:f.code,totalPriceStatus:"FINAL",totalPrice:(0,p.removeNumberPrecision)(m.value,f.minorUnit).toString(),totalPriceLabel:t("totalPriceLabel"),displayItems:(0,d.getDisplayItems)(v,f.minorUnit)},emailRequired:!l.email,callbackIntents:["PAYMENT_AUTHORIZATION"],shippingAddressRequired:y};if(y){_.shippingAddressParameters={},_.shippingOptionRequired=!0,_.callbackIntents=[].concat((0,c.default)(_.callbackIntents),["SHIPPING_ADDRESS","SHIPPING_OPTION"]);var O=(0,d.getShippingOptions)(g);O.length&&(_.shippingOptionParameters={shippingOptions:O,defaultSelectedOptionId:(0,d.getSelectedShippingOptionId)(g)})}var S=u.createPaymentDataRequest(_);S.allowedPaymentMethods[0].parameters.assuranceDetailsRequired=!0,S.allowedPaymentMethods[0].parameters.billingAddressRequired=!0,S.allowedPaymentMethods[0].parameters.billingAddressParameters={format:"FULL",phoneNumberRequired:!0},s.loadPaymentData(S).then(function(){var e=(0,i.default)(a.default.mark((function e(t){var n,r,i,c,l,s,d,f,m,v,y,g,b;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=t&&null!==(n=t.paymentMethodData)&&void 0!==n&&null!==(r=n.info)&&void 0!==r&&r.billingAddress&&(i=t.paymentMethodData.info.billingAddress,c=(0,p.extractFullName)(i.name),l=(0,o.default)(c,2),s=l[0],d=l[1],h.current.billingData={first_name:s,last_name:d,address_1:i.address1,address_2:i.address2,city:i.locality,state:i.administrativeArea,postcode:i.postalCode,country:i.countryCode}),t.shippingAddress&&(f=t.shippingAddress,m=(0,p.extractFullName)(f.name),v=(0,o.default)(m,2),y=v[0],g=v[1],h.current.shippingAddress={first_name:y,last_name:g,address_1:f.address1,address_2:f.address2,city:f.locality,state:f.administrativeArea,postcode:f.postalCode,country:f.countryCode}),t.email&&(h.current.email=t.email),e.next=5,u.parseResponse(t);case 5:b=e.sent,h.current.paymentMethodNonce=b.nonce,P(b.nonce);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){"CANCELED"!==(null==e?void 0:e.statusCode)?console.log(e):b.current.onClose()}))}),[s,u,P]);return S};t.useHandleTokenization=g;var b=g;t.default=b},5341:function(e,t,n){var r=n(9307),a=n(4836),o=a(n(1284)),i=a(n(7156)),c=a(n(8416)),u=a(n(7424)),l=n(9307),s=n(6388),d=n(4613),p=n(6723),f=n(9154),m=a(n(1417)),v=n(5516),y=n(89),g=n(3636);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,c.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _,P=(0,f.getSettings)("braintree_googlepay"),O=null,S=new m.default.payments.api.PaymentsClient({environment:P("googleEnvironment"),merchantInfo:{merchantName:P("googleMerchantName"),merchantId:P("googleMerchantId")}}),E=function(e){var t=e.getData,n=e.billing,a=e.shippingData,o=e.eventRegistration,i=e.onClick,c=e.onClose,d=(0,l.useRef)(null),p=(0,l.useState)(null),m=(0,u.default)(p,2),b=m[0],_=m[1];(0,g.useExpressBreakpointWidth)({breakpoint:375});var P=(0,y.usePaymentMethodDataContext)().notice,O=(0,v.useCreatePaymentsClient)({getData:t,billing:n,shippingData:a,eventRegistration:o}),S=(0,v.useHandleTokenization)({getData:t,onClick:i,onClose:c,googlePayInstance:b,paymentsClient:O,billing:n,shippingData:a}),E=(0,l.useCallback)((function(e){for(;e.lastChild;)e.removeChild(e.lastChild)}),[]);return(0,l.useEffect)((function(){(0,s.create)({authorization:(0,f.getClientToken)(),googlePayVersion:2,googleMerchantId:t("googleMerchantId")}).then((function(e){_(e)})).catch((function(e){return P.addNotice(e)}))}),[]),(0,l.useEffect)((function(){if(d.current&&O){E(d.current);var e,n,r,a,o=O.createButton(h(h({},t("buttonOptions")),{onClick:S}));"rect"===t("buttonShape")?null===(e=o.querySelector("button"))||void 0===e||null===(n=e.classList)||void 0===n||n.remove("new_style"):null===(r=o.querySelector("button"))||void 0===r||null===(a=r.classList)||void 0===a||a.add("gpay-button-round"),d.current.append(o)}}),[O,E,S]),r.createElement("div",{ref:d,className:"wc-braintree-blocks-gpay-button"})};(0,d.registerExpressPaymentMethod)({name:P("name"),canMakePayment:(_=(0,i.default)(o.default.mark((function e(){var t,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===O){e.next=2;break}return e.abrupt("return",O);case 2:return e.prev=2,e.next=5,(0,s.create)({authorization:(0,f.getClientToken)(),googlePayVersion:2,googleMerchantId:P("googleMerchantId")});case 5:return t=e.sent,e.next=8,S.isReadyToPay({apiVersion:2,apiVersionMinor:0,allowedPaymentMethods:t.createPaymentDataRequest().allowedPaymentMethods});case 8:return n=e.sent,O=!!n.result,e.abrupt("return",O);case 13:return e.prev=13,e.t0=e.catch(2),e.abrupt("return",e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])}))),function(){return _.apply(this,arguments)}),content:r.createElement(p.PaymentMethod,{content:E,title:P("title"),description:P("description"),name:P("name"),icon:P("icon"),getData:P,isExpress:!0}),edit:r.createElement(p.PaymentMethod,{content:E,getData:P}),supports:{showSavedCards:P("features").includes("tokenization"),showSaveOption:!0,features:P("features")}})},3636:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(9430);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var a=n(3201);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var o=n(180);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=n(3380);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var c=n(5688);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var u=n(4825);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var l=n(5554);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}))},5554:function(e,t,n){var r=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.useExpressBreakpointWidth=t.useBreakpointWidth=void 0;var a=r(n(7424)),o=n(9307),i=n(9154),c=n(89),u=function(e){var t=e.key,n=e.el,r=e.className,c=void 0===r?"":r,u=e.breakpoint,l=void 0===u?0:u,s=(0,o.useState)(window.innerWidth),d=(0,a.default)(s,2),p=d[0],f=d[1];t="".concat(t,":breakpoint"),(0,o.useEffect)((function(){if(n){var e=(0,i.getFromCache)(t,0);(l<e||!e)&&(e=l,(0,i.storeInCache)(t,e)),n.clientWidth<e?n.classList.add(c):n.classList.remove(c)}}),[n,p]),(0,o.useEffect)((function(){var e=function(e){return f(window.innerWidth)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}))};t.useBreakpointWidth=u,t.useExpressBreakpointWidth=function(e){var t=e.breakpoint,n=e.className,r=void 0===n?"wc-braintree-blocks-express-sm":n,i=(0,o.useState)(null),l=(0,a.default)(i,2),s=l[0],d=l[1],p=(0,c.usePaymentMethodDataContext)().container;(0,o.useEffect)((function(){var e;p&&d(null===(e=p.parentNode)||void 0===e?void 0:e.parentNode)}),[p]),u({key:"express",el:s,breakpoint:t,className:r})}},3380:function(e,t,n){var r=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.useDeviceData=t.default=void 0;var a=r(n(8416)),o=r(n(7424)),i=n(9307),c=n(6771),u=n(89);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.usePaymentMethodDataContext)(),n=t.client,r=t.notice,a=t.onPaymentDataFilter,l=t.fraud,d=l.enabled,p=r.addNotice,f=(0,i.useState)(null),m=(0,o.default)(f,2),v=m[0],y=m[1];return(0,i.useEffect)((function(){d&&n&&(0,c.create)(s({client:n,kount:!0},e),(function(e,t){e?p(e):y(t)}))}),[d,n,p]),(0,i.useEffect)((function(){var e=a((function(e,t){var n=t.name;return e.meta.paymentMethodData["".concat(n,"_device_data")]=null==v?void 0:v.deviceData,e}),10);return function(){return e()}}),[v,a]),v};t.useDeviceData=d;var p=d;t.default=p},5688:function(e,t,n){var r=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.useNoticeHandler=t.default=void 0;var a=r(n(7424)),o=n(9307),i=n(9154),c=function(e){var t=e.isExpress,n=e.setExpressPaymentError,r=(0,o.useState)(null),c=(0,a.default)(r,2),u=c[0],l=c[1],s=(0,o.useCallback)((function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t&&"error"==r?n((0,i.getErrorMessage)(e)):l({message:(0,i.getErrorMessage)(e),type:r,isDismissible:a})}),[l,t,n]);return[u,s,(0,o.useCallback)((function(){return l(null)}),[l])]};t.useNoticeHandler=c;var u=c;t.default=u},4825:function(e,t,n){var r=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.usePaymentEventsHandler=void 0;var a=r(n(1284)),o=r(n(7156)),i=n(9307);t.usePaymentEventsHandler=function(e){var t=e.billing,n=e.shippingData,r=e.eventRegistration,c=(0,i.useRef)({billing:t,shippingData:n}),u=r.onShippingRateSuccess,l=r.onShippingRateFail,s=r.onShippingRateSelectSuccess,d=(0,i.useRef)(new Map([["shippingHandler",[]],["shippingMethodHandler",[]],["shippingAddressHandler",[]]]));(0,i.useEffect)((function(){c.current={billing:t,shippingData:n}}));var p=(0,i.useCallback)((0,o.default)(a.default.mark((function e(){var t,n,r,o,i,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.current,n=t.billing,r=t.shippingData,!((o=d.current.get("shippingHandler")).length>0)||r.isSelectingRate||r.shippingRatesLoading){e.next=10;break}a=r.shippingRates,i=a.map((function(e){return(null==e?void 0:e.shipping_rates.length)>0})).filter(Boolean).length>0;case 4:if(!o.length){e.next=10;break}return u=o.pop(),e.next=8,Promise.resolve(u(i,{billing:n,shippingData:r}));case 8:e.next=4;break;case 10:case"end":return e.stop()}var a}),e)}))),[]),f=(0,i.useCallback)((function(){for(var e=c.current,t=e.billing,n=e.shippingData,r=d.current.get("shippingHandler");r.length;)r.pop()(!1,{billing:t,shippingData:n})}),[]),m=(0,i.useCallback)((function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=d.current.get(e);r.push(t),n&&p()}}),[p,d.current]),v=(0,i.useCallback)(m("shippingHandler"),[m]),y=(0,i.useCallback)(m("shippingMethodHandler"),[m]),g=(0,i.useCallback)(m("shippingAddressHandler"),[m]);return(0,i.useEffect)((function(){var e=u(p),t=s(p),n=l(f);return function(){e(),t(),n()}}),[u,s,l]),{addShippingHandler:v,addShippingMethodHandler:y,addShippingAddressHandler:g}}},180:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useProcessPaymentFailure=t.default=void 0;var r=n(9307),a=function(e){var t=e.event,n=e.responseTypes,a=e.messageContext,o=void 0===a?null:a;(0,r.useEffect)((function(){var e=t((function(e){var t,r;if(null!=e&&null!==(t=e.processingResponse)&&void 0!==t&&null!==(r=t.paymentDetails)&&void 0!==r&&r.braintreeErrorMessage){var a=e.processingResponse.paymentDetails.braintreeErrorMessage;return{type:n.ERROR,message:a,messageContext:o}}return null}));return function(){return e()}}),[t])};t.useProcessPaymentFailure=a;var o=a;t.default=o},9430:function(e,t,n){var r=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.useProcessPayment=t.default=void 0;var a=r(n(1284)),o=r(n(8416)),i=r(n(7156)),c=n(9307),u=n(9154),l=n(3201),s=n(3380),d=n(89);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(e){var t=e.onPaymentProcessing,n=e.responseTypes,r=e.name,p=e.shippingData,m=e.billing,v=e.activePaymentMethod,y=e.advancedFraudOptions,g=void 0===y?{}:y,b=(0,c.useRef)({shippingData:p,billing:m,name:r,activePaymentMethod:v}),h=(0,d.usePaymentMethodDataContext)(),_=h.paymentMethodNonce,P=h.paymentHandler,O=h.doPaymentDataFilter;(0,l.useThreeDSecure)({name:r}),(0,s.useDeviceData)(g),(0,c.useEffect)((function(){b.current={shippingData:p,billing:m,name:r,activePaymentMethod:v,paymentMethodNonce:_}})),(0,c.useEffect)((function(){var e=t((0,i.default)(a.default.mark((function e(){var t,i,c,l,s;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b.current.activePaymentMethod!=b.current.name){e.next=18;break}if(e.prev=1,i=(null===(t=b.current)||void 0===t?void 0:t.paymentMethodNonce)||"",c={meta:{paymentMethodData:(0,o.default)({},"".concat(r,"_nonce_key"),i)}},!P){e.next=9;break}return e.next=7,Promise.resolve(P(b.current));case 7:l=e.sent,null!==(s=l)&&void 0!==s&&s.nonce&&(c.meta.paymentMethodData["".concat(r,"_nonce_key")]=l.nonce);case 9:return e.next=11,O(c,f(f({},b.current),{result:l}));case 11:return l=e.sent,e.abrupt("return",(0,u.ensureSuccessResponse)(n,l));case 15:return e.prev=15,e.t0=e.catch(1),e.abrupt("return",(0,u.ensureErrorResponse)(n,e.t0));case 18:case"end":return e.stop()}}),e,null,[[1,15]])}))));return function(){return e()}}),[t,O,P])};t.useProcessPayment=m;var v=m;t.default=v},3201:function(e,t,n){var r=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.useThreeDSecure=t.default=void 0;var a=r(n(7424)),o=n(9307),i=n(5736),c=n(7753),u=n(9154),l=n(89),s=function(e){var t=e.name,n=e.vaulted,r=void 0!==n&&n,s=(0,u.getSettings)(t),d=(0,l.usePaymentMethodDataContext)(),p=d.client,f=d.notice,m=d.onPaymentDataFilter,v=d.threeDSecureEnabled,y=f.addNotice,g=(0,o.useState)(null),b=(0,a.default)(g,2),h=b[0],_=b[1];return(0,o.useEffect)((function(){if((v||r)&&p&&!h)try{(0,c.create)({version:2,client:p},(function(e,t){e?y(e):_(t)}))}catch(e){console.log(e)}}),[h,v,r,p,y]),(0,o.useEffect)((function(){if(h){var e=m((function(e,t){var n=t.result,r=t.name,a=t.shippingData,o=t.billing;return new Promise((function(t,c){var l,d,p,f,m,v,y,g=a.needsShipping,b=a.shippingAddress,P=o.billingData,O=o.cartTotal,S=o.currency;h.verifyCard({amount:(0,u.removeNumberPrecision)(O.value,S.minorUnit),nonce:n.nonce,bin:null==n||null===(l=n.details)||void 0===l?void 0:l.bin,email:P.email||"",challengeRequested:s("challengeRequested"),billingAddress:{givenName:P.first_name,surname:P.last_name,phoneNumber:P.phone,streetAddress:null===(d=P.address_1)||void 0===d?void 0:d.slice(0,50),extendedAddress:null===(p=P.address_2)||void 0===p?void 0:p.slice(0,50),locality:null===(f=P.city)||void 0===f?void 0:f.slice(0,50),region:P.state,postalCode:P.postcode,countryCodeAlpha2:P.country},additionalInformation:g?{shippingGivenName:b.first_name,shippingSurname:b.last_name,shippingAddress:{streetAddress:null===(m=b.address_1)||void 0===m?void 0:m.slice(0,50),extendedAddress:null===(v=b.address_2)||void 0===v?void 0:v.slice(0,50),locality:null===(y=b.city)||void 0===y?void 0:y.slice(0,50),region:b.state,postalCode:b.postcode,countryCodeAlpha2:b.country}}:{},onLookupComplete:function(e,t){return t()}},(function(n,a){var o;n?c(n):"challenge_required"===(null==a||null===(o=a.threeDSecureInfo)||void 0===o?void 0:o.status)?(h.teardown().then((function(){return _(null)})),c({message:(0,i.__)("3DS authorization cancelled.","woo-payment-gateway")})):(e.meta.paymentMethodData["".concat(r,"_nonce_key")]=a.nonce,t(e))}))}))}),20);return function(){return e()}}}),[h]),h};t.useThreeDSecure=s;var d=s;t.default=d},5520:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(8581);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var a=n(57);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}))},8581:function(e,t,n){var r=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.useLoadPayPal=t.default=void 0;var a=r(n(7424)),o=n(9307),i=function(e){var t=e.paypalCheckoutInstance,n=e.currency,r=e.addNotice,i=e.clientToken,c=e.intent,u=e.flow,l=e.partnerCode,s=(0,o.useState)(null),d=(0,a.default)(s,2),p=d[0],f=d[1],m=(0,o.useRef)({});return(0,o.useEffect)((function(){m.current.addNotice=r}),[r]),(0,o.useEffect)((function(){if(t)if(window.paypal)f(window.paypal);else{var e,r,a={"client-id":null===(e=i=JSON.parse(window.atob(i)))||void 0===e||null===(r=e.paypal)||void 0===r?void 0:r.clientId,commit:!0,intent:"vault"===u?"tokenize":c,currency:n,vault:"vault"===u,components:"buttons,messages",dataAttributes:{"partner-attribution-id":l}};t.loadPayPalSDK(a).then((function(){f(window.paypal)})).catch((function(e){m.current.addNotice(e)}))}}),[t]),p};t.useLoadPayPal=i;var c=i;t.default=c},57:function(e,t,n){var r=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.usePayPalOptions=t.default=void 0;var a=r(n(7424)),o=r(n(861)),i=r(n(8416)),c=n(9307),u=n(5736),l=n(2819),s=n(4617),d=n(9154),p=n(3636),f=n(6066),m=n(89);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=(0,s.getSetting)("wcBraintreeData").isOlderVersion,b=function(e){var t=e.getData,n=e.addNotice,r=e.paypal,i=e.paypalCheckoutInstance,s=e.billing,v=e.shippingData,b=e.eventRegistration,h=e.emitResponse,_=e.onClick,P=e.onClose,O=s.cartTotal,S=s.currency,E=v.needsShipping,D=h.noticeContexts,w=h.responseTypes,C=(0,c.useRef)({billing:s,shippingData:v}),x=(0,c.useRef)({}),k=(0,p.usePaymentEventsHandler)({billing:s,shippingData:v,eventRegistration:b}).addShippingHandler,M=(0,m.usePaymentMethodDataContext)(),j=M.setPaymentMethodNonce,A=M.onPaymentDataFilter,N=M.onSubmit,I=b.onCheckoutAfterProcessingWithError;(0,c.useEffect)((function(){var e=I((function(){return x.current.incompleteBilling?{type:w.ERROR,message:(0,u.__)("Please complete all required billing fields below then click Place Order.","woo-payment-gateway"),messageContext:D.EXPRESS_PAYMENTS}:null}));return function(){return e()}}),[I,w,D]);var R=(0,c.useCallback)((function(e){var n=t("buttonStyle");switch(e){case r.FUNDING.PAYPAL:return n;case r.FUNDING.PAYLATER:return y(y({},n),t("bnplButtonStyle"));default:return n}}),[r]),T=function(e){var t=[];return e.forEach((function(e,n){var r=e.shipping_rates.map((function(e){var t=document.createElement("textarea");return t.innerHTML=e.name,{id:(0,d.getShippingOptionId)(n,e.rate_id),label:t.value,type:"SHIPPING",selected:e.selected,amount:{value:(0,d.removeNumberPrecision)(e.price,2),currency_code:e.currency_code}}}));t=[].concat((0,o.default)(t),(0,o.default)(r))})),t};(0,c.useEffect)((function(){C.current={billing:s,shippingData:v,onClick:_,onClose:P,onSubmit:N,addNotice:n}}),[s,v,_]),(0,c.useEffect)((function(){var e=A((function(e,n){var r=n.billing,a=n.shippingData;return e.meta.paymentMethodData["".concat(t("name"),"_nonce_key")]=x.current.nonce,g?(e.meta.billingData=y(y({},r.billingData),x.current.billingData),e.meta.shippingData={address:y(y({},a.shippingAddress),x.current.shippingAddress)}):(e.meta.billingAddress=y(y(y({},d.DEFAULT_BILLING_ADDRESS),r.billingData),x.current.billingData),e.meta.shippingAddress=y(y(y({},d.DEFAULT_SHIPPING_ADDRESS),a.shippingAddress),x.current.shippingAddress)),e}),5);return function(){return e()}}),[A]);var F=(0,c.useCallback)((function(e,t,n,r){return function(n,a){var o=a.billing,i=a.shippingData,c=o.currency,u=o.cartTotal,l=o.cartTotalItems,s=i.shippingRates;if(n){var p=[{op:"replace",path:"/purchase_units/@reference_id=='default'/amount",value:{currency_code:c.code,value:(0,d.removeNumberPrecision)(u.value,2),breakdown:{item_total:{currency_code:c.code,value:(0,d.removeNumberPrecision)((0,d.getCartTotalItem)("total_items",l),2)+(0,d.removeNumberPrecision)((0,d.getCartTotalItem)("total_fees",l),2)},shipping:{currency_code:c.code,value:(0,d.removeNumberPrecision)((0,d.getCartTotalItem)("total_shipping",l),2)},tax_total:{currency_code:c.code,value:(0,d.removeNumberPrecision)((0,d.getCartTotalItem)("total_tax",l),2)},shipping_discount:{currency_code:c.code,value:(0,d.removeNumberPrecision)((0,d.getCartTotalItem)("total_discount",l),2)}}}},{op:t?"replace":"add",path:"/purchase_units/@reference_id=='default'/shipping/options",value:T(s)}];return e.order.patch(p).then((function(){r(),e.resolve()}))}return r(),e.reject()}}),[]),L=(0,c.useMemo)((function(){if(r&&i){var e=[],n=[r.FUNDING.PAYPAL];t("bnplEnabled")&&n.push(r.FUNDING.PAYLATER);for(var c=0,s=n;c<s.length;c++){var p=s[c],m={fundingSource:p,style:R(p),onError:function(e){return C.current.addNotice(e)},onClick:function(){C.current.onClick()},onApprove:function(e,t){return i.tokenizePayment(e).then((function(e){var t,n,r,o,i,c,s=C.current.billing.billingData,p=C.current.shippingData.needsShipping;if(x.current={nonce:e.nonce,billingData:{}},null!=e&&null!==(t=e.details)&&void 0!==t&&t.billingAddress){var f=e.details.billingAddress;x.current.billingData={address_1:f.line1,address_2:f.line2,city:f.city,state:f.state,postcode:f.postalCode,country:f.countryCode}}if(!(0,l.isEmpty)(null==e||null===(n=e.details)||void 0===n?void 0:n.shippingAddress)){var m=e.details.shippingAddress,v=(0,d.extractFullName)(m.recipientName),y=(0,a.default)(v,2),g=y[0],b=y[1];x.current.shippingAddress={first_name:g,last_name:b,address_1:m.line1||"",address_2:m.line2||"",city:m.city||"",state:m.state||"",postcode:m.postalCode||"",country:m.countryCode||""},(0,l.isEmpty)(x.current.billingData)&&(x.current.billingData=x.current.shippingAddress)}null!==(r=e.details)&&void 0!==r&&r.phone&&(x.current.billingData.phone=e.details.phone),null!==(o=e.details)&&void 0!==o&&o.email&&(x.current.billingData.email=e.details.email),null!==(i=e.details)&&void 0!==i&&i.firstName&&(x.current.billingData.first_name=e.details.firstName),null!==(c=e.details)&&void 0!==c&&c.lastName&&(x.current.billingData.last_name=e.details.lastName),x.current.billingData.address_1||s.address_1||(x.current.incompleteBilling=!0),(0,d.cartContainsSubscription)()&&p?C.current.addNotice((0,u.__)("Please select a shipping option then click Place Order to complete your payment.","woo-payment-gateway"),"info"):j(e.nonce)}))},createOrder:function(){return i.createPayment({flow:(0,d.cartContainsSubscription)()?"vault":"checkout",intent:t("intent"),currency:S.code,displayName:t("displayName"),amount:(0,d.removeNumberPrecision)(O.value,S.minorUnit),enableShippingAddress:E,shippingAddressEditable:E}).then((function(e){return e})).catch((function(e){console.log(e)}))},onCancel:function(){C.current.onClose()}};(0,d.cartContainsSubscription)()&&(m.createBillingAgreement=m.createOrder,delete m.createOrder),E&&!m.hasOwnProperty("createBillingAgreement")&&(m.onShippingChange=function(e,t){var n=e.shipping_address,r=e.selected_shipping_option,a=null==r?void 0:r.id,i=C.current.shippingData,c=i.shippingAddress,u=c.city,s=c.state,p=c.postcode,m=c.country,v=(0,f.getSelectedShippingOptionId)(C.current.shippingData.shippingRates),g={city:n.city||"",state:n.state||"",postcode:n.postal_code||"",country:n.country_code||""},b=null==a||a==v,h=(0,l.isEqual)({city:u,state:s,postcode:p,country:m},g)&&b;return a&&i.setSelectedRates.apply(i,(0,o.default)((0,d.extractSelectedShippingOption)(a))),i.setShippingAddress(y(y({},c),g)),new Promise((function(e){k(F(t,null==r?void 0:r.id,h,e),h)}))}),r.Buttons(m).isEligible()&&e.push(m)}return e}}),[r,i,E,F,k,j]);return L};t.usePayPalOptions=b;var h=b;t.default=h},2569:function(e,t,n){var r=n(9307),a=n(4836),o=a(n(434)),i=a(n(7424)),c=n(9307),u=n(4613),l=n(3554),s=n(8817),d=n(8941),p=n(9154),f=n(6723),m=n(89),v=n(5520),y=n(3636),g=(0,p.getSettings)("braintree_paypal"),b=function(e){var t=e.billing,n=e.shippingData,a=e.eventRegistration,u=e.emitResponse,l=e.onClick,s=e.onClose,b=t.currency,h=(0,m.usePaymentMethodDataContext)().notice,_=h.addNotice,P=(0,c.useState)(null),O=(0,i.default)(P,2),S=O[0],E=O[1],D=(0,c.useState)(!1),w=(0,i.default)(D,2),C=w[0],x=w[1],k=(0,c.useRef)();(0,y.useExpressBreakpointWidth)({breakpoint:375});var M=(0,v.useLoadPayPal)({paypalCheckoutInstance:S,currency:b.code,clientToken:(0,p.getClientToken)(),addNotice:_,intent:g("intent"),flow:(0,p.cartContainsSubscription)()?"vault":"checkout",partnerCode:g("partnerCode")}),j=(0,v.usePayPalOptions)({getData:g,addNotice:_,paypal:M,paypalCheckoutInstance:S,billing:t,shippingData:n,eventRegistration:a,emitResponse:u,onClick:l,onClose:s});(0,c.useEffect)((function(){(0,d.create)({authorization:(0,p.getClientToken)(),merchantAccountId:(0,p.getMerchantAccount)(b.code)}).then((function(e){E(e)})).catch((function(e){_(e)}))}),[]),(0,c.useEffect)((function(){M&&(M.Buttons.driver("react",{React:r,ReactDOM:ReactDOM}),k.current=M.Buttons.driver("react",{React:r,ReactDOM:ReactDOM}),x(!0))}),[M]);var A=k.current,N=C&&j?j.map((function(e){return r.createElement(A,(0,o.default)({key:e.fundingSource},e))})):null;return r.createElement(r.Fragment,null,(null==h?void 0:h.notice)&&r.createElement(f.Notice,{notice:h.notice,onRemove:h.removeNotice}),N)};(0,u.registerExpressPaymentMethod)({name:g("name"),canMakePayment:function(){return!0},content:r.createElement(f.PaymentMethod,{content:b,title:g("title"),description:g("description"),name:g("name"),icon:g("icon"),getData:g,isExpress:!0,advancedFraudOptions:{paypal:!0}}),edit:r.createElement(f.PaymentMethod,{content:b,getData:g}),supports:{showSavedCards:g("features").includes("tokenization"),showSaveOption:!0,features:g("features")}});var h=function(e){var t=e.cart,n=(e.extensions,e.context,t.cartTotals),a=n.currency_code,o=n.total_price,u=(0,c.useState)(),s=(0,i.default)(u,2),f=s[0],m=s[1],y=g("payLaterMsgCurrencies"),b=g("paylaterMsgEnabled")&&y.includes(a)&&!(0,p.cartContainsSubscription)(),h=(0,c.useRef)(null);if(!b)return null;(0,c.useEffect)((function(){(0,d.create)({authorization:(0,p.getClientToken)(),merchantAccountId:(0,p.getMerchantAccount)(a)}).then((function(e){return m(e)})).catch((function(){}))}),[]);var _=(0,v.useLoadPayPal)({paypalCheckoutInstance:f,currency:a,addNotice:null,clientToken:(0,p.getClientToken)(),intent:g("intent"),flow:"checkout",partnerCode:g("partnerCode")});return(0,c.useEffect)((function(){_&&_.Messages({amount:o/Math.pow(10,n.currency_minor_unit),currency:a,placement:"checkout",style:{layout:"text",logo:{type:"primary",position:"left"},text:{color:g("paylaterTxtColor")}}}).render(h.current)}),[_,o]),r.createElement(l.TotalsWrapper,null,r.createElement("div",{className:"wc-block-components-totals-item"},r.createElement("div",{ref:h,className:"paypal-msg-container"})))};(0,s.registerPlugin)("wc-braintree",{render:function(){return r.createElement(l.ExperimentalOrderMeta,null,r.createElement(h,null))},scope:"woocommerce-checkout"})},9154:function(e,t,n){var r=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.versionCompare=t.storeInCache=t.removeNumberPrecision=t.loadClient=t.getShippingOptionId=t.getSettings=t.getSelectedShippingOptionId=t.getMerchantAccount=t.getFromCache=t.getErrorMessage=t.getClientToken=t.getCartTotalItem=t.formatPrice=t.extractSelectedShippingOption=t.extractFullName=t.extractAddressLines=t.ensureSuccessResponse=t.ensureErrorResponse=t.deleteFromCache=t.cartContainsSubscription=t.canShowSavedCard=t.canMakePayment=t.DEFAULT_SHIPPING_ADDRESS=t.DEFAULT_BILLING_ADDRESS=t.BraintreeError=void 0;var a=r(n(9728)),o=r(n(6690)),i=r(n(1655)),c=r(n(4993)),u=r(n(3808)),l=r(n(3496)),s=r(n(8416)),d=n(4617),p=n(8330),f=n(4293);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=(0,d.getSetting)("wcBraintreeData"),b=(0,d.getSetting)("wcBraintreeMessages"),h=/^([\w]+)\:(.+)$/;t.getSettings=function(e){return e="".concat(e,"_data"),function(t){return t?(0,d.getSetting)(e)[t]:(0,d.getSetting)(e)}},t.getClientToken=function(){return g.clientToken},t.getMerchantAccount=function(e){var t;return null!=g&&null!==(t=g.merchantAccounts)&&void 0!==t&&t[e]?g.merchantAccounts[e]:null};var _=new Promise((function(e,t){(0,p.create)({authorization:g.clientToken},(function(n,r){n?t(n):e(r)}))}));t.loadClient=_,t.canMakePayment=function(){return new Promise((function(e,t){_.then((function(){return e(!0)})).catch((function(t){console.log("Error loading client: ",t),e({error:t})}))}))},t.ensureSuccessResponse=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return y({type:e.SUCCESS},t)},t.ensureErrorResponse=function(e,t){return{type:e.ERROR,message:P(t)}};var P=function(e){var t=null==e?void 0:e.message;return"string"==typeof e?t=e:e.code&&b[e.code]&&(t=b[e.code]),t};t.getErrorMessage=P,t.removeNumberPrecision=function(e,t){return e/Math.pow(10,t)};var O=function(e){(0,i.default)(l,e);var t,n,r=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);if(n){var a=(0,u.default)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,c.default)(this,e)});function l(e){var t;return(0,o.default)(this,l),(t=r.call(this,e.message)).error=e,t}return(0,a.default)(l)}((0,l.default)(Error));t.BraintreeError=O;var S=function(e){return"".concat("wcBraintree:").concat(e)};t.storeInCache=function(e,t){var n=Math.floor((new Date).getTime()/1e3)+900;"sessionStorage"in window&&sessionStorage.setItem(S(e),JSON.stringify({value:t,exp:n}))},t.getFromCache=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("sessionStorage"in window)try{var n=JSON.parse(sessionStorage.getItem(S(e)));if(n){var r=n.value,a=n.exp;if(!(Math.floor((new Date).getTime()/1e3)>a))return r;E(S(e))}}catch(e){}return t};var E=function(e){"sessionStorage"in window&&sessionStorage.removeItem(S(e))};t.deleteFromCache=E,t.formatPrice=function(e,t){var n,r=(0,f.getCurrency)(t),a=r.prefix,o=r.suffix,i=r.decimalSeparator,c=r.minorUnit,u=r.thousandSeparator;if(""==e||void 0===e)return e;e="string"==typeof e?parseInt(e,10):e;var l="",s=(e=(e/=Math.pow(10,c)).toString().replace(".",i)).indexOf(i);if(s<0)c>0&&(e+="".concat(i).concat(new Array(c+1).join("0")));else{var d=e.substr(s+1);d.length<c&&(e+=new Array(c-d.length+1).join("0"))}var p=e.match(new RegExp("(\\d+)\\".concat(i,"(\\d+)")));return p&&(e=p[1],l=p[2]),e=e.replace(new RegExp("\\B(?=(\\d{3})+(?!\\d))","g"),"".concat(u)),a+(e=(null===(n=l)||void 0===n?void 0:n.length)>0?e+i+l:e)+o};var D=function(e,t){return"".concat(e,":").concat(t)};t.getShippingOptionId=D,t.extractSelectedShippingOption=function(e){var t=e.match(h);if(t){var n=t[1];return[t[2],n]}return[]},t.getSelectedShippingOptionId=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];return D(r,e[r])}},t.extractFullName=function(e){return[e.split(" ").slice(0,-1).join(" "),e.split(" ").pop()]},t.extractAddressLines=function(e){var t,n;return Array.isArray(e)&&(t=null==e?void 0:e[0],e.length>1&&(n=null==e?void 0:e[1])),{address_1:t,address_2:n}},t.getCartTotalItem=function(e,t){var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.key===e)return a.value}}catch(e){r.e(e)}finally{r.f()}return null},t.canShowSavedCard=function(){return!w()};var w=function(){return 1==(null==g?void 0:g.hasSubscription)};t.cartContainsSubscription=w,t.versionCompare=function(e,t,n){switch(n){case"<":return e<t;case">":return e>t;case"<=":return e<=t;case">=":return e>=t;case"=":return e==t}return!1};var C={first_name:"",last_name:"",company:"",address_1:"",address_2:"",city:"",state:"",postcode:"",country:"",phone:""};t.DEFAULT_SHIPPING_ADDRESS=C;var x=y(y({},C),{},{email:""});t.DEFAULT_BILLING_ADDRESS=x},1517:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(8712);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}))},8712:function(e,t,n){var r=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.useHandleTokenization=t.default=void 0;var a=r(n(1284)),o=r(n(7156)),i=n(9307),c=n(89),u=function(e){var t=e.venmoInstance,n=e.onSubmit,r=(0,i.useRef)(null),u=(0,c.usePaymentMethodDataContext)(),l=u.onPaymentDataFilter,s=u.paymentMethodNonce,d=u.setPaymentMethodNonce,p=u.notice.addNotice,f=(0,i.useCallback)((0,o.default)(a.default.mark((function e(){var o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!s){e.next=5;break}n(),e.next=10;break;case 5:return e.next=7,t.tokenize();case 7:o=e.sent,r.current={nonce:o.nonce},d(o.nonce);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),p(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),[t,n,s]);return(0,i.useEffect)((function(){var e=l((function(e,t){var n=t.name;return e.meta.paymentMethodData["".concat(n,"_nonce_key")]=r.current.nonce,e}),5);return function(){return e()}}),[l]),{handleClick:f}};t.useHandleTokenization=u;var l=u;t.default=l},272:function(e,t,n){var r=n(9307),a=n(4836)(n(7424)),o=n(421),i=n(9307),c=n(5736),u=n(4613),l=n(6723),s=n(9154),d=n(89),p=n(1517),f=(0,s.getSettings)("braintree_venmo"),m=new Promise((function(e,t){(0,o.create)({authorization:(0,s.getClientToken)(),allowNewBrowserTab:!1}).then((function(t){return e(t)})).catch((function(e){return t(e)}))})),v=function(e){var t=e.onSubmit,n=(0,d.usePaymentMethodDataContext)().notice,o=(0,i.useState)(null),u=(0,a.default)(o,2),s=u[0],v=u[1],g=(0,p.useHandleTokenization)({venmoInstance:s,onSubmit:t}).handleClick;return(0,i.useEffect)((function(){m.then((function(e){return v(e)})).catch((function(e){return n.addNotice(e)}))}),[]),r.createElement(r.Fragment,null,(null==n?void 0:n.notice)&&r.createElement(l.Notice,{notice:n.notice,onRemove:n.removeNotice}),r.createElement("div",{className:"wc-braintree-blocks-venmo-button__container"},r.createElement("p",null,(0,c.__)("Complete your order with","woo-payment-gateway")),s&&r.createElement(y,{onClick:g,src:f("buttonIcon")})))},y=function(e){var t=e.onClick,n=e.src;return r.createElement("button",{className:"wc-braintree-blocks-venmo__button",onClick:t},r.createElement("img",{src:n}))};(0,u.registerPaymentMethod)({name:f("name"),label:r.createElement(l.PaymentMethodLabel,{title:f("title"),paymentMethod:f("name"),icon:f("icon")}),ariaLabel:(0,c.__)("Venmo","woo-payment-gateway"),placeOrderButtonLabel:f("placeOrderButtonLabel"),canMakePayment:function(){return new Promise((function(e,t){m.then((function(t){e(t.isBrowserSupported())})).catch((function(t){e(!1)}))}))},content:r.createElement(l.PaymentMethod,{content:v,title:f("title"),description:f("description"),name:f("name"),icon:f("icon"),getData:f}),savedTokenComponent:r.createElement(l.SavedTokenProvider,{getData:f,name:f("name"),vaultedThreeDSecure:f("vaultedThreeDSecure")}),edit:r.createElement(l.PaymentMethod,{content:v,getData:f}),supports:{showSavedCards:f("features").includes("tokenization"),showSaveOption:!1,features:f("features")}})},4184:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var i=a.apply(null,n);i&&e.push(i)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var c in n)r.call(n,c)&&n[c]&&e.push(c)}}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},7884:function(){},2210:function(){},3897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},5372:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},3405:function(e,t,n){var r=n(3897);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6115:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},7156:function(e){function t(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,a)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(a,o){var i=e.apply(n,r);function c(e){t(i,a,o,c,u,"next",e)}function u(e){t(i,a,o,c,u,"throw",e)}c(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},6690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},3515:function(e,t,n){var r=n(6015),a=n(9617);function o(t,n,i){return a()?(e.exports=o=Reflect.construct.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=o=function(e,t,n){var a=[null];a.push.apply(a,t);var o=new(Function.bind.apply(e,a));return n&&r(o,n.prototype),o},e.exports.__esModule=!0,e.exports.default=e.exports),o.apply(null,arguments)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},9728:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},8416:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},434:function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},3808:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},1655:function(e,t,n){var r=n(6015);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},4836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},6035:function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},9617:function(e){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},9498:function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8872:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}},e.exports.__esModule=!0,e.exports.default=e.exports},2218:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2281:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},215:function(e,t,n){var r=n(7071);e.exports=function(e,t){if(null==e)return{};var n,a,o=r(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o},e.exports.__esModule=!0,e.exports.default=e.exports},7071:function(e){e.exports=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a},e.exports.__esModule=!0,e.exports.default=e.exports},4993:function(e,t,n){var r=n(8698).default,a=n(6115);e.exports=function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6015:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7424:function(e,t,n){var r=n(5372),a=n(8872),o=n(6116),i=n(2218);e.exports=function(e,t){return r(e)||a(e,t)||o(e,t)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},861:function(e,t,n){var r=n(3405),a=n(9498),o=n(6116),i=n(2281);e.exports=function(e){return r(e)||a(e)||o(e)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6116:function(e,t,n){var r=n(3897);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},3496:function(e,t,n){var r=n(3808),a=n(6015),o=n(6035),i=n(3515);function c(t){var n="function"==typeof Map?new Map:void 0;return e.exports=c=function(e){if(null===e||!o(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return i(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,c(t)}e.exports=c,e.exports.__esModule=!0,e.exports.default=e.exports}}]);
//# sourceMappingURL=commons.js.map