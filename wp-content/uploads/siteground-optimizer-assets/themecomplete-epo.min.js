(function(e,B,a){'use strict';var b={},c=e.TMEPOJS,n=e.wp,bB=e.TMEPOQTRANSLATEXJS,af=e.noUiSlider,D=e.ClipboardEvent,z=e.DataTransfer,t=[],_=[],x=!1,aN=!1,s=a('body'),d=a(e),h=a(B),E=a(e),bz=e.tcmexp,V=e._,q=!1,bD=function(){return c.tm_epo_global_input_decimal_separator===''?c.currency_format_decimal_sep:a.epoAPI.locale.getSystemDecimalSeparator()},bx=function(){return c.tm_epo_global_displayed_decimal_separator===''?c.currency_format_decimal_sep:a.epoAPI.locale.getSystemDecimalSeparator()},bw=function(){return c.tm_epo_global_displayed_decimal_separator===''?c.currency_format_thousand_sep:a.epoAPI.locale.getSystemDecimalSeparator()},bv=function(){return c.tm_epo_start_animation_delay?c.tm_epo_start_animation_delay:e.tc_epo_delay?e.tc_epo_delay:500},bs=function(){return c.tm_epo_animation_delay?c.tm_epo_start_animation_delay:e.tc_epo_animation_delay?e.tc_epo_animation_delay:500},br=a.fn.val,M,l,I;if(!c||!n)return;a.fn.val=function(){var b=br.apply(this,arguments);return arguments.length>0&&a(this).is('.input-text.qty')&&a(this).trigger('change.cpf'),b},c.tm_epo_no_lazy_load==='no'&&a.lazyLoadXT&&a.extend(a.lazyLoadXT,{autoInit:!1,updateEvent:a.lazyLoadXT.updateEvent+' tmlazy'}),b.localInputDecimalSeparator=bD(),b.localDecimalSeparator=bx(),b.localThousandSeparator=bw(),b.epoDelay=bv(),b.epoAnimationDelay=bs(),b.getElementFromFieldCache=[],b.epoSelector='.tc-extra-product-options',b.associatedEpoSelector='.tc-extra-product-options-inline',b.associatedEpoCart='.tc-epo-element-product-container-cart',b.addToCartSelector="input[name='add-to-cart']",b.tcAddToCartSelector='input.tc-add-to-cart',b.qtySelector="input.qty,input[name='quantity'],select.qty,.drop-down-button #qty,.plus-minus-button #qty,.slider-input #amount",b.associateQtySelector='input.tm-qty-alt',b.addToCartButtonSelector='.add_to_cart_button, .single_add_to_cart_button',b.compositeSelector='.bto_item,.component',b.nativeProductPriceSelector='.woocommerce .product p.price',b.associatedNativeProductPriceSelector='.product-price span.price',b.templateEngine=a.epoAPI.applyFilter('tc_adjust_templateEngine',{price:n.template('tc-price'),sale_price:n.template('tc-sale-price'),tc_chars_remanining:n.template('tc-chars-remanining'),tc_final_totals:n.template('tc-final-totals'),tc_floating_box:n.template('tc-floating-box'),tc_floating_box_nks:n.template('tc-floating-box-nks'),tc_formatted_price:n.template('tc-formatted-price'),tc_formatted_sale_price:n.template('tc-formatted-sale-price'),tc_lightbox:n.template('tc-lightbox'),tc_lightbox_zoom:n.template('tc-lightbox-zoom'),tc_section_pop_link:n.template('tc-section-pop-link'),tc_upload_messages:n.template('tc-upload-messages')}),a.tcAPI=function(){return b},a.tcAPIGet=function(a){return b[a]},a.tcAPISet=function(a,c){b[a]=c},a.tc_validator&&(a.extend(a.tc_validator.messages,{required:c.tm_epo_global_validator_messages.required,email:c.tm_epo_global_validator_messages.email,url:c.tm_epo_global_validator_messages.url,number:c.tm_epo_global_validator_messages.number,digits:c.tm_epo_global_validator_messages.digits,maxlengthsingle:a.tc_validator.format(c.tm_epo_global_validator_messages.maxlengthsingle),maxlength:a.tc_validator.format(c.tm_epo_global_validator_messages.maxlength),minlengthsingle:a.tc_validator.format(c.tm_epo_global_validator_messages.minlengthsingle),minlength:a.tc_validator.format(c.tm_epo_global_validator_messages.minlength),max:a.tc_validator.format(c.tm_epo_global_validator_messages.max),min:a.tc_validator.format(c.tm_epo_global_validator_messages.min),step:a.tc_validator.format(c.tm_epo_global_validator_messages.step),lettersonly:a.tc_validator.format(c.tm_epo_global_validator_messages.lettersonly),lettersspaceonly:a.tc_validator.format(c.tm_epo_global_validator_messages.lettersspaceonly),alphanumeric:a.tc_validator.format(c.tm_epo_global_validator_messages.alphanumeric),alphanumericunicode:a.tc_validator.format(c.tm_epo_global_validator_messages.alphanumericunicode),alphanumericunicodespace:a.tc_validator.format(c.tm_epo_global_validator_messages.alphanumericunicodespace),repeaterminrows:a.tc_validator.format(c.tm_epo_global_validator_messages.repeaterminrows),repeatermaxrows:a.tc_validator.format(c.tm_epo_global_validator_messages.repeatermaxrows)}),a.tc_validator.addMethod('alphanumeric',function(a,b){return this.optional(b)||/^[a-zA-Z0-9.-]+$/i.test(a)},a.tc_validator.messages.alphanumeric),a.tc_validator.addMethod('lettersonly',function(a,b){return this.optional(b)||/^[a-z]+$/i.test(a)},a.tc_validator.messages.lettersonly),a.tc_validator.addMethod('lettersspaceonly',function(a,b){return this.optional(b)||/^[a-z,\u0020]+$/i.test(a)},a.tc_validator.messages.lettersspaceonly),a.tc_validator.addMethod('alphanumericunicode',function(a,b){return this.optional(b)||/^[\u0030-\u0039\u0041-\u005A\u0061-\u007A\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF\u0100-\u0148\u014A-\u017F\u0180-\u01BF\u01C4-\u024F\u1E02-\u1EF3\u0370-\u03FF\u0400-\u04FF\u0500-\u052F\u3040-\u309f\u30a0-\u30ff\u4e00-\u9faf\u3400-\u4dbf\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF\u10E60-\u10E7F\u1EC70-\u1ECBF\u1ED00-\u1ED4F\u1EE00-\u1EEFF\u0530-\u1058F]+$/i.test(a)},a.tc_validator.messages.alphanumericunicode),a.tc_validator.addMethod('alphanumericunicodespace',function(a,b){return this.optional(b)||/^[\u0030-\u0039\u0041-\u005A\u0061-\u007A\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF\u0100-\u0148\u014A-\u017F\u0180-\u01BF\u01C4-\u024F\u1E02-\u1EF3\u0370-\u03FF\u0400-\u04FF\u0500-\u052F\u3040-\u309f\u30a0-\u30ff\u4e00-\u9faf\u3400-\u4dbf\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF\u10E60-\u10E7F\u1EC70-\u1ECBF\u1ED00-\u1ED4F\u1EE00-\u1EEFF\u0530-\u1058F,\u0020]+$/i.test(a)},a.tc_validator.messages.alphanumericunicodespace),a.tc_validator.addMethod('repeaterminrows',function(d,b,c){return a.epoAPI.math.toInt(a(b).closest('.tc-element-inner-wrap').find('.tc-repeater-element').length)>=a.epoAPI.math.toInt(c)},a.tc_validator.messages.repeaterminrows),a.tc_validator.addMethod('repeatermaxrows',function(d,b,c){return a.epoAPI.math.toInt(a(b).closest('.tc-element-inner-wrap').find('.tc-repeater-element').length)<=a.epoAPI.math.toInt(c)},a.tc_validator.messages.repeatermaxrows),a.tc_validator.addMethod('product_element_radio_qty',function(d,b){var c=a(b).closest('.tm-element-ul-product').find('input.tc-epo-field-product.tmcp-radio:checked').closest('.tc-epo-element-product-holder').find('.tm-qty').first().val();return c>0},a.tc_validator.messages.required),a.tc_validator.addMethod('product_element_select_qty',function(d,b){var c=a(b).closest('.tm-element-ul-product').find('select.tc-epo-field-product.tmcp-select').closest('.tc-epo-element-product-holder').find('.tm-qty').first().val();return c>0},a.tc_validator.messages.required)),a.epoAPI.util.escapeSelector=function(){var a=/([!"$%&'()*+,/:;<=>?@[\]^`{|}~])/g;return function(b){return b.replace(a,'\\$1')}}(),a.epoAPI.util.unformat=function(e){var c=a.epoAPI.math.unformat(e,b.localInputDecimalSeparator),d=parseFloat(c);return Number.isFinite(d)?d:c},a.epoAPI.util.parseParams=function(a,b){return typeof a!='string'||a.split===void 0?[]:a.split('&').map(function(a){var c={};return b===!0&&(a=decodeURIComponent(a.replace(/\+/g,'%20'))),a=a.split('=').map(function(a){var b=a.split('?');return b.length>1?b[1]:a}),a.length>1&&(c[a[0]]=a[1]),c}).filter(function(a){return a!==null}).reduce(function(a,b){return Object.assign({},a,b)},{})},a.tmempty||(a.tmempty=function(a){var c=[void 0,null,!1,0,'','0'],d=c.filter(function(b){return a===b}).length===1,b=!1;return typeof a=='object'?(b=Object.keys(a).filter(function(b){return Object.prototype.hasOwnProperty.call(a,b)}).length===0,b):d||b}),a.tmType||(a.tmType=function(a){return Object.prototype.toString.call(a).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}),a.is_on_screen||(a.fn.is_on_screen=function(){var d=a(e),f=a.epoAPI.dom.scroll(),b=this.offset(),c={top:f.top,left:f.left};return c.right=c.left+d.width(),c.bottom=c.top+d.height(),b.right=b.left+this.outerWidth(),b.bottom=b.top+this.outerHeight(),!(c.right<b.left||c.left>b.right||c.bottom<b.top||c.top>b.bottom)}),a().tmtoggle||(a.fn.tmtoggle=function(){var b=this,c=!1,f=0;if(b.length===0)return;return e.tc_accordion_offset===void 0&&(e.tc_accordion_offset=-100),b.each(function(){var g=a(this),h,b,i;if(!g.data('tm-toggle-init')){if(g.data('tm-toggle-init',1),h=g.find('.tm-toggle'),b=g.find('.tm-collapse-wrap'),i=a('.tm-collapse.tmaccordion').find('.tm-toggle'),h.length===0||b.length===0)return;b.is('.closed')?(a(b).removeClass('closed open').addClass('closed').hide(),a(h).find('.tm-arrow').removeClass('tcfa-angle-down tcfa-angle-up').addClass('tcfa-angle-down'),a(h).removeClass('toggle-header-open toggle-header-closed').addClass('toggle-header-closed')):(a(b).removeClass('closed open').addClass('open').show(),a(h).find('.tm-arrow').removeClass('tcfa-angle-down tcfa-angle-up').addClass('tcfa-angle-up'),a(h).removeClass('toggle-header-open toggle-header-closed').addClass('toggle-header-open'),c=!0),h.each(function(h,c){a(c).on('closewrap.tmtoggle',function(){if(g.is('.tmaccordion')&&a(b).is('.closed'))return;a(b).removeClass('closed open').addClass('closed'),a(this).find('.tm-arrow').removeClass('tcfa-angle-down tcfa-angle-up').addClass('tcfa-angle-down'),a(this).removeClass('toggle-header-open toggle-header-closed').addClass('toggle-header-closed'),a(b).removeClass('tm-animated fadein'),g.is('.tmaccordion')?a(b).animate({height:'toggle'},100,function(){a(b).hide()}):a(b).animate({height:'toggle'},100,function(){a(b).hide()}),d.trigger('tmlazy')}),a(c).on('openwrap.tmtoggle',function(){g.is('.tmaccordion')&&a(i).not(a(this)).trigger('closewrap.tmtoggle'),a(b).removeClass('closed open').addClass('open'),a(this).find('.tm-arrow').removeClass('tcfa-angle-down tcfa-angle-up').addClass('tcfa-angle-up'),a(this).removeClass('toggle-header-open toggle-header-closed').addClass('toggle-header-open'),a(b).show().removeClass('tm-animated fadein').addClass('tm-animated fadein'),setTimeout(function(){d.trigger('tmlazy')},200),setTimeout(function(){f&&g.is('.tmaccordion')&&!g.is_on_screen()&&d.tcScrollTo(a(c),10,e.tc_accordion_offset)},110)}),a(c).on('click.tmtoggle',function(c){c.preventDefault(),a(b).is('.closed')?a(this).trigger('openwrap.tmtoggle'):a(this).trigger('closewrap.tmtoggle')}),a(c).find('.tm-qty').closest('.cpf-element').find('.tm-epo-field').on('change.cpf',function(){a(c).trigger('openwrap.tmtoggle')})})}}),void 0===e.tc_accordion_closed_on_page_load&&!c&&b.filter('.tmaccordion').length>0&&b.filter('.tmaccordion').first().find('.tm-toggle').trigger('openwrap.tmtoggle'),f=1,b}),a().tmpoplink||(a.fn.tmpoplink=function(){var b=this,d;if(b.length===0)return;return d=function(b){return a.epoAPI.template.html(n.template('tc-cart-options-popup'),{title:b.title,id:b.id,html:b.html,close:c.i18n_close})},b.each(function(){var e=a(this),f,b,g,h;if(e.is('.tc-poplink'))return;e.addClass('tc-poplink'),f=a(this).attr('href'),b=a(this).attr('data-title'),g=a(f).html(),b||(b=c.i18n_addition_options),h=d({id:'tc-floatbox-content',html:g,title:b}),e.on('click.tmpoplink',function(b){a.tcFloatBox({fps:1,ismodal:!1,refresh:100,width:'80%',height:'80%',classname:'flasho tc-wrapper',data:h}),b.preventDefault()})})});function bq(e,b,c,d,a){return b=Math,c=b.log,d=1024,a=c(e)/c(d)|0,(e/b.pow(d,a)).toFixed(a?2:0)+' '+(a?'KMGTPEZY'[--a]+'B':'bytes')}function aD(c,b){c.toArray().forEach(function(c){c=a(c),c.find(':input').prop('disabled',function(e,d){var c=a(this).data('tc-state');return c===void 0?(a(this).data('tc-state',d),b):c===!1?b:c})})}function y(a,b,i,p,n,q,o){var h,e,l,m,j,f,g,k,d;return Number.isFinite(parseFloat(a))||(a=0),a=a*1e4,b&&(h=b.attr('data-taxable'),e=b.attr('data-tax-rate'),l=b.attr('data-prices-include-tax')||c.prices_include_tax,m=b.attr('data-is-vat-exempt'),j=b.attr('data-non-base-location-prices'),f=b.attr('data-taxes-of-one'),g=b.attr('data-base-taxes-of-one'),k=b.attr('data-modded-taxes-of-one'),b.data('current_variation')!==void 0?d=b.data('current_variation'):n!==void 0&&(d=n),d!==void 0&&(d=b.data('current_variation'),h=d.tc_is_taxable,e=d.tc_tax_rate,j=d.tc_non_base_location_prices,f=d.tc_taxes_of_one,g=d.tc_base_taxes_of_one,k=d.tc_modded_taxes_of_one),i&&i.data('tax-obj')&&(e=i.data('tax-obj'),e.has_fee==='no'?h=!1:e.has_fee==='yes'&&(h=!0),e=e.tax_rate,f=e/100,g=e/100),h&&(l==='1'&&!p?m==='1'?j==='1'?a=parseFloat(a)-f*a:a=parseFloat(a)-g*a:j==='1'&&(a=parseFloat(a)-g*a+k*a):(i||d===void 0||o)&&(a=parseFloat(a)+parseFloat(a)*f))),a=a/1e4,a}function aB(a,b,f,j,i,m,l){var e,c,g,k,d,h;return Number.isFinite(parseFloat(a))||(a=0),a=a*1e4,b&&(h=b.attr('data-tax-display-mode'),e=b.attr('data-taxable'),c=b.attr('data-tax-rate'),g=b.attr('data-taxes-of-one'),k=b.attr('data-prices-include-tax'),b.data('current_variation')!==void 0?d=b.data('current_variation'):i!==void 0&&(d=i),d!==void 0&&(e=d.tc_is_taxable,c=d.tc_tax_rate,g=d.tc_taxes_of_one),f&&f.data('tax-obj')&&(c=f.data('tax-obj'),c.has_fee==='no'?e=!1:c.has_fee==='yes'&&(e=!0),c=c.tax_rate),e&&(k==='1'||j)&&(h==='incl'||(f||d===void 0||j||l)&&(a=parseFloat(a)-parseFloat(g*a)))),a=a/1e4,a}function g(a,b,d,e,f,g,h){var i;return Number.isFinite(parseFloat(a))||(a=0),b&&(i=b.attr('data-tax-display-mode')||c.tax_display_mode,i==='incl'?a=y(a,b,d,f,g,e,h):a=aB(a,b,d,f,g,e,h)),a}function o(e,f){var d;return f||(f={}),d=a.extend({symbol:'',format:'',decimal:b.localDecimalSeparator,thousand:b.localThousandSeparator,precision:c.currency_format_num_decimals},f),c.tm_epo_trim_zeros==='yes'&&(e%1).toString()!=='0'===!1&&(d.precision=0),a.epoAPI.applyFilter('tc_formatPrice',a.epoAPI.math.format(e,d),d,e)}function ay(a,b,d){return b+o(a,{symbol:c.currency_format_symbol,format:c.currency_format})+d}function k(a,d,k,h,i,j){var b='',e=c.option_plus_sign+' ',f;return k||(a=g(a,d,i,j)),f=Math.abs(a),c.tm_epo_global_options_price_sign==='minus'&&(e=''),a<0&&(e=c.option_minus_sign+' '),d&&h&&(b=d.attr('data-tax-string')),b===void 0&&(b=''),ay(f,e,b)}M=function(a,b,d){return!!(this.this_epo_totals_container=a,this.is_quickview=b,this.main_cart=d,!b&&c.floating_totals_box&&c.floating_totals_box!=='disable'&&d&&a.length)&&(this.init(),this)},M.prototype={constructor:M,onUpdate:function(){var e=this.this_epo_totals_container.data('tm-html'),f=this.this_epo_totals_container.data('tm-floating-box-data'),d=[],h,g;f&&f.length&&a.each(f,function(e,b){b.title===''&&(b.title='&nbsp;'),b.value===''&&(b.value='&nbsp;'),b.title?(b.title=a('<div>'+b.title+'</div>'),b.title.find('span').remove(),b.title=b.title.html()):b.title='&nbsp;',this.is_nks&&(b.label_show!==''&&(b.title=''),b.value_show!==''&&(b.value='')),c.tm_epo_auto_hide_price_if_zero==='yes'&&a.tmempty(b.price)===!0?b.price='':b.price=k(b.price,this.this_epo_totals_container,!0,!1),d.push({label_show:b.label_show,value_show:b.value_show,title:b.title,value:b.value,quantity:b.quantity,price:b.price})}),e&&e!==''||this.is_nks||(e='',this.floatingBox.hide()),d&&!d.length&&d.push({label_show:'hidden',value_show:'hidden',title:'',value:'',quantity:0,price:0}),h=a.epoAPI.template.html(this.engineTemplate,{html_before:c.floating_totals_box_html_before,html_after:c.floating_totals_box_html_after,option_label:c.i18n_option_label,option_value:c.i18n_option_value,option_qty:c.i18n_option_qty,option_price:c.i18n_option_price,values:d,totals:e}),this.floatingBox.html(h),this.onUpdateScroll(),c.floating_totals_box_add_button==='yes'&&(g=this.main_cart.find(b.addToCartButtonSelector).first(),g.tcClone().addClass('tc-add-to-cart-button').on('click',function(){g.trigger('click')}).appendTo(this.floatingBox))},onUpdateScroll:function(){if(c.floating_totals_box_visibility==='always'){this.floatingBox.show();return}c.floating_totals_box_visibility==='hideafterscroll'&&(d.scrollTop()>a.epoAPI.math.toFloat(c.floating_totals_box_pixels)&&!this.is_nks_alt?this.floatingBox.is(':hidden')||(this.is_nks===!1?this.floatingBox.fadeOut():this.floatingBox.hide()):(this.floatingBox.is(':hidden')||this.is_nks_alt)&&(!this.floatingBox.is(':empty')||this.is_nks_alt)&&(this.is_nks===!1?this.floatingBox.fadeIn():this.floatingBox.show())),c.floating_totals_box_visibility==='afterscroll'&&(d.scrollTop()>a.epoAPI.math.toFloat(c.floating_totals_box_pixels)||this.is_nks_alt?this.floatingBox.is(':hidden')&&!this.floatingBox.is(':empty')||this.is_nks_alt?this.is_nks===!1?this.floatingBox.fadeIn():this.floatingBox.show():!this.floatingBox.is(':hidden')&&this.floatingBox.is(':empty')&&(this.is_nks===!1?this.floatingBox.fadeOut():this.floatingBox.hide()):this.floatingBox.is(':hidden')||(this.is_nks===!1?this.floatingBox.fadeOut():this.floatingBox.hide()))},addEvents:function(){this.onUpdate(),this.main_cart.on('tm-epo-after-update',this.onUpdate.bind(this)),this.is_nks===!1&&d.on('scroll',this.onUpdateScroll.bind(this))},init:function(){this.floatingBox=a('<div class="tm-floating-box '+c.floating_totals_box+'"></div>'),this.nks_selector=a('.tm-floating-box-nks').first(),this.alt_selector=a('.tm-floating-box-alt').first(),this.engineTemplate=b.templateEngine.tc_floating_box,this.is_nks=!1,this.is_nks_alt=!1,this.nks_selector.length>0?(this.is_nks=!0,this.floatingBox.removeClass('top left right bottom').appendTo(this.nks_selector).show()):this.alt_selector.length>0?this.floatingBox.removeClass('top left right bottom').appendTo(this.alt_selector).hide():this.floatingBox.appendTo('body').hide(),(this.nks_selector.length>0||this.alt_selector.length>0)&&(this.is_nks_alt=!0,this.engineTemplate=b.templateEngine.tc_floating_box_nks),this.addEvents()}},a.tcFloatingTotalsBox=function(a,c,d){var b=!1;return a&&a.length&&a.data('tcfloatingtotalsbox')===void 0&&(b=new M(a,c,d),a.data('tcfloatingtotalsbox',b)),b},a.tc_product_image={},a.tc_product_image_store={},a.tc_replace_object_values=function(a,b){return Object.keys(a).forEach(function(c){Object.keys(a[c]).forEach(function(d){void 0!==b[c]&&void 0!==b[c][d]&&Object.prototype.hasOwnProperty.call(b[c],d)&&(a[c][d]=b[c][d])})}),a},a.tc_maybe_copy_object_values=function(a,b){return Object.keys(b).forEach(function(c){Object.keys(b[c]).forEach(function(d){void 0!==b[c]&&Object.prototype.hasOwnProperty.call(b[c],d)&&void 0!==b[c][d]&&(void 0===a[c]||void 0===a[c][d])&&(void 0===a[c]&&(a[c]={}),a[c][d]=b[c][d])})}),a},a.tc_pre_populate_store=function(){var a={};return a[0]={},a[1]={},a[2]={},a[3]={},a[0].src='',a[0].srcset='',a[0].sizes='',a[0].title='',a[0].alt='',a[0]['data-src']='',a[0]['data-large_image']='',a[0]['data-large_image_width']='',a[0]['data-large_image_height']='',a[1]['data-thumb']='',a[2].src='',a[3].href='',a[3].title='',a},a.tc_populate_store=function(c,e){var f=e.find('.flex-control-nav li:eq(0) img'),g=e.find('.woocommerce-product-gallery__wrapper '),h=g.find('.woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder').eq(0),b=c,d=c.closest('a'),a={};return a[0]={},a[1]={},a[2]={},a[3]={},a[0].src=b.attr('src'),a[0].srcset=b.attr('srcset'),a[0].sizes=b.attr('sizes'),a[0].title=b.attr('title'),a[0].alt=b.attr('alt'),a[0]['data-src']=b.attr('data-src'),a[0]['data-large_image']=b.attr('data-large_image'),a[0]['data-large_image_width']=b.attr('data-large_image_width'),a[0]['data-large_image_height']=b.attr('data-large_image_height'),a[1]['data-thumb']=h.attr('data-thumb'),a[2].src=f.attr('src'),a[3].href=d.attr('href'),a[3].title=d.attr('title'),a},a.tc_maybe_copy_object_values_from_img=function(b,d,e){var k=e.find('.flex-control-nav li:eq(0) img'),j=e.find('.woocommerce-product-gallery__wrapper '),g=j.find('.woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder').eq(0),h=d,i=d.closest('a'),l=['src','srcset','sizes','title','alt','data-src','data-large_image','data-large_image_width','data-large_image_height','large-image'],m=['data-thumb'],n=['src'],o=['href','title'],p=[h,g,k,i],q=[l,m,n,o],f,c;return p.forEach(function(e,d){void 0!==e&&void 0!==e[0]&&(f=e[0].attributes,a.each(f,function(){this.specified&&(c=this.name,a.inArray(c,q[d])!==-1&&(void 0===b[d]||void 0!==b[d]&&void 0===b[d][c])&&(void 0===b[d]&&(b[d]={}),b[d][c]=this.value))}))}),b},a.fn.tc_set_attr=function(c,d,b){void 0===b&&(b=0),(void 0===a.tc_product_image[b]||void 0!==a.tc_product_image[b]&&void 0===a.tc_product_image[b][c])&&(void 0===a.tc_product_image[b]&&(a.tc_product_image[b]={}),a.tc_product_image[b][c]='',this.attr(c)&&(a.tc_product_image[b][c]=this.attr(c))),!1===d?this.removeAttr(c):this.attr(c,d)},a.fn.tc_reset_attr=function(c,b){if(void 0===b&&(b=0),void 0===a.tc_product_image[b])return;void 0!==a.tc_product_image[b][c]&&this.attr(c,a.tc_product_image[b][c]),delete a.tc_product_image[b][c]},a.fn.tc_update_attr=function(c,b){void 0===b&&(b=0),void 0!==a.tc_product_image[b]&&(a.tc_product_image[b][c]=this.attr(c))},a.fn.tc_image_update=function(l,m){var g=a(l),n=this,e=a(m),j=n.data('epo_object'),k=j.main_product.closest('#product-'+j.product_id),i=k,f,b,h,d;k.length<=0&&(i=j.main_product.closest('.post-'+j.product_id)),g.is('select')&&(g=g.children('option:selected')),f=g.data('image-variations'),c.tm_epo_global_product_image_selector!==''?b=a(c.tm_epo_global_product_image_selector):b=i.find('a.woocommerce-main-image img, img.woocommerce-main-image,a img').not('.thumbnails img,.product_list_widget img,img.emoji,a.woocommerce-product-gallery__trigger img').first(),h=b.closest('a'),b.length>1&&(b=b.first()),g&&f&&e.length>0?(e.removeAttr('data-o_src').removeAttr('data-o_title').removeAttr('data-o_alt').removeAttr('data-o_srcset').removeAttr('data-o_sizes').removeAttr('srcset').removeAttr('sizes'),d=f.imagep,f.imagep.image_link||(d=f.image),e.attr('title',d.image_title),e.attr('alt',d.image_alt),d.image_srcset&&e.attr('srcset',d.image_srcset),d.image_sizes&&e.attr('sizes',d.image_sizes),b.tc_set_attr('title',d.image_title),b.tc_set_attr('alt',d.image_alt),b.tc_set_attr('data-large-image',d.image_link),b.data.wc27_zoom_target&&(b.data.wc27_zoom_target.tc_set_attr('data-thumb',d.image_link),i.find('.flex-control-nav li:eq(0) img').tc_set_attr('src',d.image_link)),h.tc_set_attr('href',d.image_link),h.tc_set_attr('title',d.image_caption)):(b.tc_reset_attr('title'),b.tc_reset_attr('alt'),b.tc_reset_attr('data-large-image'),b.data.wc27_zoom_target&&(b.data.wc27_zoom_target.tc_reset_attr('data-thumb'),i.find('.flex-control-nav li:eq(0) img').tc_reset_attr('src')),h.tc_reset_attr('href'),h.tc_reset_attr('title'))},a.fn.tm_find_matching_variations=function(c,f){var e=[],b,d;if(c)for(b=0;b<c.length;b+=1)d=c[b],a.fn.tm_variations_match(d.attributes,f)&&e.push(d);return e},a.fn.tm_variations_match=function(c,e){var d=!0,a,b;return Object.keys(c).forEach(function(f){Object.prototype.hasOwnProperty.call(c,f)&&(a=c[f],b=e[f],a!==void 0&&b!==void 0&&a.length!==0&&b.length!==0&&a!==b&&(d=!1))}),d};function bp(h){var e=a(h),d,c,f,g;if(e.length===0)return;if(e.is('.cpf-section'))return h.find('.tm-epo-field');if(d=e.attr('data-uniqid'),g=e.closest('.tc-extra-product-options'),c=g.attr('data-epo-id'),!g.is('.reactivate')&&b.getElementFromFieldCache&&b.getElementFromFieldCache[c]&&b.getElementFromFieldCache[c][d])return b.getElementFromFieldCache[c][d];if(f=e.attr('class').split(' ').map(function(a){return a.indexOf('cpf-type-',0)!==-1?a:null}).filter(function(a){return a!==null&&a!==void 0?a:null}),f.length>0)switch(f=f[0],f==='cpf-type-product'&&(e.is('.cpf-type-product-mode-product')||e.is('.cpf-type-product-checkbox')||e.is('.cpf-type-product-thumbnailmultiple')?f='cpf-type-checkbox':e.is('.cpf-type-product-dropdown')?f='cpf-type-select':f='cpf-type-radio'),f){case'cpf-type-radio':return b.getElementFromFieldCache[c]=[],b.getElementFromFieldCache[c][d]=e.find('.tm-epo-field.tmcp-radio'),b.getElementFromFieldCache[c][d];case'cpf-type-checkbox':return b.getElementFromFieldCache[c]=[],b.getElementFromFieldCache[c][d]=e.find('.tm-epo-field.tmcp-checkbox'),b.getElementFromFieldCache[c][d];case'cpf-type-select':return b.getElementFromFieldCache[c]=[],b.getElementFromFieldCache[c][d]=e.find('.tm-epo-field.tmcp-select'),b.getElementFromFieldCache[c][d];case'cpf-type-selectmultiple':return b.getElementFromFieldCache[c]=[],b.getElementFromFieldCache[c][d]=e.find('.tm-epo-field.tmcp-selectmultiple'),b.getElementFromFieldCache[c][d];case'cpf-type-textarea':return b.getElementFromFieldCache[c]=[],b.getElementFromFieldCache[c][d]=e.find('.tm-epo-field.tmcp-textarea'),b.getElementFromFieldCache[c][d];case'cpf-type-textfield':return b.getElementFromFieldCache[c]=[],b.getElementFromFieldCache[c][d]=e.find('.tm-epo-field.tmcp-textfield'),b.getElementFromFieldCache[c][d];case'cpf-type-color':return b.getElementFromFieldCache[c]=[],b.getElementFromFieldCache[c][d]=e.find('.tm-epo-field.tm-color-picker'),b.getElementFromFieldCache[c][d];case'cpf-type-range':return b.getElementFromFieldCache[c]=[],b.getElementFromFieldCache[c][d]=e.find('.tm-epo-field.tmcp-range'),b.getElementFromFieldCache[c][d];case'cpf-type-date':return b.getElementFromFieldCache[c]=[],b.getElementFromFieldCache[c][d]=e.find('.tm-epo-field.tmcp-date'),b.getElementFromFieldCache[c][d];case'cpf-type-time':return b.getElementFromFieldCache[c]=[],b.getElementFromFieldCache[c][d]=e.find('.tm-epo-field.tmcp-time'),b.getElementFromFieldCache[c][d];case'cpf-type-variations':return b.getElementFromFieldCache[c]=[],b.getElementFromFieldCache[c][d]=e.closest('.cpf-section').find('.tm-epo-field.tm-epo-variation-element'),b.getElementFromFieldCache[c][d]}}a().tclightbox||(a.fn.tclightbox=function(){var d=this;if(d.length===0)return;return d.each(function(){var d=a(this),e,g,f,h,k,i,j;if(d.is('.tcinit'))return;if(e=d.attr('src')||d.attr('data-original'),g=d.closest('label'),f=g.closest('.tmcp-field-wrap').find(".tm-epo-field[id='"+g.attr('for')+"']"),e=f.attr('data-imagel')||f.attr('data-imagep')||f.attr('data-image')||e,!e)return;d.addClass('tcinit').before(a.epoAPI.template.html(b.templateEngine.tc_lightbox,{})),h=d.prev(),d.wrap("<div class='tc-lightbox-image-wrap'/>"),d.after(h),k=h.find('.tc-lightbox-button'),j=function(){k.addClass('tcinit').on('click.tclightbox',function(f){var c,d;if(a('.tc-closing.tc-lightbox').length>0)return;c=a.epoAPI.dom.size(),d=a('<img>').addClass('tc-lightbox-img').attr('src',e).css('maxHeight',c.visibleHeight+'px').css('maxWidth',c.visibleWidth+'px'),a.tcFloatBox({fps:1,ismodal:!1,refresh:'fixed',width:'auto',height:'auto',top:'0%',left:'0%',classname:'flasho tc-lightbox',animateIn:'tc-lightbox-zoomin',animateOut:'tc-lightbox-zoomout',data:a.epoAPI.template.html(b.templateEngine.tc_lightbox_zoom,{img:d[0].outerHTML}),zIndex:102001,cancelClass:'.tc-lightbox-img, .tc-lightbox-button-close',unique:!0}),f.preventDefault()})},c.tm_epo_preload_lightbox_image==='yes'?(i=new Image,i.src=e,i.onload=function(){j()}):j()})}),a().tmsectionpoplink||(a.fn.tmsectionpoplink=function(){var e=this;if(e.length===0)return;return e.each(function(){var e=a(this),k,h,f,g,i,j;if(e.data('tmsectionpoplink'))return;e.data('tmsectionpoplink',!0),k=e.attr('data-sectionid'),h=c.i18n_addition_options,f=e.closest(".cpf-section[data-uniqid='"+k+"']"),g=!1,i=a('<div class="fl-overlay"></div>').css({zIndex:parseInt(e.zIndex,10)-1,opacity:.8}),j=function(){var b=a('#tm-section-pop-up');b.parents().removeClass('noanimated'),i.unbind().remove(),b.after(f),b.remove(),f.find('.tm-section-link').show(),f.find('.tm-section-pop').hide()},e.attr('data-title')&&(h=e.attr('data-title')),e.on('click.tmsectionpoplink',function(k){var e;k.preventDefault(),g=!1,i.appendTo('body').on('click',j),f.before(a.epoAPI.template.html(b.templateEngine.tc_section_pop_link,{title:h,close:c.i18n_close})),e=a('#tm-section-pop-up'),e.find('.float-editbox').prepend(f),f.find('.tm-section-link').hide(),f.find('.tm-section-pop').show(),e.parents().addClass('noanimated'),e.find('.floatbox-cancel').on('click',function(){if(g)return;g=!0,j()}),d.trigger('tmlazy'),d.trigger('tmsectionpoplink')})})});function N(b){var a="input[name^='variation_id']";return b.find('input.variation_id').length>0?a='input.variation_id':a='input.product-variation-id',a}function bn(a,d){var c=N(a),b=a.find(c);return a.is('.tc-epo-element-product-container-cart')?b=a.closest('.tc-epo-element-product-li-container').find(c):b=a.find(c),d&&(b=b.not(d)),b}function bm(a){return a.find(N(a)).val()||0}function P(d){var c=d.find(b.qtySelector).last();return c.length===0&&(c=d.find(b.associateQtySelector).last()),c=a.epoAPI.applyFilter('tc_getQtyElement',c,d),c}function bk(b){return a.epoAPI.applyFilter('tc_getCurrentQty',a.epoAPI.math.toFloat(P(b).val()),b)}function ao(a,b,c){t[t.length]={name:a,selector:b,func:c}}function j(b,e,f){var c=!0,g=!1,d;return b=a(b),d=b.filter('.tc-epo-field-product'),d.length&&d.data('islogicinit')===void 0&&(g=!0),b.each(function(h,a){!c&&b.has('.tc-epo-field-product').length?(g||d.is('.tcdisabled'))&&an(a,e,f):c=an(a,e,f)&&c}),c}function an(d,l,m){var e,f,h,g,j,k,i;return d=a(d),d.is('.cpf-element')?(e=d,d=d.find('.tmcp-field, .tmcp-fee-field')):e=d.closest('.cpf-element'),m?h=d.closest('.tmcp-ul-wrap'):h=e,d.is('.tc-epo-field-product')&&d.data('islogicinit')===void 0&&d.data('islogicinit',1),g=!d.is('.tc-epo-field-product')&&e.closest('.cpf-type-product'),g.length&&(i=g.find(b.associateQtySelector),i.length&&(a.epoAPI.math.toFloat(i.val())>0?(d.removeClass('ignore'),i.removeClass('ignore')):(d.addClass('ignore'),i.addClass('ignore'))),j=g.data('isactive'),g=g.closest('.cpf-section'),k=g.data('isactive')),j!==!1&&k!==!1&&e.data('isactive')!==!1&&e.closest('.cpf-section').data('isactive')!==!1?(f=d.first(),d.prop('disabled',!1),d.data('tc-state')!==void 0&&d.data('tc-state',!1),c.tm_epo_show_only_active_quantities!=='yes'?f.is(':radio, .cpf-type-radio')||f.is(':checkbox, .cpf-type-checkbox')?(d.filter(':checked').closest('.tmcp-field-wrap').find('.tm-qty').prop('disabled',!1),d.not(':checked').closest('.tmcp-field-wrap').find('.tm-qty').prop('disabled',!0)):f.is('select, .cpf-type-select, .cpf-type-selectmultiple')?f.val()?h.find('.tm-qty').prop('disabled',!1):h.find('.tm-qty').prop('disabled',!0):f.val()?h.find('.tm-qty').prop('disabled',!1):h.find('.tm-qty').prop('disabled',!0):l||e.find('.tm-quantity').trigger('showhide.cpfcustom'),f.is('.cpf-element')||(d.removeClass('tcdisabled').addClass('tcenabled'),d.is('.tmcp-upload')&&d.next('.tmcp-upload-hidden').length&&d.next('.tmcp-upload-hidden').removeClass('tcdisabled').addClass('tcenabled').prop('disabled',!1)),e.removeClass('tc-container-disabled').addClass('tc-container-enabled'),d.trigger({type:'tm-field-is-active',field:d,value:!0}),!0):(d.is('.cpf-element')||(d.prop('disabled',!0).removeClass('tcenabled').addClass('tcdisabled'),d.data('tc-state')!==void 0&&d.data('tc-state',!0),e.find('.tm-qty').prop('disabled',!0),d.is('.tmcp-upload')&&d.next('.tmcp-upload-hidden').length&&d.next('.tmcp-upload-hidden').removeClass('tcenabled').addClass('tcdisabled').prop('disabled',!0)),e.removeClass('tc-container-enabled').addClass('tc-container-disabled'),d.trigger({type:'tm-field-is-active',field:d,value:!1}),!1)}function bh(f,b,k){var h=a(f),i=h.attr('data-epo_id'),j=h.attr('data-product_id'),d=a(".variations_form[data-epo_id='"+i+"'][data-product_id='"+j+"']"),g="input[name^='variation_id']",c,e;if(d=a.epoAPI.applyFilter('tm_variation_check_match_variationsForm',d,i,j,h),d.length===0)return!1;switch(e=d.find(g),e.length===0&&(g='input.variation_id',e=d.find(g),e.length===0&&(e=d.closest('.tc-epo-element-product-li-container').find('.product-variation-id'))),f!==null&&b!==null&&f!==void 0&&b!==void 0&&f!==!1&&b!==!1&&(b?b=parseInt(b,10):b=-1),c=parseInt(e.val(),10),Number.isFinite(c)||(c=''),Number.isFinite(b)||(b=''),k){case'is':return c!==''&&c===b;case'isnot':return c!==''&&c!==b;case'isempty':return c===''||c===0;case'isnotempty':return c!==''&&c!==0;case'startswith':return c.toString().startsWith(b);case'endswith':return c.toString().endsWith(b);case'greaterthan':return parseFloat(c)>parseFloat(b);case'lessthan':return parseFloat(c)<parseFloat(b);case'greaterthanequal':return parseFloat(c)>=parseFloat(b);case'lessthanequal':return parseFloat(c)<=parseFloat(b)}return!1}function H(b,c,d){if(b!==null&&c!==null)b=encodeURIComponent(b),a.qtranxj_split?c=encodeURIComponent(a.qtranxj_split(decodeURIComponent(c))[bB.language]):c=encodeURIComponent(decodeURIComponent(c)),b?b=b.toLowerCase():b='',c?c=c.toLowerCase():c='';else return!1;switch(b=b.toString(),c=c.toString(),d){case'is':return b!==null&&b===c;case'isnot':return b!==null&&b!==c;case'isempty':return!(b!=='undefined'&&b!==void 0&&b!=='');case'isnotempty':return b!=='undefined'&&b!==void 0&&b!=='';case'startswith':return b.startsWith(c);case'endswith':return b.endsWith(c);case'greaterthan':return parseFloat(b)>parseFloat(c);case'lessthan':return parseFloat(b)<parseFloat(c);case'greaterthanequal':return parseFloat(b)>=parseFloat(c);case'lessthanequal':return parseFloat(b)<=parseFloat(c)}return!1}function bg(h,d){var b=!0,i=h.find('.cpf-element'),g=!1,f,e,c;if(h.is('.tc-hidden')){if(d==='isnotempty')return!1;if(d==='isempty')return!0}return a(i).each(function(l,h){var k='',i;if(h=a(h),h.is('.cpf-type-product')&&(k=':not(.tc-extra-product-options-inline .tm-epo-field)'),j(h))if(i=h.attr('class').split(' ').map(function(a){return a.indexOf('cpf-type-',0)!==-1?a:null}).filter(function(a){return a!==null&&a!==void 0?a:null}),i.length>0){switch(i=i[0],i==='cpf-type-product'&&(g=!0,h.is('.cpf-type-product-mode-product')||h.is('.cpf-type-product-checkbox')||h.is('.cpf-type-product-thumbnailmultiple')?i='cpf-type-checkbox':h.is('.cpf-type-product-dropdown')?i='cpf-type-select':i='cpf-type-radio'),i){case'cpf-type-radio':f=h.find('input.tm-epo-field.tmcp-radio:checked'+k),d==='isnotempty'?(b=b&&f.length>0,f.length>0&&(c=f.length)):d==='isempty'&&(b=b&&f.length===0);break;case'cpf-type-checkbox':e=h.find('input.tm-epo-field.tmcp-checkbox:checked'+k),d==='isnotempty'?(b=b&&e.length>0,e.length>0&&(c=e.length)):d==='isempty'&&(b=b&&e.length===0);break;case'cpf-type-select':c=h.find('select.tm-epo-field.tmcp-select'+k).val(),c&&!g&&(c=c.slice(0,c.lastIndexOf('_')));break;case'cpf-type-selectmultiple':c=h.find('select.tm-epo-field.tmcp-selectmultiple'+k).val(),c&&!g&&c.forEach(function(a,b){c[b]=a.slice(0,a.lastIndexOf('_'))});break;default:c=h.find('.tm-epo-field'+k).val();break}Array.isArray(c)?b=b&&c.some(function(a){return H(a,'',d)}):b=b&&H(c,'',d)}else b=b&&!1}),b}function Y(l){var c=a(l.element),d=l.operator,k=l.value,h=!1,f='',g,j,e,b,i;if(!c.length)return!1;if(c.is('.cpf-section'))return bg(c,d);if(c.is('.cpf-type-product')&&(f=':not(.tc-extra-product-options-inline .tm-epo-field)'),e=c.attr('class').split(' ').map(function(a){return a.indexOf('cpf-type-',0)!==-1?a:null}).filter(function(a){return a!==null&&a!==void 0?a:null}),e.length>0){switch(e=e[0],e==='cpf-type-product'&&(h=!0,c.is('.cpf-type-product-mode-product')||c.is('.cpf-type-product-checkbox')||c.is('.cpf-type-product-thumbnailmultiple')?e='cpf-type-checkbox':c.is('.cpf-type-product-dropdown')?e='cpf-type-select':e='cpf-type-radio'),e){case'cpf-type-radio':if(i=c.find('input.tm-epo-field.tmcp-radio:checked'+f),d==='is'||d==='isnot'){if(i.length===0)return!1;b=c.find('input.tm-epo-field.tmcp-radio:checked'+f).val(),b&&!h&&(b=b.slice(0,b.lastIndexOf('_')))}if(d==='isnotempty')return i.length>0;if(d==='isempty')return i.length===0;break;case'cpf-type-checkbox':if(g=c.find('input.tm-epo-field.tmcp-checkbox:checked'+f),d==='is'||d==='isnot')return g.length!==0&&(j=!1,g.each(function(e,c){if(b=a(c).val(),b&&!h&&(b=b.slice(0,b.lastIndexOf('_'))),H(b,k,d))j=!0;else if(d==='isnot')return j=!1,!1}),j);if(d==='isnotempty')return g.length>0;if(d==='isempty')return g.length===0;break;case'cpf-type-select':b=c.find('select.tm-epo-field.tmcp-select'+f).val(),b&&!h&&(b=b.slice(0,b.lastIndexOf('_')));break;case'cpf-type-selectmultiple':b=c.find('select.tm-epo-field.tmcp-selectmultiple'+f).val(),b&&!h&&b.forEach(function(a,c){b[c]=a.slice(0,a.lastIndexOf('_'))});break;case'cpf-type-variations':return bh(c,k,d);default:b=c.find('.tm-epo-field'+f).val();break}return Array.isArray(b)?b.some(function(a){return H(a,k,d)}):H(b,k,d)}return!1}function aP(c,b){c.each(function(){var c=a(this),f=parseInt(c.data('matches'),10),g=c.data('toggle'),h=c.data('what'),i=c.data('fields'),e=0,d=!1;switch(g){case'show':d=!1;break;case'hide':d=!0;break}a.each(i,function(f,c){var d=!0;b==='cpflogic'&&(d=j(a(c.element))),d&&Y(c)&&(e=parseInt(e,10)+1)}),h==='all'?f===e&&(d=!d):e>0&&(d=!d),d?(b==='cpflogic'&&!c.data('did_initial_activation')&&_.push(function(){var b=c.find('.tm-epo-field.tcenabled');b.each(function(d,b){b=a(b),!b.data('initial_activation')&&!c.closest('.cpf-section').is('.tc-hidden')&&j(b)&&(b.trigger('tc_element_epo_rules'),b.data('initial_activation',1))}),(c.is('.cpf-element')&&b.length||c.is('.cpf-section'))&&c.data('did_initial_activation',1)}),c.removeClass('tc-hidden')):c.addClass('tc-hidden'),c.data('isactive',d),c.trigger('tc-logic')})}function w(b){var e=[],c;a(b).length||(b='body'),b=a(b),c=b.find('.iscpfdependson'),c.each(function(c,b){a(b).each(function(c,b){aP(a(b))})}),c.each(function(c,b){a(b).each(function(c,b){aP(a(b),'cpflogic')})}),c.each(function(c,b){a(b).each(function(c,b){b=a(b),b.is('.cpf-section')&&(b=b.find('.cpf-element')),b.each(function(c,b){j(a(b).find('.tm-epo-field'))})})}),_.forEach(function(a){a()}),_=[],a().selectric&&a('.tm-extra-product-options select').selectric('refresh'),setTimeout(function(){a('.tm-owl-slider').each(function(){a(this).trigger('refresh.owl.carousel')})},200),b.find('.tm-product-image:checked,select.tm-product-image').each(function(){var b=a(this);j(b)&&b.val()!==''&&e.push(b)}),e.length&&e[e.length-1].trigger('tm_trigger_product_image'),d.trigger('cpflogicrun'),d.trigger('tmlazy'),d.trigger('cpflogicdone')}a().cpfdependson||(a.fn.cpfdependson=function(b,c,f,h){var e=this,g=0;if(e.length===0||typeof b!='object')return;return c||(c='show'),f||(f='all'),a.each(b,function(i,f){var e,c;if(typeof b!='object')return!0;e=bp(f.element),e&&e.length>0&&(e.each(function(j,f){var b=a(f),e='change.cpflogic',i,g;(!c||c.closest('.tc-extra-product-options-inline').length)&&(g='.tm-product-id-'+b.closest('.tc-extra-product-options').attr('data-product-id'),i="[data-epo-id='"+b.closest('.tc-extra-product-options').attr('data-epo-id')+"']",c=a('.tc-extra-product-options'+g+i)),f&&b.length>0&&(!b.data('tmhaslogicevents')||h)&&(b.is('.tm-epo-variation-element')?(ao('found_variation.tmlogic',!1,function(){w(c),d.trigger('tm-do-epo-update')}),ao('hide_variation.tmlogic',!1,function(){w(c),d.trigger('tm-do-epo-update')})):((b.is(':text')||b.is('textarea'))&&(e='change.cpflogic input.cpflogic'),b.off(e).on(e,function(){w(c)})),b.data('tmhaslogicevents',1))}),g=parseInt(g,10)+1)}),e.each(function(){var d=a(this),e=!1;switch(d.data('matches',g).data('toggle',c).data('what',f).data('fields',b),c){case'show':e=!1;break;case'hide':e=!0;break}e?d.removeClass('tc-hidden'):d.addClass('tc-hidden'),d.data('isactive',e)}),e.addClass('iscpfdependson is-epo-depend').data('iscpfdependson',1),e},a.fn.run_cpfdependson=function(){w()}),a.tcepo={formSubmitEvents:{},oneOptionIsSelected:{},initialActivation:{},lateFieldsPrices:{},errorObject:{}};function ak(a){return typeof a=='object'&&'toggle'in a&&'what'in a&&'rules'in a&&a.rules.length>0}function X(q){var h=a(q),p=h.find('.cpf-section'),j,k,b,f,o,i,g,c,m,n,d,e,l;h.is('.cpf-section')?j=!1:j=p,h.each(function(q,p){a(p).is('.cpf-section')?k=a(p):k=a(p).find('.cpf-section'),k.filter('[data-haslogic="1"]').each(function(p,k){b=a(k),f=b.data('logic'),o=parseInt(b.data('haslogic'),10),i=[],l=b.parent().closest('.cpf-type-product'),o===1&&ak(f)&&(a.each(f.rules,function(b,a){a&&(g=a.section,c=a.element,m=a.operator,n=a.value,j?l.length?(d=l.find('.cpf-section').filter("[data-uniqid='"+g+"']"),c!==g?e=d.find('.cpf-element').eq(c):e=d):(d=j.filter("[data-uniqid='"+g+"']"),c!==g?e=d.find('.cpf-element:not(.cpf-element .cpf-element)').eq(c):e=d):c!==g?e=h.find('.cpf-element').eq(c):e=d,i.push({element:e,operator:m,value:n}))}),b.data('iscpfdependson')?b.cpfdependson(b.data('cpfdependson-fields'),f.toggle,f.what,!0):(b.data('cpfdependson-fields',i),b.cpfdependson(i,f.toggle,f.what)))})})}function ab(o){var i=a(o),n=i.find('.cpf-section').not('.cpf-type-product .cpf-section'),h,b,e,m,g,c,k,l,f,d,j;i.is('.cpf-section')?h=!1:h=n,i.find('.cpf-element[data-haslogic="1"]').each(function(p,o){var n=[];b=a(o),e=b.data('logic'),m=parseInt(b.data('haslogic'),10),j=b.parent().closest('.cpf-type-product'),m===1&&ak(e)&&(a.each(e.rules,function(b,a){a&&(g=a.section,c=a.element,k=a.operator,l=a.value,h?j.length?(f=j.find('.cpf-section').filter("[data-uniqid='"+g+"']"),c!==g?d=f.find('.cpf-element').eq(c):d=f):(f=h.filter("[data-uniqid='"+g+"']"),c!==g?d=f.find('.cpf-element:not(.cpf-element .cpf-element)').eq(c):d=f):c!==g?d=i.find('.cpf-element').eq(c):d=f,n.push({element:d,operator:k,value:l}))}),b.data('iscpfdependson')?b.cpfdependson(b.data('cpfdependson-fields'),e.toggle,e.what,!0):(b.data('cpfdependson-fields',n),b.cpfdependson(n,e.toggle,e.what)))})}function G(b,a,g){var c,d,e,f;return a&&(c=a.attr('data-taxable'),d=a.attr('data-tax-rate'),e=a.attr('data-tax-display-mode'),f=a.attr('data-prices-include-tax'),(g||c&&e==='incl'&&f!=='1')&&(b=parseFloat(b)/(1+d/100))),b}function ai(b,a,g){var c,d,e,f;return a&&(c=a.attr('data-taxable'),d=a.attr('data-tax-rate'),e=a.attr('data-tax-display-mode'),f=a.attr('data-prices-include-tax'),(g||c&&e!=='incl'&&f==='1')&&(b=parseFloat(b)*(1+d/100))),b}function ah(a,b,c){var f,d,e;if(b)if(f=b.attr('data-taxable'),d=b.attr('data-tax-display-mode'),e=b.attr('data-prices-include-tax'),f){if(c&&c.tc_tax_rate&&String(c.tc_tax_rate)==='0')return a;e==='1'?d!=='incl'&&(a=ai(a,b)):e!=='1'&&d==='incl'&&(a=G(a,b))}return a}function i(a,d,h,i,j){var b='',e='',f;return h||(a=g(a,d,j,void 0,!0)),f=Math.abs(a),d&&i&&(b=d.attr('data-tax-string')),b===void 0&&(b=''),a<0&&(e=c.minus_sign+' '),ay(f,e,b)}function p(b,d,a,c){return c.attr('data-tax-display-mode')==='excl'?(a[b]=a[b].replace(/{price_excluding_tax}/g,i(a[d],c,!0,!1)),a[b]=a[b].replace(/{price_including_tax}/g,i(ai(a[d],c,!0),c,!0,!1))):(a[b]=a[b].replace(/{price_including_tax}/g,i(a[d],c,!0,!1)),a[b]=a[b].replace(/{price_excluding_tax}/g,i(G(a[d],c,!0),c,!0,!1))),a}function K(a,b,c,d,e){A(a,b,c,d,e,!0)}function A(o,f,k,g,m,n){var d=a(o),j,h,l,e,i;if(d.length===0)return;if(j=d.closest('.tmcp-field-wrap'),i=d.closest('.tc-price-wrap'),e=j.find('.tm-epo-field'),!n&&e.attr('data-no-price-change')==='1'&&e.data('price-changed'))return;f=a.epoAPI.applyFilter('tc_adjust_update_price_price',f),k=a.epoAPI.applyFilter('tc_adjust_update_price_formated_price',k,f),g=a.epoAPI.applyFilter('tc_adjust_update_price_original_price',g),m=a.epoAPI.applyFilter('tc_adjust_update_price_original_formated_price',m,g),Number.isFinite(parseFloat(g))||(g=0),Number.isFinite(parseFloat(f))||(f=0),h=j.find('.before-amount,.after-amount'),l={price:k,original_price:m},c.tm_epo_auto_hide_price_if_zero==='yes'&&a.tmempty(f)===!1||c.tm_epo_auto_hide_price_if_zero!=='yes'?a.tmempty(f)===!0&&e.attr('data-no-price')==='1'||!n&&e.length>0&&(e.attr('data-no-price')==='1'||e.attr('data-type')==='variable'&&!e.data('price')||e.is('.tmcp-select')&&!e.children('option:selected').data('price'))?(i.addClass('tm-hidden'),d.addClass('tm-hidden'),d.empty(),h.addClass('tm-hidden')):(g&&g!==void 0&&parseFloat(g)!==parseFloat(f)?d.html(a.epoAPI.template.html(b.templateEngine.sale_price,{price:l})):d.html(a.epoAPI.template.html(b.templateEngine.price,{price:l})),i.removeClass('tm-hidden'),d.removeClass('tm-hidden'),h.removeClass('tm-hidden')):(i.addClass('tm-hidden'),d.addClass('tm-hidden'),d.empty(),h.addClass('tm-hidden'))}function bf(b,c){var d={};return c.thisForm&&(b=c.thisForm),b.find('.variations select, .tc-epo-variable-product-selector').each(function(){var b,c;typeof a(this).data('attribute_name')!='undefined'?b=a(this).data('attribute_name'):b=a(this).attr('name'),c=a(this).val(),d[b]=c}),d}function $(b,f,g){var c=[],h=bf(b,g),e=!0,d=b.find(N(b)).val();if(d=d!=='0'&&d!==''||b.find('.cpf-type-variations').find('.tm-epo-variation-element:checked').length>0||b.find('.cpf-type-variations').find('.tm-epo-variation-element option[value!=""]:selected'),!d)return;b.find('.cpf-type-variations').each(function(i,k){var d=a(k).find('.tm-epo-variation-element'),j=!1,g,e;c[i]=!0,d.is('select')?(e=a.epoAPI.dom.id(d.attr('data-tm-for-variation')),g=d.val(),g&&(c[i]=!1),d.children('option').each(function(d,c){j=!1,b.find("[data-attribute_name='attribute_"+e+"']").children('option').each(function(){if(a(this).attr('value')===a(c).attr('value'))return j=!0,!1}),j?a(c).prop('disabled',!1).show():a(c).prop('disabled',!0).hide()})):d.each(function(p,o){var b=a(o),d=b.closest('li'),j=d.find('.tm-epo-variation-element'),n=a.extend(!0,{},h),m,k,l;e=b.attr('data-tm-for-variation'),g=b.val(),b.is(':checked')&&(c[i]=!1),n['attribute_'+e]=g,m=a.fn.tm_find_matching_variations(f,n),k=m.shift(),l=k&&'is_in_stock'in k&&k.is_in_stock,l?(b.prop('disabled',!1).removeClass('tm-disabled'),d.removeClass('pointereventsoff tm-attribute-disabled').fadeTo('fast',1,function(){a(this).css('opacity','')}),j.prop('disabled',!1),j.removeAttr('data-tm-disabled')):(!j.is(':checked')&&!l?d.addClass('pointereventsoff'):d.removeClass('pointereventsoff'),b.attr('disabled','disabled').addClass('tm-disabled'),j.attr('disabled','disabled'),j.attr('data-tm-disabled','disabled'),d.addClass('tm-attribute-disabled').fadeTo('fast',.5))})}),c&&(c.shift(),a.each(c,function(b,a){if(a===!1)return e=!1,!1}),e&&b.find('.cpf-type-variations').first().each(function(f,e){var b=a(e).find('.tm-epo-variation-element'),c,d;b.is('select')||b.each(function(e,b){b=a(b),c=b.closest('li'),d=c.find('.tm-epo-variation-element'),b.prop('disabled',!1).removeClass('tm-disabled'),c.removeClass('tm-attribute-disabled').stop().css('opacity',''),d.prop('disabled',!1),d.removeAttr('data-tm-disabled')})}))}function al(d,h){var f=d.data('product_variations'),g=parseInt(d.data('product_id'),10),j=d.data('globalVariationObject')||!1,i;if(g||(g=d.data('tc_product_id')),!g&&d.is(b.compositeSelector)&&(i=d.find('.component_options').data('options_data'),g=i[0].option_id,f||(f=d.find('.details.component_data').data('product_variations'))),h.is_associated||(!f&&e.product_variations&&e.product_variations.product_id&&(f=e.product_variations.product_id),!f&&e.product_variations&&(f=e.product_variations),!f&&e['product_variations_'+g]&&(f=e['product_variations_'+g])),!f){j?$(d,j.variations,h):(i={action:'woocommerce_tm_get_variations_array',post_id:g},a.post(c.ajax_url,i,function(a){j=a,d.data('globalVariationObject',a),$(d,j.variations,h)},'json'));return}$(d,f,h)}function be(b,c){var d,e;return c!==void 0&&(b=a(b),d=b.find('.tm-epo-variation-element').first(),e=d.closest('.tm-epo-variation-section'),d.length?(e.find('.tm-stock').remove(),e.append('<div class="tm-stock">'+c+'</div>'),!0):(b.find('.tm-stock').remove(),b.find('.variations').after('<div class="tm-stock">'+c+'</div>'),!0))}function U(d,b){var a;if(c.tm_epo_global_move_out_of_stock==='no')return;a=d.find('.woocommerce-variation-availability').last(),a.length||(a=d.find('.stock').last()),a.length?(b.find('.tm-stock').remove(),be(b,a.prop('outerHTML'))&&a.remove()):b.find('.tm-stock').remove()}function by(f,a,e){var c='',d;return e&&(c=c+"[value='"+e+"']"),a||(a=f),d=a.find(b.addToCartSelector+c),d.length===0&&(d=a.find(b.tcAddToCartSelector+c)),d.last()}function ap(b,c,a,d){return a||(a='form'),by(b,c,d).closest(a)}function R(a,b,c,d){return ap(a,b,c,d)}function C(b){var c=a.epoAPI.applyFilter('tcGetNativePricesBlockSelector','.single_variation .price',b);return a(b).find(c).not('.tc-price')}function bd(){h.on('click.cpfurl change.cpfurl tmredirect','.tc-url-container .tmcp-radio, .tc-url-container .tmcp-radio+label',function(c){var b=a(this).attr('data-url');b&&e.location!==b&&(c.preventDefault(),e.location=b)}),h.on('change.cpfurl tmredirect','.tc-url-container .tmcp-select',function(c){var b=a(this).children('option:selected').attr('data-url');b&&e.location!==b&&(c.preventDefault(),e.location=b)})}function aY(b,c,d){a.tcFloatingTotalsBox(b,c,d)}function av(l,g,m,n){var j=!0,f,d,k,h,i,e;typeof g=='object'?(d=g.has_epo,k=g.this_epo_container,d=d&&(k.find('.tmcp-fee-field').length||k.find('.tmcp-field').not('.cpf-type-variations .tmcp-field').length)):d=g,d&&(c.tm_epo_hide_add_cart_button==='yes'||c.tm_epo_hide_all_add_cart_button==='yes'||c.tm_epo_hide_required_add_cart_button==='yes')&&(e=l.find(b.addToCartButtonSelector).first(),f=l.find(b.qtySelector).first(),c.tm_epo_hide_add_cart_button==='yes'&&(j=m,m?(e.removeClass('tc-hide-add-to-cart-button'),f.removeClass('tc-hide-add-to-cart-button')):(e.addClass('tc-hide-add-to-cart-button'),f.addClass('tc-hide-add-to-cart-button'))),c.tm_epo_hide_required_add_cart_button==='yes'&&(h=n.this_epo_container.find('.cpf-element').not('.cpf-type-variations').filter('.tc-container-enabled.tc-is-required'),i=h.toArray().every(function(b){var e='',f=!1,d,g,h,c;if(b=a(b),b.is('.cpf-type-product')&&(e=':not(.tc-extra-product-options-inline .tm-epo-field)'),d=b.attr('class').split(' ').map(function(a){return a.indexOf('cpf-type-',0)!==-1?a:null}).filter(function(a){return a!==null&&a!==void 0?a:null}),d.length>0){switch(d=d[0],d==='cpf-type-product'&&(f=!0,b.is('.cpf-type-product-mode-product')||b.is('.cpf-type-product-checkbox')||b.is('.cpf-type-product-thumbnailmultiple')?d='cpf-type-checkbox':b.is('.cpf-type-product-dropdown')?d='cpf-type-select':d='cpf-type-radio'),d){case'cpf-type-radio':return g=b.find('input.tm-epo-field.tmcp-radio:checked'+e),g.length>0;case'cpf-type-checkbox':return h=b.find('input.tm-epo-field.tmcp-checkbox:checked'+e),h.length>0;case'cpf-type-select':c=b.find('select.tm-epo-field.tmcp-select'+e).val(),c&&!f&&(c=c.slice(0,c.lastIndexOf('_')));break;case'cpf-type-selectmultiple':c=b.find('select.tm-epo-field.tmcp-selectmultiple'+e).val(),c&&!f&&c.forEach(function(a,b){c[b]=a.slice(0,a.lastIndexOf('_'))});break;default:c=b.find('.tm-epo-field'+e).val();break}return Array.isArray(c)?c.some(function(a){return a!==''}):c!==''}return!1}),j=i),c.tm_epo_hide_all_add_cart_button==='yes'&&(h=n.this_epo_container.find('.cpf-element').not('.cpf-type-variations').filter('.tc-container-enabled'),i=h.toArray().every(function(b){var e='',f=!1,d,g,h,c;if(b=a(b),b.is('.cpf-type-product')&&(e=':not(.tc-extra-product-options-inline .tm-epo-field)'),d=b.attr('class').split(' ').map(function(a){return a.indexOf('cpf-type-',0)!==-1?a:null}).filter(function(a){return a!==null&&a!==void 0?a:null}),d.length>0){switch(d=d[0],d==='cpf-type-product'&&(f=!0,b.is('.cpf-type-product-mode-product')||b.is('.cpf-type-product-checkbox')||b.is('.cpf-type-product-thumbnailmultiple')?d='cpf-type-checkbox':b.is('.cpf-type-product-dropdown')?d='cpf-type-select':d='cpf-type-radio'),d){case'cpf-type-radio':return g=b.find('input.tm-epo-field.tmcp-radio:checked'+e),g.length>0;case'cpf-type-checkbox':return h=b.find('input.tm-epo-field.tmcp-checkbox:checked'+e),h.length>0;case'cpf-type-select':c=b.find('select.tm-epo-field.tmcp-select'+e).val(),c&&!f&&(c=c.slice(0,c.lastIndexOf('_')));break;case'cpf-type-selectmultiple':c=b.find('select.tm-epo-field.tmcp-selectmultiple'+e).val(),c&&!f&&c.forEach(function(a,b){c[b]=a.slice(0,a.lastIndexOf('_'))});break;default:c=b.find('.tm-epo-field'+e).val();break}return Array.isArray(c)?c.some(function(a){return a!==''}):c!==''}return!1}),j=i),j?(e.removeClass('tc-hide-add-to-cart-button'),f.removeClass('tc-hide-add-to-cart-button')):(e.addClass('tc-hide-add-to-cart-button'),f.addClass('tc-hide-add-to-cart-button')))}function O(h,i){var f=a.tcepo.errorObject[i]||h,b,g,d,j;f&&(c.tm_epo_disable_error_scroll!=='yes'&&(b=f.closest('.cpf-section'),g=b.find('.tm-section-link'),d=f.closest('.cpf-element'),b.find('.tm-toggle').length&&b.find('.tm-toggle').trigger('openwrap.tmtoggle'),e.tc_validation_offset===void 0&&(e.tc_validation_offset=-100),b.is('.section_popup')?(E.tcScrollTo(g,300,e.tc_validation_offset),g.trigger('click.tmsectionpoplink')):b.is('.tm-owl-slider-section')?(j=f.closest('.owl-item').index(),b.find('.tcowl-carousel').trigger('to.owl.carousel',[j,100]),setTimeout(function(){b.find('.tcowl-carousel').trigger('refresh.owl.carousel'),d.length>0&&E.tcScrollTo(d,300,e.tc_validation_offset)},200)):d.length>0&&E.tcScrollTo(d,300,e.tc_validation_offset)),h||(a.tcepo.errorObject[i]=!1))}function Q(d,h){var f=parseInt(d.attr('data-limit'),10),b=!1,c,g,e;if(f>0)if(b=0,d.closest('.tm-extra-product-options-checkbox').find("input.tm-epo-field[type='checkbox']:checked").each(function(){g=a(this),e=g.closest('li.tmcp-field-wrap').find('input.tm-qty'),e.length>0?(c=parseInt(e.val(),10),c<=0&&(c=1),b=parseInt(b,10)+c):b=parseInt(b,10)+1}),b>f)return h&&d.prop('checked','').trigger('change'),!1;return!0}function T(d,h){var f=parseInt(d.attr('data-exactlimit'),10),b=!1,c,g,e;if(f>0)if(b=0,d.closest('.tm-extra-product-options-checkbox').find("input.tm-epo-field[type='checkbox']:checked").each(function(){g=a(this),e=g.closest('li.tmcp-field-wrap').find('input.tm-qty'),e.length>0?(c=parseInt(e.val(),10),c<=0&&(c=1),b=parseInt(b,10)+c):b=parseInt(b,10)+1}),b>f)return h&&d.prop('checked','').trigger('change'),!1;return!0}function aX(s,r,q){var o=!0,l=!1,i,f,e,n,h,m,p,g,k,d;return s.each(function(){d=a(this),i=d.find("[type='checkbox'][data-limit]"),i.length&&j(i)&&(f=parseInt(i.attr('data-limit'),10),e=0,d.find("input.tm-epo-field[type='checkbox']:checked").each(function(){n=a(this),m=n.closest('li.tmcp-field-wrap').find('input.tm-qty'),m.length>0?(h=parseInt(m.val(),10),h<=0&&(h=1),e=parseInt(e,10)+h):e=parseInt(e,10)+1}),p=d.closest('.cpf-element'),g=p.find('div.tm-error-min'),f<e?(o=!1,l=d,f===1?k=c.tm_epo_global_validator_messages.epolimitsingle.replace('{0}',f):k=c.tm_epo_global_validator_messages.epolimit.replace('{0}',f),g.length&&g.remove(),c.tm_epo_global_error_label_placement==='before'?d.closest('.tc-element-container').before('<div class="tm-error-min tm-error tc-cell tcwidth-100">'+k+'</div>'):d.closest('.tc-element-container').after('<div class="tm-error-min tm-error tc-cell tcwidth-100">'+k+'</div>'),r.find(b.addToCartButtonSelector).first().removeClass('disabled loading fpd-disabled').prop('disabled',!1)):g.remove())}),l&&(a.tcepo.errorObject[q]=l),o}function aW(c,d,b){a.tcepo.formSubmitEvents[b][a.tcepo.formSubmitEvents[b].length]={trigger:function(){return aX(c,d,b)},on_true:function(){return!0},on_false:function(){return O(a(c).find('.tm-epo-field').first(),b),!0}}}function aV(s,r,q){var o=!0,l=!1,i,f,e,n,h,m,p,g,k,d;return s.each(function(){d=a(this),i=d.find("[type='checkbox'][data-exactlimit]"),i.length&&j(i)&&(f=parseInt(i.attr('data-exactlimit'),10),e=0,d.find("input.tm-epo-field[type='checkbox']:checked").each(function(){n=a(this),m=n.closest('li.tmcp-field-wrap').find('input.tm-qty'),m.length>0?(h=parseInt(m.val(),10),h<=0&&(h=1),e=parseInt(e,10)+h):e=parseInt(e,10)+1}),p=d.closest('.cpf-element'),g=p.find('div.tm-error-min'),f!==e?(o=!1,l=d,f===1?k=c.tm_epo_global_validator_messages.epoexactsingle.replace('{0}',f):k=c.tm_epo_global_validator_messages.epoexact.replace('{0}',f),g.length&&g.remove(),c.tm_epo_global_error_label_placement==='before'?d.closest('.tc-element-container').before('<div class="tm-error-min tm-error tc-cell tcwidth-100">'+k+'</div>'):d.closest('.tc-element-container').after('<div class="tm-error-min tm-error tc-cell tcwidth-100">'+k+'</div>'),r.find(b.addToCartButtonSelector).first().removeClass('disabled loading fpd-disabled').prop('disabled',!1)):g.remove())}),l&&(a.tcepo.errorObject[q]=l),o}function aU(c,d,b){a.tcepo.formSubmitEvents[b][a.tcepo.formSubmitEvents[b].length]={trigger:function(){return aV(c,d,b)},on_true:function(){return!0},on_false:function(){return O(a(c).find('.tm-epo-field').first(),b),!0}}}function aT(p,o){var n=!0,i=!1,e,d,l,h,k,m,g,f,b;return p.each(function(){var o;b=a(this),o=b.find("[type='checkbox'][data-minimumlimit]"),o.length&&j(o)&&(e=parseInt(o.attr('data-minimumlimit'),10),d=0,b.find("input.tm-epo-field[type='checkbox']:checked").each(function(){l=a(this),k=l.closest('li.tmcp-field-wrap').find('input.tm-qty'),k.length>0?(h=parseInt(k.val(),10),h<=0&&(h=1),d=parseInt(d,10)+h):d=parseInt(d,10)+1}),m=b.closest('.cpf-element'),g=m.find('div.tm-error-min'),e>d?(n=!1,i=b,e===1?f=c.tm_epo_global_validator_messages.epominsingle.replace('{0}',e):f=c.tm_epo_global_validator_messages.epomin.replace('{0}',e),g.length&&g.remove(),c.tm_epo_global_error_label_placement==='before'?b.closest('.tc-element-container').before('<div class="tm-error-min tm-error tc-cell tcwidth-100">'+f+'</div>'):b.closest('.tc-element-container').after('<div class="tm-error-min tm-error tc-cell tcwidth-100">'+f+'</div>')):g.remove())}),i&&(a.tcepo.errorObject[o]=i),n}function aS(c,b){a.tcepo.formSubmitEvents[b][a.tcepo.formSubmitEvents[b].length]={trigger:function(){return aT(c,b)},on_true:function(){return!0},on_false:function(){return O(!1,b),!0}}}function Z(a){return a===null?0:(typeof a=='object'&&(a=a[0]),Number.isFinite(parseFloat(a))||(a=0),a)}function f(b,d,c,e){return b=Z(b),c&&(b=a.epoAPI.applyFilter('tc_apply_dpd',b,d,c,e)),b}function aa(c,d){var b=0;return!(c.length>0&&(b=c.data('regular-price')),b=a.epoAPI.applyFilter('tc_calculate_product_regular_price',b,c),d&&b===!1)&&(b=parseFloat(b),Number.isFinite(b)||(b=0),b)}function ad(c,d){var b=0;return!(c.length>0&&(b=c.data('price')),b=a.epoAPI.applyFilter('tc_calculate_product_price',b,c),d&&b===!1)&&(b=parseFloat(b),Number.isFinite(b)||(b=0),b)}function aJ(E,f,j,B,C){var e=E.toString(),g=0,x=0,w=f.closest('.cpf-element').attr('data-uniqid'),n=f.closest('.tmcp-ul-wrap'),s=j.this_epo_totals_container.data('totalsHolder_tc_totals_ob'),A=n.find('.tmcp-field, .tmcp-fee-field').filter(':checked').index(f),k=n.find('.tmcp-field, .tmcp-fee-field').index(f),D=j.is_associated?j.this_epo_container:j.this_epo_container.not(b.epoSelector+' '+b.associatedEpoSelector),q=a.epoAPI.util.parseJSON(c.tm_epo_math)||{},y,l,h,o,p,t,u,z,v,i;A===-1&&!f.is('.tmcp-checkbox, .tmcp-radio')&&(A=0),!f.is('.tcdisabled')&&!B&&!f.data('addedtcEpoBeforeOptionPriceCalculation')&&(d.on('tcEpoBeforeOptionPriceCalculation.math'+w,function(){r(j,f,void 0,void 0,void 0,!0)}),d.on('tcEpoAfterOptionPriceCalculation.math'+w,function(){f.data('fetchOptionPrices',!1),f.data('fetchOptionPrices-forced',!1),f.data('fetchOptionPrices-fee',!1),f.data('fetchOptionPrices-fee-forced',!1),f.data('fetchOptionPrices-sub-fee',!1),f.data('fetchOptionPrices-sub-fee-forced',!1)}),f.data('addedtcEpoBeforeOptionPriceCalculation',1)),f.is('.tmcp-field')?f.data('fetchOptionPrices')?(l=f.data('fetchOptionPrices'),h=f.data('fetchOptionPrices-forced')):(l=m(j,n,'.tmcp-field',0,0,[],!0),h=m(j,n,'.tmcp-field',0,0,[],!0,!0),f.data('fetchOptionPrices',l),f.data('fetchOptionPrices-forced',h)):f.is('.tmcp-fee-field')?f.data('fetchOptionPrices-fee')?(l=f.data('fetchOptionPrices-fee'),h=f.data('fetchOptionPrices-fee-forced')):(l=m(j,n,'.tmcp-fee-field',0,0,[],!0),h=m(j,n,'.tmcp-fee-field',0,0,[],!0,!0),f.data('fetchOptionPrices-fee',l),f.data('fetchOptionPrices-fee-forced',h)):f.is('.tmcp-sub-fee-field')&&(f.data('fetchOptionPrices-sub-fee')?(l=f.data('fetchOptionPrices-sub-fee'),h=f.data('fetchOptionPrices-sub-fee-forced')):(l=m(j,n,'.tmcp-sub-fee-field',0,0,[],!0),h=m(j,n,'.tmcp-sub-fee-field',0,0,[],!0,!0),f.data('fetchOptionPrices-sub-fee',l),f.data('fetchOptionPrices-sub-fee-forced',h))),Object.keys(q).forEach(function(c){var b,d;q[c].name!==''&&q[c].value!==''&&(b=q[c].name,d=q[c].value,q[c].name.isNumeric()?e=e.replace('{'+b+'}',d):(b=new RegExp('{'+b+'}','g'),d.startsWith('{')?e=e.replace(b,d):e=e.replace(b,a.epoAPI.math.unformat(d.replace(',','.')))))}),s!==void 0?(e=e.replace(/{quantity}/g,a.epoAPI.math.unformat(s.qty)),C&&s.original_product_price!==void 0?e=e.replace(/{product_price}/g,a.epoAPI.math.unformat(s.original_product_price)):e=e.replace(/{product_price}/g,a.epoAPI.math.unformat(s.product_price))):(e=e.replace(/{quantity}/g,0),e=e.replace(/{product_price}/g,0)),h.floatingBoxData!==void 0&&h.floatingBoxData[k]!==void 0?(h.floatingBoxData[k].input_type==='number'?e=e.replace(/{this.value}/g,a.epoAPI.math.toFloat(a.epoAPI.math.unformat(h.floatingBoxData[k].valueText))):e=e.replace(/{this.value}/g,a.epoAPI.math.toFloat(a.epoAPI.math.unformat(h.floatingBoxData[k].valueText,b.localDecimalSeparator))),h.floatingBoxData[k].input_type==='number'?e=e.replace(/{this.rawvalue}/g,a.epoAPI.math.unformat(h.floatingBoxData[k].valueText)):e=e.replace(/{this.rawvalue}/g,a.epoAPI.math.unformat(h.floatingBoxData[k].valueText,b.localDecimalSeparator)),h.floatingBoxData[k].input_type==='number'?e=e.replace(/{this.text}/g,a.epoAPI.math.unformat(h.floatingBoxData[k].valueText)):e=e.replace(/{this.text}/g,a.epoAPI.math.unformat(h.floatingBoxData[k].valueText,b.localDecimalSeparator)),e=e.replace(/{this.value.length}/g,h.floatingBoxData[k].valueText.length)):e=e.replace(/{this.value}/g,0).replace(/{this.rawvalue}/g,'').replace(/{this.text}/g,'').replace(/{this.value.length}/g,0),e=e.replace(/{this.count}/g,l.floatingBoxData.length).replace(/{this.count.quantity}/g,l.floatingBoxData.map(function(a){return a.quantity}).reduce(function(b,c){return a.epoAPI.math.toFloat(b)+a.epoAPI.math.toFloat(c)},0)).replace(/{this.quantity}/g,f.data('tm-quantity')),e.match(/\{(\s)*?field\.([^}]*)}/)&&(z=e.match(/\{(\s)*?field\.([^}]*)}/g),z.forEach(function(c){if(o=c.match(/\{(\s)*?field\.([^}]*)}/),void 0!==o[2]&&'string'==typeof o[2])if(v=o[2].indexOf('.',o[2].indexOf('.')+1),v!==-1)if(y=o[2].substring(0,v),i=o[2].substring(v+1),a.inArray(i,['price','value','value.length','rawvalue','text','text.length','quantity','count','count.quantity'])!==-1){if(p=D.find("[data-uniqid='"+a.epoAPI.util.escapeSelector(y)+"']"),p.length){if(t=p.find('.tmcp-field, .tmcp-fee-field'),!f.is('.tcdisabled')&&!B&&!f.data('addedfieldtcEpoBeforeOptionPriceCalculation')&&(d.on('tcEpoBeforeOptionPriceCalculation.math'+w,function(){r(j,f,void 0,void 0,void 0,!0),f.trigger('tm-math-select-change-html-all')}),f.data('addedfieldtcEpoBeforeOptionPriceCalculation',1)),t=t.first(),g=0,p.is('.tc-container-enabled')){switch(t.is('.tmcp-field')?g=m(j,p,'.tmcp-field',0,0,[],!0,void 0,void 0,!0):t.is('.tmcp-fee-field')&&(g=m(j,p,'.tmcp-fee-field',0,0,[],!0,void 0,void 0,!0)),i){case'price':g=g.total;break;case'value':case'text':case'rawvalue':g.floatingBoxData&&(g=g.floatingBoxData.map(function(c){return c.input_type==='number'?i==='text'||i==='rawvalue'?c.valueText:a.epoAPI.math.unformat(c.valueText):i==='text'||i==='rawvalue'?c.valueText:a.epoAPI.math.unformat(c.valueText,b.localInputDecimalSeparator)}).reduce(function(b,c){return i==='text'||i==='rawvalue'?b+c:a.epoAPI.math.toFloat(b)+a.epoAPI.math.toFloat(c)},i==='text'||i==='rawvalue'?'':0),(i==='text'||i==='rawvalue')&&(g===''?g="''":g.toString().isNumeric()||(g="'"+g+"'")));break;case'value.length':case'text.length':g.floatingBoxData&&(g=g.floatingBoxData.map(function(a){return a.valueText}).reduce(function(b,c){return a.epoAPI.math.toFloat(b)+c.length},0));break;case'quantity':case'count.quantity':g.floatingBoxData&&(g=g.floatingBoxData.map(function(a){return a.quantity}).reduce(function(b,c){return a.epoAPI.math.toFloat(b)+a.epoAPI.math.toFloat(c)},0));break;case'count':g.floatingBoxData&&(g=g.floatingBoxData.length);break}i!=='text'&&i!=='rawvalue'&&(g=a.epoAPI.math.toFloat(g),Number.isFinite(g)||(g=0))}}else g=0;u=new RegExp(o[0]),i==='text'||i==='rawvalue'?e=e.replace(u,g):e=Number.isFinite(g)?e.replace(u,g):e.replace(u,"'"+g+"'")}}));try{x=bz.evaluate(e)}catch(a){x=0}return x}function aR(l,m){var f=a(m),j=f,i=l.main_cart,k="input[name^='variation_id']",g,b,e,c,d,h;return i.find('input.variation_id').length>0&&(k='input.variation_id'),d=i.find(k).val(),d||(d=0),f.is('select')&&(j=f.find('option:selected')),g=a.epoAPI.util.parseJSON(j.attr('data-rules')),b=a.epoAPI.util.parseJSON(j.attr('data-rulestype')),c='',typeof g=='object'?typeof b=='object'?d in b?c=b[d]:(e=a.epoAPI.util.parseJSON(f.closest('.tmcp-ul-wrap').attr('data-rulestype')),typeof e=='object'?d in e?c=e[d]:c=b[0]:c=b[0]):(b=a.epoAPI.util.parseJSON(f.closest('.tmcp-ul-wrap').attr('data-ulestype')),typeof b=='object'&&(d in b?c=b[d]:c=b[0])):(h=f.closest('.tmcp-ul-wrap'),g=a.epoAPI.util.parseJSON(h.attr('data-rules')),typeof g=='object'&&(typeof b=='object'?d in b?c=b[d]:(e=a.epoAPI.util.parseJSON(h.attr('data-rulestype')),typeof e=='object'?d in e?c=e[d]:c=b[0]:c=b[0]):(b=a.epoAPI.util.parseJSON(h.attr('data-rulestype')),typeof b=='object'&&(d in b?c=b[d]:c=b[0])))),typeof c=='object'&&(c=c[0]),f.is('.tmcp-fee-field')&&a.inArray(c,['fee','stepfee','currentstepfee'])!==-1&&(c=''),c}function u(d){for(var a=new RegExp(/[\p{L}\d!@#$%^&*()_+=\{[\}\]|\\"':;?/>.<,-]+/,'gu'),c=0,b;(b=a.exec(d))!==null;)b.index===a.lastIndex&&a.lastIndex++,c=c+b.length;return c}function r(y,_,w,Q,W,Y){var i=a(_),S=i,U=i.is('.tmcp-range'),X=y.main_product,V=y.epoEventId,R=!0,L=0,N=0,v,s,r,p,t,K,x,J,m,b,d,H,I,T,O,e,o,M,n,B,P,G,z,h,j,q,C,F,l,E,D;if(i.data('associated_price_set'))return;if(w?(s=w.cart,n=w.current_variation,B=w.bundleid,h=w.epoTotalsContainer,q=w.product_price,v=w.product_original_price,j=w.apply_dpd,R=w.per_product_pricing):(s=y.main_cart,s.data('per_product_pricing')!==void 0&&(R=s.data('per_product_pricing')),P="input[name^='variation_id']",s.find('input.variation_id').length>0&&(P='input.variation_id'),n=s.find(P).val(),B=a.epoAPI.applyFilter('tc_get_bundleid',s.attr('data-product_id'),s,y),n||(n=0),h=a.epoAPI.applyFilter('tc_get_totals_container',y.this_epo_totals_container,i,X,B),q=ad(h),v=aa(h),j=h.data('fields-price-rules')),q=a.epoAPI.applyFilter('tc_alter_product_price',q,i,s,h,B),v=a.epoAPI.applyFilter('tc_alter_product_original_price',v,i,s,h),q===!1||!R)return;i.is('select')&&(S=i.find('option:selected')),Q&&(S=Q),S.toArray().forEach(function(w){switch(w=a(w),r=a.epoAPI.util.parseJSON(w.attr('data-rules')),p=a.epoAPI.util.parseJSON(w.attr('data-rulestype')),t=a.epoAPI.util.parseJSON(w.attr('data-original-rules')),t===void 0&&(t=r),m='',typeof r=='object'?(n in r?(b=r[n],d=t[n]):(K=a.epoAPI.util.parseJSON(i.closest('.tmcp-ul-wrap').attr('data-rules')),J=i.closest('.tmcp-ul-wrap').data('original-rules'),typeof K=='object'?n in K?b=K[n]:b=r[0]:b=r[0],typeof J=='object'?n in J?d=J[n]:d=t[0]:d=t[0]),typeof p=='object'?n in p?m=p[n]:(x=a.epoAPI.util.parseJSON(i.closest('.tmcp-ul-wrap').attr('data-rulestype')),typeof x=='object'?n in x?m=x[n]:m=p[0]:m=p[0]):(p=a.epoAPI.util.parseJSON(i.closest('.tmcp-ul-wrap').attr('data-ulestype')),typeof p=='object'&&(n in p?m=p[n]:m=p[0]))):(G=i.closest('.tmcp-ul-wrap'),r=a.epoAPI.util.parseJSON(G.attr('data-rules')),t=a.epoAPI.util.parseJSON(G.attr('data-original-rules')),typeof r=='object'&&(n in r?b=r[n]:b=r[0],typeof t=='object'?n in t?d=t[n]:d=t[0]:d=b,typeof p=='object'?n in p?m=p[n]:(x=a.epoAPI.util.parseJSON(G.attr('data-rulestype')),typeof x=='object'?n in x?m=x[n]:m=p[0]:m=p[0]):(p=a.epoAPI.util.parseJSON(G.attr('data-rulestype')),typeof p=='object'&&(n in p?m=p[n]:m=p[0])))),typeof m=='object'&&(m=m[0]),i.is('.tmcp-fee-field')&&(a.inArray(m,['fee','stepfee','currentstepfee'])!==-1&&(m=''),j=0),W===void 0&&(i.is('select')?i.find('option').removeClass('tm-epo-late-field').removeData('tm-price-for-late islate'):w.removeClass('tm-epo-late-field').removeData('tm-price-for-late islate')),m!=='math'&&(b=Z(b),d=Z(d)),C=b,F=d,m){case'':l=b,b=f(b,h,j);break;case'math':b=aJ(b,i,y,Y,a.epoAPI.applyFilter('tc_use_undiscounted_price',void 0,i,s,h)),l=b,b=f(b,h,j),d=aJ(d,i,y,!0,!0);break;case'percent_cart_total':z=parseFloat(c.cart_total),Number.isFinite(z)||(z=0),l=b/100*z,b=f(b,h,j)/100*z,d=f(d,h,j)/100*z;break;case'percent':l=b/100*q,b=f(b,h,j)/100*q,d=d/100*v;break;case'percentcurrenttotal':a.tcepo.lateFieldsPrices[V].push({setter:w,price:b,original_price:d,bundleid:B,pricetype:m}),w.data('tm-price-for-late',b).data('tm-original-price-for-late',d).data('islate',1).addClass('tm-epo-late-field'),l=0,b=0,d=0;break;case'fixedcurrenttotal':b=f(b,h,j),a.tcepo.lateFieldsPrices[V].push({setter:w,price:b,original_price:d,bundleid:B,pricetype:m}),w.data('tm-price-for-late',b).data('tm-original-price-for-late',d).data('islate',1).addClass('tm-epo-late-field'),l=0,b=0,d=0;break;case'word':l=b*u(w.val()),b=f(b,h,j)*u(w.val()),d=d*u(w.val());break;case'wordpercent':l=b/100*q*u(w.val()),b=f(b,h,j)/100*q*u(w.val()),d=d/100*v*u(w.val());break;case'wordnon':o=parseInt(w.attr('data-freechars'),10),Number.isFinite(o)||(o=0),e=u(w.val())-o,e<0&&(e=0),l=b*e,b=f(b,h,j)*e,d=d*e;break;case'wordpercentnon':o=parseInt(w.attr('data-freechars'),10),Number.isFinite(o)||(o=0),e=u(w.val())-o,e<0&&(e=0),l=b/100*q*e,b=f(b,h,j)/100*q*e,d=d/100*v*e;break;case'char':l=b*w.val().length,b=f(b,h,j)*w.val().length,d=d*w.val().length;break;case'charpercent':l=b/100*q*w.val().length,b=f(b,h,j)/100*q*w.val().length,d=d/100*v*w.val().length;break;case'charnospaces':l=b*w.val().replace(/\s/g,'').length,b=f(b,h,j)*w.val().replace(/\s/g,'').length,d=d*w.val().replace(/\s/g,'').length;break;case'charnofirst':e=w.val().length-1,e<0&&(e=0),l=b*e,b=f(b,h,j)*e,d=d*e;break;case'charnon':o=parseInt(w.attr('data-freechars'),10),Number.isFinite(o)||(o=0),e=w.val().length-o,e<0&&(e=0),l=b*e,b=f(b,h,j)*e,d=d*e;break;case'charpercentnon':o=parseInt(w.attr('data-freechars'),10),Number.isFinite(o)||(o=0),e=w.val().length-o,e<0&&(e=0),l=b/100*q*e,b=f(b,h,j)/100*q*e,d=d/100*v*e;break;case'charnonnospaces':o=parseInt(w.attr('data-freechars'),10),Number.isFinite(o)||(o=0),e=w.val().replace(/\s/g,'').length-o,e<0&&(e=0),l=b*e,b=f(b,h,j)*e,d=d*e;break;case'charpercentnonnospaces':o=parseInt(w.attr('data-freechars'),10),Number.isFinite(o)||(o=0),e=w.val().replace(/\s/g,'').length-o,e<0&&(e=0),l=b/100*q*e,b=f(b,h,j)/100*q*e,d=d/100*v*e;break;case'charpercentnofirst':e=w.val().length-1,e<0&&(e=0),l=b/100*q*e,b=f(b,h,j)/100*q*e,d=d/100*v*e;break;case'step':U?(l=b*w.val(),b=f(b,h,j)*w.val(),d=d*a.epoAPI.math.toFloat(w.val())):(l=b*a.epoAPI.math.toFloat(w.val()),b=f(b,h,j)*a.epoAPI.math.toFloat(w.val()),d=d*a.epoAPI.math.toFloat(w.val()));break;case'currentstep':U?(l=w.val(),b=f(w.val(),h,j),d=f(w.val(),h,j)):(l=a.epoAPI.math.toFloat(w.val()),b=f(a.epoAPI.math.toFloat(w.val()),h,j),d=f(a.epoAPI.math.toFloat(w.val()),h,j));break;case'intervalstep':U&&(M=parseFloat(a('.tm-range-picker[data-field-id="'+w.attr('id')+'"]').attr('data-min')),l=b*(w.val()-M),b=f(b,h,j)*(w.val()-M),d=d*(w.val()-M));break;case'row':l=b*((w.val().match(/(\r\n|\n|\r)/gm)||[]).length+1),b=f(b,h,j)*((w.val().match(/(\r\n|\n|\r)/gm)||[]).length+1),d=d*((w.val().match(/(\r\n|\n|\r)/gm)||[]).length+1);break}H=b,I=d,E=d,C=l,F=E,i.data('tm-quantity')&&(l=l*parseFloat(i.data('tm-quantity')),E=E*parseFloat(i.data('tm-quantity')),C=C*parseFloat(i.data('tm-quantity')),F=F*parseFloat(i.data('tm-quantity')),b=b*parseFloat(i.data('tm-quantity')),d=d*parseFloat(i.data('tm-quantity')),H=H*parseFloat(i.data('tm-quantity')),I=I*parseFloat(i.data('tm-quantity'))),L=L+parseFloat(b),N=N+parseFloat(d),T=k(L,h,!1,!1,w,m),O=k(N,h,!1,!1,w,m),i.data('price_set',1),w.data('price_set',1),w.data('undiscounted_raw_price',C),w.data('undiscounted_raw_original_price',F),w.data('undiscounted_price',g(l,h,w,m)),w.data('undiscounted_original_price',g(E,h,w,m)),w.data('raw_price',H),w.data('raw_original_price',I),w.data('price',g(b,h,w,m)),w.data('original_price',g(d,h,w,m)),Q||(i.is('.tc-epo-field-product')&&(D=!1,i.is('select')?i.val()!==''&&(D=!0):i.is(':checkbox')||i.is(':radio')?i.is(':checked')&&(D=!0):i.val()!==''&&(D=!0),D||(T=w.data('price-html'),O='')),A(w.closest('.tmcp-field-wrap').find('.tc-price'),L,T,N,O),i.data('price-changed',1))})}function ae(e,z){var o=!0,x=e.main_product,w=e.epoEventId,F=e.this_epo_container,G=e.this_epo_totals_container,h,c,p,n,q,m,E,i,D,y,C,d,B,u,v,s,l,t;if(z?s=z:s=x.find('.cart'),s.length<=0)return;a.tcepo.lateFieldsPrices[w]=[],s.toArray().forEach(function(s){if(s=a(s),v="input[name^='variation_id']",s.find('input.variation_id').length>0&&(v='input.variation_id'),s.data('per_product_pricing')!==void 0&&(o=s.data('per_product_pricing')),l=s.find(v).val(),t=a.epoAPI.applyFilter('tc_get_bundleid',s.attr('data-product_id'),s,e),l||(l=0),h=a.epoAPI.applyFilter('tc_get_epo_container',F,s,x,t),c=a.epoAPI.applyFilter('tc_get_totals_container',G,s,x,t),p=c.data('fields-price-rules'),h.data('tm_rules_init_done')||(c.data('force-quantity')&&s.find(b.qtySelector).val(c.data('force-quantity')),h.toArray().forEach(function(b){a(b).closest('.tmcp-field-wrap').find('.tm-epo-field').data('tm-quantity',a(b).val())}),h.find('.tmcp-attributes, .tmcp-elements').toArray().forEach(function(b){b=a(b),n=a.epoAPI.util.parseJSON(b.attr('data-rules')),q=a.epoAPI.util.parseJSON(b.attr('data-original-rules')),typeof n!='object'&&(n={0:'0'}),typeof q!='object'&&(q={0:'0'}),typeof n=='object'&&(m=f(n[a.epoAPI.math.toFloat(l)],c,p),E=k(m,c),i=f(q[a.epoAPI.math.toFloat(l)],c,p),D=k(i,c),b.find('.tmcp-field, .tmcp-fee-field ').toArray().forEach(function(b){b=a(b),o?(b.attr('data-no-price')==='1'&&(m=0,i=0),b.data('raw_price',m),b.data('raw_original_price',i),b.data('price',g(m,c,b)),b.data('original_price',g(i,c,b)),A(b.closest('.tmcp-field-wrap').find('.tc-price'),m,E,i,D)):(b.data('price',0),b.data('original_price',0),b.closest('.tmcp-field-wrap').find('.amount').empty())}))}),h.data('tm_rules_init_done',1)),!o)return!0;y=ad(c),C=aa(c),u={cart:s,current_variation:l,bundleid:t,epoTotalsContainer:c,product_price:y,product_original_price:C,apply_dpd:p,per_product_pricing:o},d=h.find('.tmcp-field,.tmcp-sub-fee-field,.tmcp-fee-field'),e.is_associated||(d=d.not(b.associatedEpoSelector+' '+'.tmcp-field,'+b.associatedEpoSelector+' '+'.tmcp-sub-fee-field,'+b.associatedEpoSelector+' '+'.tmcp-fee-field')),B=d.filter('.tcenabled'),(!a.tcepo.initialActivation[w]||B.length===0&&d.length>0)&&(d.each(function(){j(a(this))}),a.tcepo.initialActivation[w]=!0),d.filter('.tcenabled').each(function(b,a){r(e,a,u)}),d.each(function(c,b){a(b).on('tc_element_epo_rules',function(){r(e,b,u)})})})}function ar(m,I,H,F,E,x,c,B){var v=0,w=0,J=m.epoEventId,e,r,b,u,t,z,h,D,C,n,l,d,o,p,i,q,s,y;return B!==void 0?y=B:y=m.this_epo_totals_container.data('fields-price-rules'),q=I,s=H,a.tcepo.lateFieldsPrices[J].forEach(function(B){d=B.price,e=B.original_price,r=B.pricetype,b=B.setter,z=B.bundleid,h=b,r==='percentcurrenttotal'?i='_hidden':i='_hiddenfixed',b.is('option')&&(h=b.closest('select')),q=parseFloat(a.epoAPI.applyFilter('tc_alter_product_price',q,h,c,m.this_epo_totals_container,x)),s=parseFloat(a.epoAPI.applyFilter('tc_alter_original_product_price',s,h,c,m.this_epo_totals_container,x)),u=a.epoAPI.dom.id(h.attr('name')),D=a('.tc-totals-form.tm-totals-form-'+c.attr('data-cart-id')).attr('data-product-id'),C=a('.tc-totals-form.tm-totals-form-'+c.attr('data-cart-id')).attr('data-epo-id'),t=a('.tc-extra-product-options.tm-product-id-'+D+"[data-epo-id='"+C+"']").find('#'+u+i),z===x?(r==='percentcurrenttotal'?(d=parseFloat(d)/100*(f(parseFloat(q),m.this_epo_totals_container,y)+parseFloat(F)),e=parseFloat(e)/100*(parseFloat(s)+parseFloat(E))):r==='fixedcurrenttotal'&&(d=parseFloat(d)+parseFloat(F),e=parseFloat(e)+parseFloat(E)),h.data('tm-quantity')&&(d=d*parseFloat(h.data('tm-quantity')),e=e*parseFloat(h.data('tm-quantity'))),b.data('isset')===1&&j(b)&&(v=v+d,w=w+e),o=g(d,c,b),p=g(e,c,b),n=k(d,c,!1,!1,b),l=k(e,c,!1,!1,b),b.data('price',o),b.data('pricew',o),b.data('original_price',p),b.data('original_pricew',p),A(b.closest('.tmcp-field-wrap').find('.tc-price'),o,n,p,l),t.length===0&&h.before('<input type="hidden" id="'+u+i+'" name="'+u+i+'" value="'+G(d,c)+'">'),b.is('.tm-epo-field.tmcp-radio')?b.is(':checked')&&t.val(G(d,c)):t.val(G(d,c))):b.data('pricew')!==void 0&&(n=k(b.data('pricew'),c,!0,!1,b),l='',b.data('original_pricew')!==void 0&&(l=k(b.data('original_pricew'),c,!0,!1,b)),A(b.closest('.tmcp-field-wrap').find('.tc-price'),b.data('pricew'),n,b.data('original_pricew'),l))}),[v,w]}function aL(){var b;if(c.tm_epo_no_lazy_load==='yes')return;x?b=a(x).find('img.tmlazy'):b=a('.tc-extra-product-options img.tmlazy'),b.lazyLoadXT(),b.on('lazyshow',function(){d.trigger('lazyLoadXToncomplete')})}function aK(d){var b,e;if(!d)return;d.find('.tm-owl-slider-section').each(function(){b=a(this),b.find('.tc-slider-content').addClass('tm-owl-slider tc-container'),b=b.find('.tm-owl-slider'),e=b.css('display'),b.show().addClass('tcowl-carousel').tmowlCarousel({rtl:c.isRTL==='1',dots:!1,nav:!0,items:1,autoHeight:!0,mouseDrag:!1,touchDrag:!0,navText:[c.i18n_prev_text,c.i18n_next_text],navClass:['owl-prev button','owl-next button'],navElement:'a',loop:!1,navRewind:!1}),b.css('display',e)}),a.fn.tcTabs&&d.find('.tc-tabs').tcTabs({headers:'tc-tab-headers',header:'tab-header',dataopenattribute:'data-tab',sortabletabs:!1})}function aG(c,g){var m=g.closest('.cpf-element'),i=m.data('repeater-max-rows'),h=g.find('.tc-repeater-element'),l=h.length,j=h.last(),e=h.last().find('.tmcp-ul-wrap'),k=c.data('tc-repeater-id'),d=c.data('tc-repeater-init'),b,f;if(i)if(l>=i)return!1;return l+1>=i&&c.is('.tc-repeater-add')&&c.closest('.tc-repeater-wrap').addClass('tc-hidden'),e.is('.tm-element-ul-date, .tm-element-ul-time')&&(e.find('.tm-epo-field').tm_datepicker('destroy'),e.find('.tmcp-date-select').off()),e.is('.tm-element-ul-color')&&e.find('.tm-epo-field').spectrum('destroy'),b=j.tcClone(!0),b.find('.tm-epo-field').attr('id',function(b,a){return a.replace(/\_\d+$/g,'')+'_'+d}),b.find('[data-for]').attr('data-for',function(b,a){return a.replace(/\_\d+$/g,'')+'_'+d}),b.find('[for]').attr('for',function(b,a){return a.replace(/\_\d+$/g,'')+'_'+d}),b.find('[data-field-id]').attr('data-field-id',function(b,a){return a.replace(/\_\d+$/g,'')+'_'+d}),b.find('[data-tm-date]').attr('data-tm-date',function(){return k+'_'+d}),b.find('.tm-epo-field').attr('name',function(b,a){return a.replace(/\[\d+\]/g,'['+d+']')}),b.find('.tm-qty').attr('name',function(b,a){return a.replace(/\[\d+\]/g,'['+d+']')}),b.find('.tmcp-date-select').attr('name',function(b,a){return a.replace(/\[\d+\]/g,'['+d+']')}),b.find('.tmcp-date-select').attr('id',function(b,a){return k+'_'+d+'_'+a.substring(a.lastIndexOf('_')+1)}),f=b.find('.tmcp-ul-wrap'),g.find('.tc-repeater-element').length>0&&(g.find('.tc-repeater-delete').removeClass('tc-hidden'),b.find('.tc-repeater-delete').removeClass('tc-hidden')),f.is('.tm-element-ul-checkbox')?(b.find('li.tmcp-field-wrap').removeClass('tc-active'),b.find('.tm-epo-field.tmcp-checkbox').prop('checked',!1),b.find('.tm-epo-field.tmcp-checkbox').filter(function(d,b){return a.inArray(a(b).val(),c.data('repeater-init-value'))!==-1}).prop('checked',!0).closest('li.tmcp-field-wrap').addClass('tc-active')):f.is('.tm-element-ul-radio')?(b.find('li.tmcp-field-wrap').removeClass('tc-active'),b.find('.tm-epo-field.tmcp-radio').filter(function(d,b){return a(b).val()===c.data('repeater-init-value')}).prop('checked',!0).closest('li.tmcp-field-wrap').addClass('tc-active')):b.find('.tm-epo-field').val(c.data('repeater-init-value')),!f.is('.tm-element-ul-checkbox')&&!f.is('.tm-element-ul-radio')&&b.find('.tm-epo-field').val(c.data('repeater-init-value')),c.data('tc-repeater-init',c.data('tc-repeater-init')+1),[b,j,e]}function aE(d,b,g,e,f){var c=b.find('.tmcp-ul-wrap');if(c.is('.tm-element-ul-range')&&(b.find('.tm-range-picker').removeData('tc-picker-init').attr('class','tm-range-picker').html(''),S(b)),c.is('.tm-element-ul-date, .tm-element-ul-time')&&(L(e),L(c)),c.is('.tm-element-ul-color')&&(J(e),J(c)),b.find('.tm-tooltip').removeData('tctooltip').removeData('tm-has-tm-tip'),a.tcToolTip(b.find('.tm-tooltip')),b.find('.tm-epo-field').removeData('addedtcEpoBeforeOptionPriceCalculation').each(function(e,c){var b=a(c);j(b,!1,!0),b.is('.tcenabled')&&r(d,b),b.on('tc_element_epo_rules',function(){r(d,b)})}),!f)return;c.is('.tm-element-ul-checkbox')?b.find('.tm-epo-field.tmcp-checkbox').filter(':checked').trigger('change.cpf'):c.is('.tm-element-ul-radio')?b.find('.tm-epo-field.tmcp-radio').filter(':checked').trigger('change.cpf'):b.find('.tm-epo-field').trigger('change.cpf')}function aO(b,f,c,g){var i=b.closest('.cpf-element'),e=i.data('repeater-min-rows'),d=b.find('.tc-repeater-element').length,j=f.index(),h;if(e)if(d<=e)return g&&(h='<div class="tm-error-repeater tm-error tc-cell tcwidth-100">'+a.tc_validator.messages.repeaterminrows(e)+'</div>',g.tcToolTip({tip:h,onetime:!0,trigger:!0,tipclass:'tc-error'})),!1;if(d===1)return;if(d===2&&b.find('.tc-repeater-delete').addClass('tc-hidden'),c.is('.tc-repeater-add')&&c.closest('.tc-repeater-wrap').removeClass('tc-hidden'),f.remove(),c.data('tc-repeater-init',c.data('tc-repeater-init')-1),j+1===d)return;b.find('.tc-repeater-element').toArray().forEach(function(c,b){c=a(c),c.find('.tm-epo-field').attr('id',function(c,a){return a.replace(/\_\d+$/g,'')+(b!==0?'_'+b:'')}),c.find('[data-for]').attr('data-for',function(c,a){return a.replace(/\_\d+$/g,'')+(b!==0?'_'+b:'')}),c.find('[for]').attr('for',function(c,a){return a.replace(/\_\d+$/g,'')+(b!==0?'_'+b:'')}),c.find('[data-field-id]').attr('data-field-id',function(c,a){return a.replace(/\_\d+$/g,'')+(b!==0?'_'+b:'')}),c.find('[data-tm-date]').attr('data-tm-date',function(c,a){return a.replace(/\_\d+$/g,'')+(b!==0?'_'+b:'')}),c.find('.tm-epo-field').attr('name',function(c,a){return a.replace(/\[\d+\]/g,'['+b+']')}),c.find('.tm-qty').attr('name',function(c,a){return a.replace(/\[\d+\]/g,'['+b+']')}),c.find('.tmcp-date-select').attr('name',function(c,a){return a.replace(/\[\d+\]/g,'['+b+']')})})}function aC(b,d){var e,c;if(!b)return;b=a(b),b.length&&(e=d.main_cart,c=P(e),c=a.epoAPI.applyFilter('qtyElementForRepeaterQuantity',c,{epo:d,currentCart:e,obj:b,qtyElement:c}),b.find('.tc-repeater-quantity').toArray().forEach(function(k,h){var f=a(k),g,i,j;if(f.data('tc-repeater-init'))return;i=f.find('.tc-repeater-element'),j=i.length,g=i.first().find('.tm-epo-field'),g.is(':checkbox')?f.data('repeater-init-value',g.filter(':checked').toArray().map(function(b){return a(b).val()})):g.is(':radio')?f.data('repeater-init-value',g.filter(':checked').val()):f.data('repeater-init-value',g.val()),f.data('tc-repeater-init',j),f.data('tc-repeater-id',g.attr('id')),f.data('tc-repeater-name',g.attr('name')),c.length&&c.off('change.r'+h+'cpf input.r'+h+'cpf').on('change.r'+h+'cpf input.r'+h+'cpf',function(r){var l=a(this),m=l.data('tm-prev-value'),i=a.epoAPI.applyFilter('qtyElementForRepeaterQuantityValue',l.val(),{epo:d,currentCart:e,obj:b,qtyElement:c,field:l}),j=i-m,k,o,g,h,n,p,q;if(m===void 0&&(m=i-1,j=i-m),r.isTrigger!==void 0&&(m=f.find('.tc-element-inner-wrap').find('.tc-repeater-element').length,j=i-m),j===0)return;if(k=f.find('.tc-element-inner-wrap'),l.data('tm-prev-value',a.epoAPI.applyFilter('qtyElementForRepeaterQuantity_tm-prev-value',l.val(),{epo:d,currentCart:e,obj:b,qtyElement:c,field:l})),j>0){if(o=k.find('.tc-repeater-element').eq(i-1),o.length)return;for(g=0;g<j;g++)n=aG(f,k),n&&(h?h=h.add(n[0]):h=n[0],g===0&&(p=n[1],q=n[2]));h&&(h.appendTo(k.find('.tc-element-container')),aE(d,h,p,q))}else for(g=i-j;g>i;g-=1)o=k.find('.tc-repeater-element').eq(g-1),aO(k,o,f);e.trigger({type:'tm-epo-update',norules:2})})}),b.find('.tc-repeater-add').toArray().forEach(function(h){var b=a(h),c,e,f,g;if(b.data('tc-repeater-init'))return;e=b.closest('.tc-element-inner-wrap'),f=e.find('.tc-repeater-element'),g=f.length,c=f.first().find('.tm-epo-field'),e.find('.tc-repeater-element').length>1&&e.find('.tc-repeater-delete').removeClass('tc-hidden'),c.is(':checkbox')?b.data('repeater-init-value',c.filter(':checked').toArray().map(function(b){return a(b).val()})):c.is(':radio')?b.data('repeater-init-value',c.filter(':checked').val()):b.data('repeater-init-value',c.val()),b.data('tc-repeater-init',g),b.data('tc-repeater-id',c.attr('id')),b.data('tc-repeater-name',c.attr('name')),b.on('click.repeater',function(){var a=aG(b,e);a&&(a[0].appendTo(e.find('.tc-element-container')),aE(d,a[0],a[1],a[2],!0))})}),b.find('.tc-repeater-delete .delete').on('click',function(){var b=a(this),c=b.closest('.tc-element-inner-wrap'),d=b.closest('.tc-repeater-element');aO(c,d,c.find('.tc-repeater-add'),b)}))}function J(b){if(!b)return;b=a(b).find('.tm-color-picker'),b.length&&(b.spectrum({type:'color',theme:'epo',showButtons:!0,allowEmpty:!0,showInitial:!0,showInput:!0,clickoutFiresChange:!1,chooseText:c.closeText,cancelText:c.i18n_cancel}),b.spectrum('enable'))}function aA(b){if(!b)return;a(b).length&&a(function(){a(b).tclightbox()})}function az(b){var d=b.closest('.tmcp-field-wrap').find('label img'),c=a(d).first().attr('data-original');return!!(b.is('select.tm-product-image')&&(b=b.children('option:selected')),c||(c=a(d).first().attr('src')),c||(c=b.attr('data-image')),b.attr('data-imagep')&&(c=b.attr('data-imagep')),c)}function au(g){var i=g.is_associated?g.this_epo_container.find('.tm-epo-field.tmcp-upload'):g.this_epo_container.find('.tm-epo-field.tmcp-upload').not(b.epoSelector+' '+b.associatedEpoSelector+' .tm-epo-field.tmcp-upload'),f,h,d,c;try{i.not(b.epoSelector+' '+b.associatedEpoSelector+' .tm-epo-field.tmcp-upload').toArray().forEach(function(e){var b,g;if(d=[],c=a(e),c.attr('data-file')==='')return!1;if(b=c.attr('data-file').split('|'),b.length===0)return!1;(D||z)&&(f=new D('').clipboardData||new z),b.forEach(function(b){g=a.epoAPI.util.basename(b),(D||z)&&f.items.add(new File([b],g)),d.push(b)}),f&&(e.files=f.files),d=d.join('|'),h=c.attr('name'),c.trigger('tcupload'),c.after('<input type="hidden" class="tmcp-upload-hidden" name="'+h+'" value="'+d+'">'),c.removeAttr('data-file')})}catch(b){e.console.log(b),a('.tm-epo-field.tmcp-upload').not('.tm-multiple-file-upload').addClass('tc-nodt'),I=b}}function aZ(d){var e=d.epoEventId,f=d.this_epo_container;c.tm_epo_upload_popup==='yes'&&(a.tcepo.formSubmitEvents[e][a.tcepo.formSubmitEvents[e].length]={trigger:function(){return!0},on_true:function(){var d=f.data('num_uploads'),g,e;return d&&Object.keys(d).length&&(g=a.tcFloatBox({fps:1,ismodal:!0,refresh:'fixed',width:'50%',height:'300px',classname:'flasho tc-wrapper',data:a.epoAPI.template.html(b.templateEngine.tc_upload_messages,{files:d,title:c.i18n_uploading_files,message:c.i18n_uploading_message})}),e=function(){g.destroy(),h.off('ajaxSuccess',e)},h.on('ajaxSuccess',e)),!0},on_false:function(){return!0}})}function a_(c){var b=c.this_epo_container,e=c.main_product,d=c.epoEventId,f=b.find('.tm-limit'),g=b.find('.tm-exactlimit'),h=b.find('.tm-minimumlimit');b.on('change.cpflimit','input.tm-epo-field.tmcp-checkbox',function(){var b=a(this);Q(b,!0),T(b,!0)}),f.length&&aW(f,e,d),g.length&&aU(g,e,d),h.length&&aS(h,d)}function a$(k){var j=k.this_epo_container,f=c.theme_name,g,i;if(f){switch(f=f.toLowerCase(),g=j.find('select'),f){case'flatsome':case'flatsome-child':case'flatsome child':g.wrap('<div class="custom select-wrapper"/>');break;case'avada':case'avada-child':case'avada child':g.wrap('<div class="avada-select-parent tm-select-parent"></div>'),a('<div class="select-arrow">&#xe61f;</div>').appendTo(j.find('.tm-select-parent')),e.calc_select_arrow_dimensions?(e.calc_select_arrow_dimensions(),d.on('tmsectionpoplink cpflogicdone',function(){e.calc_select_arrow_dimensions()})):e.calcSelectArrowDimensions&&(e.calcSelectArrowDimensions(),d.on('tmsectionpoplink cpflogicdone',function(){e.calcSelectArrowDimensions()}));break;case'bazar':case'bazar-child':case'bazar child':g.wrap('<div class="tm-select-wrapper select-wrapper"/>');break;case'blaszok':case'blaszok-child':case'blaszok child':i=function(){setTimeout(function(){a('.tm-extra-product-options select').not('.hasCustomSelect').filter(':visible').each(function(){a(this).is('.mpcthSelect')||(a(this).width(a(this).outerWidth()),a(this).customSelect({customClass:'mpcthSelect'}))})},100)},d.on('cpflogicrun',function(){i()}),d.on('epo_options_visible',function(){i()});break;case'handmade':case'handmade child theme':a('.tm-owl-slider.tcowl-carousel').addClass('manual');break}d.trigger('tm-theme-specific-actions',{epo:{theme_name:f,all_epo_selects:g}})}h.off('click.cpf','.quantity:not(.buttons_added) .minus, .quantity:not(.buttons_added) .plus').on('click.cpf','.quantity:not(.buttons_added) .minus, .quantity:not(.buttons_added) .plus',function(){a(this).closest('.quantity').find(b.qtySelector).trigger('change.cpf')})}function ba(g,j,s,x,m){var v=g.epoEventId,r="input[name^='variation_id']",u=g.is_associated?'tc_variation_form.tmlogic':'wc_variation_form.tmlogic',i=g.is_associated?'tc_':'',f=g.variations_form,l=g.is_associated?f.find('.tc-epo-element-variations'):f.find('.variations'),w=g.is_associated?'.tc-epo-element-variable-reset-variations':'.reset_variations',n,h,o,e,b,k,q,c,p;if(f.attr('data-epo_id',g.epo_id),j.find('input.variation_id').length>0&&(r='input.variation_id'),m.find('.tm-epo-variation-element').length||m.data('tm-epo-variation-element')){if(b=m.find('.tm-epo-variation-section').first(),b.find('.cpf-type-variations').attr('data-epo_id',g.epo_id).attr('data-product_id',f.attr('data-product_id')),m.data('tm-epo-variation-element',b.find('.tm-epo-variation-element')),s&&s!=='main'&&!g.is_associated){if(f=g.form,l=f.find('.composite_component[data-item_id="'+s+'"]').find('.variations'),f.attr('data-epo_id',g.epo_id),l.length===0)return;k=b.closest('li.tm-extra-product-options-field'),b.is('.tm-hidden')||l.hide(),l.after(b.addClass('tm-extra-product-options nopadding')),k.is(':empty')&&k.hide(),b.is('.section_popup')?b.wrap("<div class='tc-styled-variations tc-row'></div>"):(b.removeClass('tc-cell'),b.wrap("<div class='tc-styled-variations'></div>")),q=!1,j.off(u).on(u,function(){q=!0,f.on('click.tmlogic','.reset_variations',function(){b.find('select.tm-epo-variation-element').val('').children('option').prop('disabled',!1).show(),b.find('.tm-epo-variation-element').prop('disabled',!1).removeClass('tm-disabled').prop('checked',!1).closest('li').show(),d.trigger('tmlazy'),b.find('.tm-epo-variation-element').trigger('tm_trigger_product_image'),b.find('li').removeClass('tc-active tm-attribute-disabled').css('opacity','')}),j.off('woocommerce_update_variation_values_tmlogic').on('woocommerce_update_variation_values_tmlogic',function(){al(j,g)});for(e=0;e<t.length;e+=1)c=t[e],p=typeof c,p==='object'&&(n=typeof c.name=='string'||!1,h=typeof c.selector=='string'||!1,o=typeof c.func=='function'||!1,n&&o&&(h==="input[name='variation_id']"&&(h=r),c.selector?j.data('tm-styled-variations',1).off(i+c.name+e,h).on(i+c.name+e,h,c.func):j.data('tm-styled-variations',1).off(i+c.name+e).on(i+c.name+e,c.func)));t=[],b.find('.tm-epo-variation-element:not(.tm-hidden .tm-epo-variation-element)').last().trigger('tm_epo_variation_element_change')}),a(function(){q===!1&&j.trigger(u)})}else{b.length&&(b.is('.tm-hidden')||l.hide(),k=b.closest('li.tm-extra-product-options-field'),l.after(b.addClass('tm-extra-product-options nopadding')),k.is(':empty')&&k.hide(),b.is('.section_popup')?b.wrap("<div class='tc-styled-variations tc-row'></div>"):(b.removeClass('tc-cell'),b.wrap("<div class='tc-styled-variations'></div>")),f.off('click.tmlogic',w).on('click.tmlogic',w,function(){b.find('select.tm-epo-variation-element').val('').children('option').prop('disabled',!1).show(),b.find('.tm-epo-variation-element').prop('disabled',!1).removeClass('tm-disabled').prop('checked',!1).closest('li').show(),d.trigger('tmlazy'),b.find('.tm-epo-variation-element').trigger('tm_trigger_product_image'),b.find('li').removeClass('tc-active tm-attribute-disabled').css('opacity','')})),f.off('woocommerce_update_variation_values_tmlogic').on('woocommerce_update_variation_values_tmlogic',function(){al(f,g)});for(e=0;e<t.length;e+=1)c=t[e],p=typeof c,p==='object'&&(n=typeof c.name=='string'||!1,h=typeof c.selector=='string'||!1,o=typeof c.func=='function'||!1,n&&o&&(h==="input[name='variation_id']"&&(h=r),c.selector?f.data('tm-styled-variations',1).off(i+c.name+e,h).on(i+c.name+e,h,c.func):f.data('tm-styled-variations',1).off(i+c.name+e).on(i+c.name+e,c.func)));t=[],b.find('.tm-epo-variation-element:not(.tm-hidden .tm-epo-variation-element)').last().trigger('tm_epo_variation_element_change')}a.tcepo.formSubmitEvents[v][a.tcepo.formSubmitEvents[v].length]={trigger:function(){return!0},on_true:function(){return b.find('.tm-epo-variation-element').attr('disabled','disabled'),!0},on_false:function(){b.find('.tm-epo-variation-element').prop('disabled',!1)}},a(B.body).on('added_to_cart',function(){b.find('.tm-epo-variation-element').prop('disabled',!1)})}}function bb(c,d){var f=d.find('.flex-control-nav li:eq(0) img'),g=d.find('.woocommerce-product-gallery__wrapper '),h=g.find('.woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder').eq(0),b=c,e=c.closest('a');b.attr('data-o_src',a.tc_product_image_store[0].src),b.attr('data-o_srcset',a.tc_product_image_store[0].srcset),b.attr('data-o_sizes',a.tc_product_image_store[0].sizes),b.attr('data-o_title',a.tc_product_image_store[0].title),b.attr('data-o_alt',a.tc_product_image_store[0].alt),b.attr('data-o_data-src',a.tc_product_image_store[0]['data-src']),b.attr('data-o_data-large_image',a.tc_product_image_store[0]['data-large_image']),b.attr('data-o_data-large_image_width',a.tc_product_image_store[0]['data-large_image_width']),b.attr('data-o_data-large_image_height',a.tc_product_image_store[0]['data-large_image_height']),h.attr('data-o_data-thumb',a.tc_product_image_store[1]['data-thumb']),a.tc_product_image_store[2]&&f.attr('data-o_src',a.tc_product_image_store[2].src),e.attr('data-o_href',a.tc_product_image_store[3].href),e.attr('data-o_title',a.tc_product_image_store[3].title)}function bc(c,d){var f=d.find('.flex-control-nav li:eq(0) img'),g=d.find('.woocommerce-product-gallery__wrapper '),h=g.find('.woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder').eq(0),b=c,e=c.closest('a');a.isEmptyObject(a.tc_product_image)?a.tc_product_image_store=a.tc_populate_store(c,d):(a.tc_product_image_store=a.tc_pre_populate_store(),a.tc_product_image_store=a.tc_maybe_copy_object_values(a.tc_product_image_store,a.tc_product_image)),b.tc_update_attr('src',0),b.tc_update_attr('srcset',0),b.tc_update_attr('sizes',0),b.tc_update_attr('title',0),b.tc_update_attr('alt',0),b.tc_update_attr('data-src',0),b.tc_update_attr('data-large_image',0),b.tc_update_attr('data-large_image_width',0),b.tc_update_attr('data-large_image_height',0),h.tc_update_attr('data-thumb',1),f.tc_update_attr('src',2),e.tc_update_attr('href',3),e.tc_update_attr('title',3)}function at(a,g,e){var d=e.find('.flex-control-nav li:eq(0) img'),h=e.find('.woocommerce-product-gallery__wrapper '),f=h.find('.woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder').eq(0),b=g,c=g.closest('a');a&&a.image_link&&a.image_link&&a.image_link.length>1?((a.full_src===null||a.full_src==='')&&(a.full_src=a.image_link),(a.full_src_w===null||a.full_src_w==='')&&(a.full_src_w=b.attr('data-large_image_width')),(a.full_src_h===null||a.full_src_h==='')&&(a.full_src_h=b.attr('data-large_image_height')),b.length&&(a.image_srcset||(a.image_sizes=!1),a.image_sizes||(a.image_srcset=!1),b.tc_set_attr('src',a.image_link,0),b.tc_set_attr('srcset',a.image_srcset,0),b.tc_set_attr('sizes',a.image_sizes,0),b.tc_set_attr('title',a.image_title,0),b.tc_set_attr('alt',a.image_alt,0),b.tc_set_attr('data-src',a.full_src,0),b.tc_set_attr('data-large_image',a.full_src,0),b.tc_set_attr('data-large_image_width',a.full_src_w,0),b.tc_set_attr('data-large_image_height',a.full_src_h,0),f.tc_set_attr('data-thumb',a.image_link,1)),d.length&&d.tc_set_attr('src',a.image_link,2),c.length&&(c.tc_set_attr('href',a.full_src,3),c.tc_set_attr('title',a.image_caption,3))):(b.length&&(b.tc_reset_attr('src',0),b.tc_reset_attr('srcset',0),b.tc_reset_attr('sizes',0),b.tc_reset_attr('title',0),b.tc_reset_attr('alt',0),b.tc_reset_attr('data-src',0),b.tc_reset_attr('data-large_image',0),b.tc_reset_attr('data-large_image_width',0),b.tc_reset_attr('data-large_image_height',0),f.tc_reset_attr('data-thumb',1)),d.length&&d.tc_reset_attr('src',2),c.length&&(c.tc_reset_attr('href',3),c.tc_reset_attr('title',3)))}function am(e,d){var b;return e.is_associated?b=d.find('.tc-product-image .wp-post-image').first():c.tm_epo_global_product_image_selector!==''?b=a(c.tm_epo_global_product_image_selector):(b=d.find('.woocommerce-product-gallery__image:not(.clone), .woocommerce-product-gallery__image--placeholder:not(.clone)').eq(0).find('.wp-post-image').first(),b.length===0&&(b=d.find('a.woocommerce-main-image img, img.woocommerce-main-image,a img').not('.thumbnails img,.product_list_widget img').first()),b.length===0&&(b=d.find('img.wp-post-image').not('.thumbnails img,.product_list_widget img').first()),b.length===0&&(b=d.find('.elementor-widget-wd_single_product_gallery img.wp-post-image').first()),b.length===0&&(b=d.find('.elementor-widget-ae-post-image .wp-post-image').first()),b.length===0&&(b=a('.woocommerce div.product div.images').not('.thumbnails img,.product_list_widget img').first())),a(b).length>1&&(b=a(b).first()),b}function aj(a){var c,d,b;return a.is_associated?a.main_product.closest('.tc-epo-element-product-container'):(c=a.main_product,d=a.product_id,b=c.closest('#product-'+d),b.length<=0&&(b=c.closest('.post-'+d)),b)}function F(i,g,c,o,q,p,f){var b,l,m,n,h,k,j;for(b in i)if(Object.prototype.hasOwnProperty.call(i,b))if(b=i[b],b.enabled)switch(b.type){case'yith':g?(g.attr('srcset',c).attr('src-orig',c),b.element.data('yith_magnifier')&&b.element.yith_magnifier('destroy'),l={elements:{zoom:a('.yith_magnifier_zoom'),zoomImage:g,gallery:a('.yith_magnifier_gallery li a')}},b.element.yith_magnifier(a.extend(!0,{},e.yith_magnifier_options,l))):(o?b.yith_wcmg_zoom.attr('href',b.yith_wcmg_default_zoom):b.yith_wcmg_zoom.attr('href',b._yith_wcmg_default_zoom),b.element.data('yith_magnifier')&&b.element.yith_magnifier('destroy'),b.element.yith_magnifier(e.yith_magnifier_options));break;case'iosslider':setTimeout(function(a){a.element.iosSlider('update')}.bind(null,b),150);break;case'flexslider':d.trigger('resize');break;case'elevatezoom':b.element.each(function(a,c){var b=c(this).data('elevateZoom');typeof b!='undefined'&&b.swaptheimage(a,a)}.bind(null,c,a));break;case'easyzoom':b.element.swap(null,c);break;case'easyzoom-flatsome':b.element.swap(c,c);break;case'woocommerce':b.element.flexslider(0),m=b.element,e.setTimeout(function(a,b){a.trigger('woocommerce_gallery_init_zoom'),b.trigger('resize')}.bind(null,m,d),10);break;case'zoom':f&&(n=f.find('.woocommerce-product-gallery--with-images').width(),h=!1,k=b.element.find('img.wp-post-image'),k.attr('data-large_image_width')>n&&(h=!0),h?(j={touch:!1},'ontouchstart'in e&&(j.on='click'),b.element.trigger('zoom.destroy'),b.element.zoom(j)):b.element.trigger('zoom.destroy'));break}d.trigger('tm_gallery_compatibility_actions',{event_data:q,product_element:f,form:p})}function ag(E,n,f){var t,i,D,C,A,z,v,m,u,o,y,x,g,c,h,b,k,l,q,j,r,p,s,w;return E.is_associated?{}:(t=!1,i=a('.images'),D=a('.yith_magnifier_zoom'),C=i.find('.yith_magnifier_zoom').first().attr('href'),A=C,z=i.find('.yith_magnifier_zoom img').first().attr('src'),v=!1,m=a('.iosSlider.product-gallery-slider,.iosSlider.product-slider'),u=!1,o=f.find('.images .fusion-flexslider'),y=n.data('elevateZoom')||!1,x=f.find('div.product-images .woocommerce-main-image'),g=!1,c=f.find('.images .easyzoom'),h=!1,b=f.find('.images .easyzoom'),k=!1,l=f.find('.woocommerce-product-gallery'),q=!1,j=e.wc_single_product_params,p=typeof a.fn.zoom=='function'&&j&&j.zoom_enabled,s=!1,e.yith_magnifier_options&&i.data('yith_magnifier')&&(t=!0),m.length&&m.iosSlider&&(v=!0),o.length&&o.flexslider&&(u=!0),c.length&&c.filter('.images .easyzoom.first').data('easyZoom')&&(c=c.filter('.images .easyzoom.first').data('easyZoom'),g=!0),g||(b=f.find('.images .has-image-zoom .slide'),b.length&&b.filter('.images .has-image-zoom .slide.first').data('easyZoom')&&(b=b.filter('.images .has-image-zoom .slide.first').data('easyZoom'),h=!0)),B.readyState==='complete'?setTimeout(function(){c.length&&c.data('easyZoom')&&(c=c.data('easyZoom'),g=!0),b.length&&b.data('easyZoom')&&(b=b.data('easyZoom'),h=!0)},150):d.on('load',function(){setTimeout(function(){c.length&&c.data('easyZoom')&&(c=c.data('easyZoom'),g=!0),b.length&&b.data('easyZoom')&&(b=b.data('easyZoom'),h=!0)},150)}),l.length&&l.data('flexslider')&&(k=!0,typeof a.fn.zoom=='function'&&j&&j.zoom_enabled&&(r=n.closest('.woocommerce-product-gallery__image'),r.length>0&&n.width()>a('.woocommerce-product-gallery').width()&&(q=r,n.data.wc27_zoom_target=q))),!k&&p&&(s=f.find('.woocommerce-product-gallery__image')),w={is_yith_wcmg:{type:'yith',enabled:t,element:i,yith_wcmg_zoom:D,_yith_wcmg_default_zoom:A,yith_wcmg_default_image:z},is_iosSlider:{type:'iosslider',enabled:v,element:m},is_flexslider:{type:'flexslider',enabled:u,element:o},is_elevateZoom:{type:'elevatezoom',enabled:y,element:x},is_easyzoom:{type:'easyzoom',enabled:g,element:c},is_easyzoom_flatsome:{type:'easyzoom-flatsome',enabled:h,element:b},is_wc27_gallery:{type:'woocommerce',enabled:k,element:l},is_zoom_enabled:{type:'zoom',enabled:!k&&p,element:s}},w)}function bi(h){var l=h.is_associated?h.this_epo_container:h.this_epo_container.not(b.epoSelector+' '+b.associatedEpoSelector),m=h.variations_form,s=h.main_product,n=h.form,g=aj(h),c=[],t=h.is_associated?'tc_':'',f=am(h,g),p=ag(h,f,g),i,q,r,o,k,e;a(f).length>0&&(n.on(t+'reset_image.tcpi',function(){a.tc_product_image=a.tc_replace_object_values(a.tc_product_image,a.tc_product_image_store),c=[],a(l.find('.tm-product-image:checked,select.tm-product-image')).add(m.find('.tm-epo-variation-section').first().find('.tm-product-image:checked,select.tm-product-image')).each(function(){e=a(this),j(e)&&e.val()!==''&&c.push(e)}),c.length?c[c.length-1].trigger('tm_trigger_product_image'):a.tc_product_image_store=a.tc_populate_store(f,g)}),n.on(t+'found_variation.tcpi',function(){bc(f,g),c=[],a(l.find('.tm-product-image:checked,select.tm-product-image')).add(m.find('.tm-epo-variation-section').first().find('.tm-product-image:checked,select.tm-product-image')).each(function(){e=a(this),j(e)&&e.val()!==''&&c.push(e)}),c.length&&(bb(f,g),c[c.length-1].trigger('tm_trigger_product_image'))}),a.tc_product_image_store=a.tc_maybe_copy_object_values_from_img(a.tc_product_image_store,f,g),s.off('tm_change_product_image').on('tm_change_product_image',function(d,b){if(d.stopImmediatePropagation(),i=b.element,q=b.element_current,i&&q){if(r=i.data('imagep'),o='',r!==''?o='imagep':i.data('changes-product-image')==='images'&&(o='image'),k=b.element_current.data('image-variations'),k&&(k=k[o]),k===void 0)return;if(c=[],a(l.find('.tm-product-image:checked,select.tm-product-image')).add(m.find('.tm-epo-variation-section').first().find('.tm-product-image:checked,select.tm-product-image')).each(function(){e=a(this),e.is('option')&&(e=e.closest('select')),j(e)&&e.val()!==''&&c.push(e)}),c.length)if(!c[c.length-1].is(i))return;at(k,f,g),F(p,f,k.image_link,!1,b,n,g)}}),s.off('tm_restore_product_image').on('tm_restore_product_image',function(d,b){if(d.stopImmediatePropagation(),i=b.element,c=[],i)if(a(l.find('.tm-product-image:checked,select.tm-product-image')).add(m.find('.tm-epo-variation-section').first().find('.tm-product-image:checked,select.tm-product-image')).each(function(){e=a(this),j(e)&&e.val()!==''&&c.push(e)}),c.length)if(!c[c.length-1].is(i)){c[c.length-1].trigger('tm_trigger_product_image');return}at(!1,f,g),F(p,!1,f.attr('src'),!1,b,n,g)}),c=[],a(l.find('.tm-product-image:checked,select.tm-product-image')).add(m.find('.tm-epo-variation-section').first().find('.tm-product-image:checked,select.tm-product-image')).each(function(){e=a(this),j(e)&&e.val()!==''&&c.push(e)}),c.length&&c[c.length-1].trigger('tm_trigger_product_image')),d.trigger('tm_product_image_loaded')}function bj(g){var s=g.is_associated?g.this_epo_container:g.this_epo_container.not(b.epoSelector+' '+b.associatedEpoSelector),l=g.main_product,i=g.product_id,k=g.form,r=aj(g),m=[],c=am(g,r),h=ag(g,c,r),o,p,q,n,f;a(c).length>0&&(c.data('tm-current-image',!1),n=c.closest('a'),o=c.attr('src'),p=c.width(),q=c.height(),l.off('tm_change_product_image').on('tm_change_product_image',function(C,b){var r=[],y=b.element.closest('.cpf-section'),B=y.is('.tm-epo-variation-section'),x=b.epo_holder,t,s,u,w,l,A,z,o,m,g,n,v;if(B&&(x=y),t=x.find('.tm-product-image:checked,select.tm-product-image'),r=[],s=b.element.attr('id'),u=!0,w=b.main_product,l=w.closest('#product-'+i),A=p,z=q,m=a("<div class='blockUI blockOverlay tm-preloader-img'></div>"),l.length<=0&&(l=w.closest('.post-'+i)),o=l.find('#'+s+'_tmimage'),o.length===0&&(o=c),v=function(){m.remove(),k.tc_image_update(!1),c.data('tm-current-image',!1),l.find('.tm-clone-product-image').hide(),c.show()},b.src===o.attr('src')&&o.is(':visible'))return;if(b.src===!1){v();return}m.css({width:A,height:z}),t.each(function(){f=a(this),j(f)&&az(f)&&Y({element:f.closest('.cpf-element'),operator:'isnotempty',value:''})&&r.push(f)}),r.length&&(t=r[r.length-1]),t.attr('id')!==b.element.attr('id')&&(u=!1),g=c.tcClone(),n=new Image,g.removeAttr('data-o_src').removeAttr('data-o_title').removeAttr('data-o_alt').removeAttr('data-o_srcset').removeAttr('data-o_sizes').removeAttr('srcset').removeAttr('sizes'),u&&c.before(m),h.is_yith_wcmg.yith_wcmg_default_zoom=h.is_yith_wcmg.element.find('.yith_magnifier_zoom').first().attr('href'),h.is_yith_wcmg.yith_wcmg_default_image=h.is_yith_wcmg.element.find('.yith_magnifier_zoom img').first().attr('src'),n.onerror=function(){v()},n.onload=function(){if('naturalHeight'in this){if(this.naturalHeight+this.naturalWidth===0){this.onerror();return}}else if(this.width+this.height===0){this.onerror();return}l.find('#'+s+'_tmimage').remove(),l.find('.tm-clone-product-image').hide(),g.prop('src',n.src).hide(),c.hide().after(g),g.css('opacity',0).show(),F(h,g,n.src),m.animate({opacity:0},750,'easeOutExpo',function(){m.remove()}),g.animate({opacity:1},e.tc_epo_image_animation_delay||1500,'easeOutExpo',function(){}),d.trigger('tm_change_product_image_loaded',{src:b.src,element:b.element,main_product:b.main_product,epo_holder:b.epo_holder})},g.attr('id',s+'_tmimage').addClass('tm-clone-product-image').hide(),g.attr('src-orig')&&g.attr('src-orig',b.src),u?(n.src=b.src,k.tc_image_update(b.element,g),c.data('tm-current-image',s),d.trigger('tm_change_product_image_show',{src:b.src,element:b.element,main_product:b.main_product,epo_holder:b.epo_holder})):(g.prop('src',b.src).hide(),c.after(g)),d.trigger('tm_change_product_image_end',{src:b.src,element:b.element,main_product:b.main_product,epo_holder:b.epo_holder})}),l.off('tm_restore_product_image').on('tm_restore_product_image',function(w,a){var f,q,b,p,v,m,j,g,u,t,s,r,l,e;if(d.trigger('tm_restore_product_image_pre',{element:a.element,main_product:a.main_product,epo_holder:a.epo_holder}),f=a.element.attr('id'),q=a.main_product,b=q.closest('#product-'+i),p=a.element.closest('.cpf-section'),v=p.is('.tm-epo-variation-section'),g=!1,r=o,l=a.epo_holder,v&&(l=p),b.length<=0&&(b=q.closest('.post-'+i)),u=b.find('#'+f+'_tmimage').is(':visible'),b.find('#'+f+'_tmimage').remove(),b.find('.tm-clone-product-image').length===0)c.show(),c.data('tm-current-image',!1),k.tc_image_update(!1);else{if(!u){d.trigger('tm_restore_product_image_loaded_exit',{element:a.element,main_product:a.main_product,epo_holder:a.epo_holder});return}t=b.find('.tm-clone-product-image').length,f=c.data('tm-current-image');for(e=t-1;e>=0;e-=1){if(j=b.find('.tm-clone-product-image').eq(e),m=j.attr('id').replace('_tmimage',''),s=l.find("[id='"+m+"']"),s.is(':checked')&&s.closest('.cpf-element').is(':visible')){b.find('.tm-clone-product-image').eq(e).show(),n.attr('href',b.find('.tm-clone-product-image').eq(e).prop('src')),c.data('tm-current-image',m),g=!0;break}b.find('.tm-clone-product-image').eq(e).hide()}g?b.find('#'+f+'_tmimage').remove():(c.show(),c.data('tm-current-image',!1),k.tc_image_update(!1))}g&&(r=j.attr('src')),F(h,!1,r,b.find('.tm-clone-product-image').filter(':visible').length),d.trigger('tm_restore_product_image_loaded',{element:a.element,main_product:a.main_product,epo_holder:a.epo_holder})}),l.off('tm_attempt_product_image').on('tm_attempt_product_image',function(B,p){var q=p.main_product,b=q.closest('#product-'+i),r,A,d,e,l,t,v,u,s,m,x,y,z,w,g;if(p.element?r=p.element.closest('.cpf-section'):r=a(q.find('.tm-epo-variation-section').first(),p.epo_holder),A=r.is('.tm-epo-variation-section'),d=p.epo_holder,A&&(d=r),e=d.find('.tm-product-image:checked,select.tm-product-image'),l=[],t='',s=!1,m=c.data('tm-current-image'),y=o,b.length<=0&&(b=q.closest('.post-'+i)),d=q.find('.tm-epo-variation-section').first().add(p.epo_holder),e=d.find('.tm-product-image:checked,select.tm-product-image'),e.each(function(){f=a(this),j(f)&&az(f)&&Y({element:f.closest('.cpf-element'),operator:'isnotempty',value:''})&&l.push(f)}),l.length&&(e=l[l.length-1],t=e.attr('id')),l.length&&e.length&&(!m||t!==m)){e.last().trigger('tm_trigger_product_image');return}if(w=d.find("[id='"+m+"']").closest('.cpf-element'),!m||w.data('isactive')!==!1&&w.closest('.cpf-section').data('isactive')!==!1)return;if(b.find('#'+m+'_tmimage').remove(),x=b.find('.tm-clone-product-image').length,x===0)c.show(),c.data('tm-current-image',!1),k.tc_image_update(!1);else{for(g=x-1;g>=0;g-=1){if(v=b.find('.tm-clone-product-image').eq(g),u=v.attr('id').replace('_tmimage',''),z=d.find("[id='"+u+"']"),z.is(':checked')&&z.closest('.cpf-element').is(':visible')){b.find('.tm-clone-product-image').eq(g).show(),n.attr('href',b.find('.tm-clone-product-image').eq(g).prop('src')),c.data('tm-current-image',u),s=!0;break}b.find('.tm-clone-product-image').eq(g).hide()}s||(c.show(),c.data('tm-current-image',!1),k.tc_image_update(!1))}s&&(y=v.attr('src')),F(h,!1,y,b.find('.tm-clone-product-image').filter(':visible').length)}),a(s.find('.tm-product-image:checked,select.tm-product-image')).add(l.find('.tm-epo-variation-section').first().find('.tm-product-image:checked,select.tm-product-image')).each(function(){f=a(this),j(f)&&f.val()!==''&&m.push(f)}),m.length&&m[m.length-1].trigger('tm_trigger_product_image')),d.trigger('tm_product_image_loaded')}function aq(a){setTimeout(function(){c.tm_epo_global_product_image_mode==='inline'?bj(a):bi(a)},e.tc_epo_product_image_setup_delay||0)}function bl(a){d.trigger('tm-epo-compatibility',{epo:a})}function S(d){if(!af)return;d.find('.tm-range-picker').toArray().forEach(function(r){var e=a(r),f=e.attr('data-step').split('.'),p=d.find('#'+a.epoAPI.dom.id(e.attr('data-field-id'))),m=parseFloat(e.attr('data-min')),i=parseFloat(e.attr('data-max')),g=parseFloat(e.attr('data-start')),l=parseFloat(e.attr('data-step')),h=e.attr('data-show-picker-value'),n=e.closest('li').find('.tm-show-picker-value'),j=parseFloat(e.attr('data-noofpips')),q=null,k;if(e.data('tc-picker-init'))return;e.data('tc-picker-init',1),f.length===1?f=0:f=f[1].length,Number.isFinite(m)||(m=0),Number.isFinite(i)||(i=0),i<=m&&(i=parseFloat(i)+1),g=a.epoAPI.math.unformat(g,b.localDecimalSeparator),Number.isFinite(g)||(g=0),g=o(g,{precision:f}),Number.isFinite(l)||(l=0),Number.isFinite(j)||(j=10),j<2&&(j=2),e.attr('data-pips')==='yes'&&(q={mode:'count',values:j,filter:function(b,c){if(b=parseFloat(a.epoAPI.math.toFixed(b,f)),l<=0)return 0;if(c===1)if(!Number.isInteger(b))return 2;return c},format:{from:function(c){return a.epoAPI.math.unformat(c,b.localInputDecimalSeparator)},to:function(a){return o(a,{precision:f})}},density:2}),af.create(e.get(0),{direction:c.text_direction,start:g,step:l,connect:'lower',behaviour:'tap',format:{from:function(c){return a.epoAPI.math.unformat(c,b.localDecimalSeparator)},to:function(a){return o(a,{precision:f})}},range:{min:[m],max:[i]},pips:q,tooltips:{from:function(c){return a.epoAPI.math.unformat(c,b.localInputDecimalSeparator)},to:function(a){return o(a,{precision:f})}}}),k=e.find('.noui-handle-lower'),e.get(0).noUiSlider.on('slide',function(){k.trigger('tmmovetooltip'),p.trigger('change.cpf')}),e.get(0).noUiSlider.on('update',function(d,c){d[c]=a.epoAPI.math.unformat(d[c],b.localDecimalSeparator),c=0,h!=='left'&&h!=='right'&&k.attr('title',o(d[c],{precision:f})),p.val(d[c]).trigger('change'),h!==''&&n.html(o(d[c],{precision:f}))}),h!==''&&n.html(g),h!=='left'&&h!=='right'&&(k.attr('title',g),e.addClass('noui-show-tooltip'))})}function aw(){if(!af||h.data('setRangePickersEvents'))return;h.on('click','.tm-show-picker-value',function(){var c=a(this),d=c.closest('.tmcp-field-wrap'),f=d.find('.tmcp-range').val(),e=c.closest('.tmcp-field-wrap').find('.tm-range-picker'),b;c.addClass('tc-hidden').after(a('<input type="number" class="tm-show-picker-value-edit">')),b=d.find('.tm-show-picker-value-edit'),b.focus().val(f).wrap('<div class="tm-show-picker-value-edit-wrap"></div>'),b.attr('step',e.attr('data-step')),b.attr('min',e.attr('data-min')),b.attr('max',e.attr('data-max')),h.data('range-picker-edit',d.find('.tm-show-picker-value-edit'))}),h.on('change input','.tm-show-picker-value-edit',function(){var c=a(this),d=c.closest('.tmcp-field-wrap').find('.tm-range-picker'),b=d.attr('data-step').split('.'),e=c.val();b.length===1?b=0:b=b[1].length,d.get(0).noUiSlider.set([o(e,{precision:b}),null])}),h.on('keydown','.tm-show-picker-value-edit',function(b){var a;e.event?a=e.event.keyCode:a=b.which,a===13&&b.preventDefault()}),h.on('click',function(c){var b;if(!h.data('range-picker-edit')||a(c.target).is('.tm-show-picker-value'))return;a(c.target).closest('.tm-show-picker-value-edit-wrap').length===0&&(b=h.data('range-picker-edit'),b.closest('.tmcp-field-wrap').find('.tm-show-picker-value').data('has-edit',0).removeClass('tc-hidden'),b.closest('.tm-show-picker-value-edit-wrap').remove(),h.removeData('range-picker-edit'))}),h.data('setRangePickersEvents',1)}function bo(c,j){var b=a(j),h=a.tm_datepicker._getInst(b[0]),f=b.data('tc-enabled_only_dates'),m=b.data('tc-disabled_weekdays'),i=b.data('tc-disabled_months'),e=b.data('tc-disabled_dates'),g=b.data('tc-format'),k=c.getDay(),l=c.getDay()+1,d;return!!a.tm_datepicker._isInRange(h,c)&&(f!==''?(d=a.tm_datepicker.formatDate(g,c),f.indexOf(d)!==-1):m.indexOf(k.toString())===-1&&(i.indexOf(l.toString())===-1&&(e===''||(d=a.tm_datepicker.formatDate(g,c),e.indexOf(d)===-1))))}function ax(a){var d,c,e,b,f;if(a.toString().isNumeric())if(d=a===0?a:a>0?1:-1,d!==0){for(c=new Date,e=1,b=!1,f=Math.abs(a);e<=f;)b===!1&&(b=0),c.setDate(c.getDate()+1*d),b++,c.getDay()!==0&&c.getDay()!==6&&e++;b!==!1&&(a=b*d)}return a}function L(b){var i='.tm-epo-timepicker',g,f;if(!a.tm_datepicker)return;f=a('input').map(function(){return this.id}).get().join(' '),g=B.createElement('input'),g.setAttribute('type','date'),g.type==='text'&&(i='.tm-epo-system-timepicker'),b.find(i).toArray().forEach(function(n){var b=a(n),k=null,l=null,m=b.attr('data-time-format').trim(),o=b.attr('data-time-theme').trim(),p=b.attr('data-time-theme-size').trim(),q=b.attr('data-time-theme-position').trim(),g=b.attr('data-tranlation-hour').trim(),i=b.attr('data-tranlation-minute').trim(),j=b.attr('data-tranlation-second').trim();b.attr('type','text'),b.attr('data-min-time').trim()!==''&&(k=b.attr('data-min-time').trim()),b.attr('data-max-time').trim()!==''&&(l=b.attr('data-max-time').trim()),b.attr('data-custom-time-format').trim()!==''&&(m=b.attr('data-custom-time-format').trim()),g||(g=c.hourText),i||(i=c.minuteText),j||(j=c.secondText),b.tm_timepicker(Object.assign({isRTL:c.isRTL,hourText:g,minuteText:i,secondText:j,timeFormat:m,minTime:k,maxTime:l,closeText:c.closeText,showOn:'both',buttonText:'',beforeShow:function(e,c){a(c.dpDiv).removeClass(f).removeClass('tm-ui-skin-epo tm-ui-skin-epo-black tm-datepicker-medium tm-datepicker-small tm-datepicker-large tm-datepicker-normal tm-datepicker-top tm-datepicker-bottom').addClass(this.id+' tm-bsbb-all tm-ui-skin-'+o+' tm-timepicker tm-datepicker tm-datepicker-'+q+' tm-datepicker-'+p).appendTo('body'),h.off('click','.tm-ui-dp-overlay').on('click','.tm-ui-dp-overlay',function(){b.tm_timepicker('hide')}),s.addClass('tm-static'),b.prop('readonly',!0),d.trigger({type:'tm-timepicker-beforeShow',input:e,inst:c})},onClose:function(){s.removeClass('tm-static'),b.prop('readonly',!1),b.trigger('change')}},e.timepicker_settings||{})),a('#ui-tm-datepicker-div').hide()}),b.find('.tm-epo-datepicker').toArray().forEach(function(B){var e=a(B),t=parseInt(e.attr('data-start-year').trim(),10),r=parseInt(e.attr('data-end-year').trim(),10),k=e.attr('data-min-date').trim(),l=e.attr('data-max-date').trim(),i=e.attr('data-disabled-dates').trim(),g=e.attr('data-enabled-only-dates').trim(),q=e.attr('data-exlude-disabled').trim(),m=e.attr('data-disabled-weekdays').trim().split(','),n=e.attr('data-disabled-months').trim().split(','),j=e.attr('data-date-format').trim(),A=e.attr('data-date-showon').trim(),z=e.attr('data-date-defaultdate').trim(),y=e.attr('data-date-theme').trim(),w=e.attr('data-date-theme-size').trim(),x=e.attr('data-date-theme-position').trim(),o,u,p,v;i!==''&&(o=i.split(','),u=i.indexOf(','),u!==-1&&o.length>0&&(i=o)),g!==''&&(p=g.split(','),v=g.indexOf(','),v!==-1&&p.length>0&&(g=p)),k===''?t===''?k=null:k=new Date(t,1-1,1):q&&(k=ax(k)),l===''?r===''?l=null:l=new Date(r,12-1,31):q&&(l=ax(l)),e.data('tc-enabled_only_dates',g),e.data('tc-disabled_weekdays',m),e.data('tc-disabled_months',n),e.data('tc-disabled_dates',i),e.data('tc-format',j),e.tm_datepicker({monthNames:c.monthNames,monthNamesShort:c.monthNamesShort,dayNames:c.dayNames,dayNamesShort:c.dayNamesShort,dayNamesMin:c.dayNamesMin,isRTL:c.isRTL,showOtherMonths:!0,selectOtherMonths:!0,showOn:A,defaultDate:z,buttonText:'',showButtonPanel:!0,firstDay:c.first_day,closeText:c.closeText,currentText:c.currentText,dateFormat:j,minDate:k,maxDate:l,onSelect:function(){var c=a(this),l='#'+a.epoAPI.dom.id(c.attr('id')),d=c.tm_datepicker('getDate'),h='',f='',k='',p=b.find(l+'_day'),q=b.find(l+'_month'),r=b.find(l+'_year'),o,e;d&&(h=d.getDate(),f=d.getMonth()+1,k=d.getFullYear(),o=a.tm_datepicker.formatDate(j,d),(n.indexOf(f.toString())!==-1||m.indexOf(d.getDay().toString())!==-1||i.indexOf(o)!==-1||g!==''&&g.indexOf(o)===-1)&&(e=c.data('tm-last-date'),c.data('tm-last-date')?e=c.data('tm-last-date'):e='',c.val(e),c.tm_datepicker('setDate',e),e?(d=c.tm_datepicker('getDate'),h=d.getDate(),f=d.getMonth()+1,k=d.getFullYear()):(h='',f='',k=''))),p.val(h),q.val(f),r.val(k),c.data('tm-last-date',c.val())},beforeShow:function(c,b){a(b.dpDiv).removeClass(f).removeClass('tm-datepicker-normal tm-datepicker-top tm-datepicker-bottom').addClass(this.id+' tm-bsbb-all tm-ui-skin-'+y+' tm-datepicker tm-datepicker-'+x+' tm-datepicker-'+w).appendTo('body'),h.off('click','.tm-ui-dp-overlay').on('click','.tm-ui-dp-overlay',function(){e.tm_datepicker('hide')}),h.off('click','.ui-tm-datepicker-current').on('click','.ui-tm-datepicker-current',function(){var h=new Date,f=a.tm_datepicker._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth(),h.getDate())),l=f.getDay(),o=f.getMonth()+1,p='#'+b.id.replace(/\\\\/g,'\\'),d=!1,k=e.tm_datepicker('getDate'),c;if(g!=='')c=a.tm_datepicker.formatDate(j,k),d=g.indexOf(c)!==-1;else if(n.indexOf(o.toString())!==-1||m.indexOf(l.toString())!==-1)d=!1;else{if(i!=='')return c=a.tm_datepicker.formatDate(j,k),[i.indexOf(c)===-1,''];d=!0}d&&(a.tm_datepicker._setDate(b,f),a.tm_datepicker._gotoToday(p))}),s.addClass('tm-static'),e.prop('readonly',!0),d.trigger({type:'tm-datepicker-beforeShow',input:c,inst:b})},onClose:function(){s.removeClass('tm-static'),e.prop('readonly',!1),e.trigger('change')},beforeShowDay:function(b){var d=b.getDay(),e=b.getMonth()+1,c;return g!==''?(c=a.tm_datepicker.formatDate(j,b),[g.indexOf(c)!==-1,'']):n.indexOf(e.toString())!==-1||m.indexOf(d.toString())!==-1?[!1,'']:i!==''?(c=a.tm_datepicker.formatDate(j,b),[i.indexOf(c)===-1,'']):[!0,'']}}),a('#ui-tm-datepicker-div').hide()}),b.find('.tmcp-date-select').on('change.cpf',function(){var d='#'+a.epoAPI.dom.id(a(this).attr('data-tm-date')),c=b.find(d),h=c.attr('data-date-format'),e=b.find(d+'_day').val(),f=b.find(d+'_month').val(),g=b.find(d+'_year').val(),i=a.tm_datepicker.formatDate(h,new Date(g,parseInt(f,10)-1,e));e>0&&f>0&&g>0?(c.tm_datepicker('setDate',i),c.trigger('change')):(c.val(''),c.trigger('change.cpf'))}).on('focus.cpf',function(){var h='#'+a.epoAPI.dom.id(a(this).attr('data-tm-date')),l=b.find(h),k=b.find(h+'_day'),i=b.find(h+'_month'),j=b.find(h+'_year'),f=k.val(),c=i.val(),d=j.val(),g=a(this);d!==''&&c!==''&&f!==''||d!==''&&c!==''&&f===''||f!==''&&d!==''&&c===''||f!==''&&c!==''&&d===''?g.find('option').toArray().forEach(function(k){var b=a(k),h=b.val(),i=d+'-'+c+'-'+f,j;if(g.is('.tmcp-date-day')){if(d===''||c==='')return;i=d+'-'+c+'-'+h}else if(g.is('.tmcp-date-month')){if(d===''||f==='')return;i=d+'-'+h+'-'+f}else if(g.is('.tmcp-date-year')){if(f===''||c==='')return;i=h+'-'+c+'-'+f}if(h!=='')try{j=a.tm_datepicker.parseDate('yy-mm-dd',i),j&&(bo(j,l)?b.prop('disabled',!1):b.prop('disabled',!0))}catch(a){e.console.log(a),b.prop('disabled',!0),I=a}}):(k.find('option').prop('disabled',!1),i.find('option').prop('disabled',!1),j.find('option').prop('disabled',!1))}),d.on('resizestart',function(){var b=a(B.activeElement);if(b.is('.hasDatepicker')){if(b.data('resizestarted',!0),a(e).width()<768){b.data('resizewidth',!0);return}b.tm_datepicker('hide')}}),d.on('resizestop',function(){var b=a(B.activeElement);b.is('.hasDatepicker')&&b.data('resizestarted')&&(b.data('resizewidth')&&b.tm_datepicker('hide'),b.tm_datepicker('show')),b.data('resizestarted',!1),b.data('resizewidth',!1)})}function W(e){var f=e.epoEventId,h=e.main_product,c=!a.tcepo.formSubmitEvents[f].some(function(a){return typeof a&&(typeof a.trigger=='function'||!1)&&!a.trigger()}),g;return a.tcepo.formSubmitEvents[f].forEach(function(a){g=typeof a,g==='object'&&(c?a.on_true():a.on_false())}),c||setTimeout(function(){h.find(b.addToCartButtonSelector).first().removeClass('disabled').removeClass('loading').prop('disabled',!1).removeClass('fpd-disabled')},100),d.trigger('tm-apply-submit-events',{epo:{form_is_submit:c}}),c}function aF(g){var k=g.form,l=g.this_epo_container,i=g.main_product,m=g.epoEventId,f,e;return c.tm_epo_global_enable_validation==='yes'&&(f={},l.find('.tmcp-ul-wrap').toArray().forEach(function(c){var b,i,d,g,h;c=a(c),e=c.data('tm-validation'),e&&a.tmType(e)==='object'&&(b=c.find('.tm-epo-field'),i=b.first().attr('name'),c.is('.tm-extra-product-options-radio.tm-element-ul-radio')?(i=b.last().attr('name'),f[i]=e):c.is('.tm-extra-product-options-checkbox.tm-element-ul-checkbox')?b.each(function(g,d){'required'in e&&(e.required=function(e){var d=c.find('input.tm-epo-field.tmcp-checkbox:checked').length;return d===0?b.last().attr('name')===a(e).attr('name'):d<=0}),f[a(d).attr('name')]=e}):c.is('.tm-extra-product-options-product.tm-element-ul-product')?b.is(':checkbox')?b.each(function(k,i){'required'in e&&(h=a(i),h.is(':checkbox')&&(e.required=function(g){var e=c.find('input.tm-epo-field.tmcp-checkbox:checked'),d=e.length,f;return d===0?b.last().attr('name')===a(g).attr('name'):(f=e.map(function(){return a(this)}).get().some(function(a){return a.closest('.tc-epo-element-product-holder').find('.tm-qty').first().val()<=0}),d>0)?f:d<=0},h.attr('data-type')==='variable'&&(d=h.closest('.tc-epo-element-product-holder').find('.product-variation-id').first().attr('name'),g={required:function(c){var d=a(c),e=d.closest('.tc-epo-element-product-holder'),b=e.find('.tc-epo-field-product');return!!(j(b,!0)&&b.is(':checked'))}},f[d]=g))),f[h.attr('name')]=e}):b.is(':radio')?(e.product_element_radio_qty=!0,f[b.attr('name')]=e,d=b.closest('.tc-element-container').find('.product-variation-id').first().attr('name'),g={required:function(c){var d=a(c),e=d.closest('.tc-element-container'),b=e.find('.tc-epo-field-product:checked');return!!(b.length&&b.attr('data-type')==='variable'&&j(b,!0)&&b.is(':checked'))}},f[d]=g):b.is('select')&&(e.product_element_select_qty=!0,f[b.attr('name')]=e,d=b.closest('.tc-element-container').find('.product-variation-id').first().attr('name'),g={required:function(c){var d=a(c),e=d.closest('.tc-element-container'),b=e.find('.tc-epo-field-product');return!!(b.length&&b.children(':selected').attr('data-type')==='variable'&&j(b,!0))}},f[d]=g):f[i]=e)}),k.removeData('tc_validator'),k.tc_validate({focusInvalid:!1,ignore:b.qtySelector+",.tcdisabled,.tmcp-upload-hidden,#wc_bookings_field_duration,input.tm-qty:hidden[type='number'],input.input-text.qty,.ignore,.variations select,.tc-epo-variable-product-selector,.tm-extra-product-options-variations input,.tm-extra-product-options-variations select,input:not(.tc-extra-product-options input),select:not(.tc-extra-product-options select)",rules:f,errorClass:'tm-error',validClass:'tm-valid',errorElement:'label',errorPlacement:function(a,b){return a.addClass('tc-cell tcwidth-100'),c.tm_epo_global_error_label_placement==='before'?b.closest('.tc-element-container').before(a):b.closest('.tc-element-container').after(a),!1},invalidHandler:function(e,c){d.trigger('tm-invalidHandler',{epo:{validator:c}}),setTimeout(function(){i.find(b.addToCartButtonSelector).first().is('.disabled')||(i.find(b.addToCartButtonSelector).first().removeClass('loading').prop('disabled',!1).removeClass('fpd-disabled'),i.find(b.addToCartButtonSelector).first().removeClass('disabled').removeClass('loading').prop('disabled',!1).removeClass('fpd-disabled'))},100),c.errorList&&c.errorList[0]&&c.errorList[0].element&&O(a(c.errorList[0].element),m)},submitHandler:function(){var a;return g.is_quickview||(i.find(b.addToCartButtonSelector).first().addClass('disabled'),a=function(){i.find(b.addToCartButtonSelector).first().removeClass('disabled'),h.off('ajaxSuccess',a)},h.on('ajaxSuccess',a)),W(g)}}),k.find(b.addToCartButtonSelector).on('click',function(a){k.tc_validate().form()||(a.preventDefault(),a.stopImmediatePropagation())}),!0)}function bt(b){var c=b.form,e=b.epoEventId;d.trigger('tm-from-submit',{epo:b,functions:{tm_apply_validation:aF,apply_submit_events:W}}),!aF(b)&&a.tcepo.formSubmitEvents[e].length&&c.on('submit',function(){W(b)})}function bu(f){var k=f.epoHolder,e=f.totalsHolder,h=f.totalsHolderContainer,i=f.currentCart,j=f.variationForm,d=f.variation,g=e.data('variations'),b;e.data('current_variation',d),d&&'display_price'in d&&!e.data('tm-epo-is-woocs')?(b=d.display_price,e.data('priceIsWithDiscount','1'),e.removeData('tcprice')):g&&d&&d.variation_id&&g[d.variation_id]!==void 0?(b=g[d.variation_id],e.removeData('tcprice')):d&&a(d.price_html).find('.amount:last').length&&(b=a(d.price_html).find('.amount:last').text(),b=b.replace(c.currency_format_thousand_sep,''),b=b.replace(c.currency_format_decimal_sep,'.'),b=b.replace(/[^0-9.]/g,''),b=parseFloat(b),e.removeData('tcprice')),b=ah(b,e,d),e.data('price',b),h.find('.cpf-product-price').val(b),setTimeout(function(){k.find('select.tm-epo-field').trigger('tm-select-change-html-all-math')},100),j.data('tm-styled-variations')||i.trigger({type:'tm-epo-update'})}function m(l,p,n,e,f,j,i,r,m,s){var h=p.attr('class')+p.attr('data-uniqid')+n+l.is_associated+m+r+m+s||'none',c,k,d;return h!=='none'&&q!==!0&&q!==!1&&q[h]!==void 0?q[h]:(c=s?'undiscounted_':'',d=p.find(n),l.is_associated===!1&&(d=d.not(b.associatedEpoSelector+' '+n)),r||(d=d.filter('.tcenabled')),e||(e=0),f||(f=0),j||(j=[]),d.toArray().forEach(function(H){var b=a(H),d='',A=b.closest('.cpf-element'),G=b.closest('.tmcp-field-wrap'),D=A.attr('data-fblabelshow'),F=A.attr('data-fbvalueshow'),E='',y=G.find('.tm-qty').val(),t='',x=!1,q,h,p,z,w,B,v,C,u,s,k,n;D===''&&(E=A.find('.tc-epo-label').html()),y===void 0&&(y=''),b.is(':checkbox, :radio, :input')&&(n=0,q=0,h=0,p=0,b.is('.tmcp-checkbox, .tmcp-radio')?r||b.is(':checked')?(n=b.data(c+'raw_price'),q=b.data(c+'price'),h=b.data(c+'raw_original_price'),p=b.data(c+'original_price'),i=!0,b.data('isset',1),z=b.closest('li.tmcp-field-wrap'),w=z.find('.checkbox-image,.radio-image'),d='',t='',B=b.closest('li.tmcp-field-wrap').find('.tm-label'),B.length&&(d=B.html(),t=d),w.length&&(b.closest('.tmcp-ul-wrap').is('.tc-colors-container')?d=d+w.closest('.tc-label-wrap').clone().addClass('tc-img-floating')[0].outerHTML:d=d+w.clone().addClass('tc-img-floating')[0].outerHTML),b.closest('.tmcp-ul-wrap').is('.tc-images-container')&&(d=z.find('.tc-label').first().html(),t=d,w.length&&(d=d+'<img class="tc-img-floating" src="'+b.attr('data-image')+'">')),x=!0):b.data('isset',0):b.is('.tmcp-select')?(k=b.find('option:selected'),n=k.data(c+'raw_price'),q=k.data(c+'price'),h=k.data(c+'raw_original_price'),p=k.data(c+'original_price'),v=b.children('option:selected'),v.val()===''&&v.attr('data-rulestype')===''||(i=!0),b.find('option').data('isset',0),k.data('isset',1),k.val()===''&&k.attr('data-rulestype')===''||(d=k.attr('data-text'),x=!0,t=d)):b.is('.tmcp-selectmultiple')?(k=b.find('option:selected'),k.toArray().forEach(function(e){e=a(e),n=n+a.epoAPI.math.toFloat(e.data(c+'raw_price')),q=q+a.epoAPI.math.toFloat(e.data(c+'price')),h=h+a.epoAPI.math.toFloat(e.data(c+'raw_original_price')),p=p+a.epoAPI.math.toFloat(e.data(c+'original_price')),v=b.children('option:selected'),v.val()===''&&v.attr('data-rulestype')===''||(i=!0),b.find('option').data('isset',0),e.data('isset',1),e.val()===''&&e.attr('data-rulestype')===''||(d=e.attr('data-text'),x=!0,t=d)})):(s=b.val(),b.is("[type='file']")&&(s=s.replace('C:\\fakepath\\','')),s?b.is('.tmcp-range')&&s==='0'?b.data('isset',0):(n=b.data(c+'raw_price'),q=b.data(c+'price'),h=b.data(c+'raw_original_price'),p=b.data(c+'original_price'),i=!0,b.data('isset',1),d=s,b.is('.tmcp-range')&&(C=b.closest('.tmcp-field-wrap').find('.tm-range-picker'),u=C.attr('data-step').split('.'),u.length===1?u=0:u=u[1].length,d=o(d,{precision:u})),x=!0,t=s):b.data('isset',0)),n||(n=0),h||(h=0),q||(q=0),p||(p=0),x&&j.push({title:E,value:d,valueText:t,price:q,original_price:p,quantity:y,label_show:D,value_show:F,input_type:b.attr('type')}),m&&(n=g(n,l.this_epo_totals_container,b,void 0,void 0,void 0,!0),h=g(h,l.this_epo_totals_container,b,void 0,void 0,void 0,!0)),e=a.epoAPI.math.toFloat(e)+a.epoAPI.math.toFloat(n),e=a.epoAPI.math.toFloat(a.epoAPI.math.round(e,10)),f=a.epoAPI.math.toFloat(f)+a.epoAPI.math.toFloat(h),f=a.epoAPI.math.toFloat(a.epoAPI.math.round(f,10)))}),k={total:e,original_total:f,floatingBoxData:j,showTotal:i,elementsLength:d.length},q===!0?(q={},q[h]=k):q!==!0&&q!==!1&&(q[h]=k),k)}function aH(q,r,e,p,j,o,f,n,m){var k=a.extend(!0,{},q),g=e.find(b.associatedEpoSelector),i=e,h=!0,l;if(i.closest('.cpf-element').is('.tc-hidden'))return;f.addClass('tm-hidden'),f.length&&aD(f,!0),p==='variable'?e.is('.tc-init-variations')?e.trigger('refresh.tc-variation-form'):(e.addClass('variations_form'),setTimeout(function(){l=v(i,!1,g.attr('data-product-id'),g.attr('data-epo-id'),j,k),e.addClass('tc-init-variations'),e.tc_product_variation_form(j,o,f,l)},40),h=!1):e.is('.tc-init-product')||(e.addClass('tc-init-product'),f.find('.tc-epo-element-variable-product').removeClass('variations_form'),f.find('.tc-epo-element-variations').removeClass('variations'),setTimeout(function(){v(i,!1,g.attr('data-product-id'),g.attr('data-epo-id'),j,k)},20),h=!1),setTimeout(function(){f.length&&aD(e,!1)},200),setTimeout(function(){m.length&&m.trigger('change'),e.removeClass('tm-hidden'),h&&(d.trigger('cpflogicdone'),e.find('.tm-quantity').trigger('showhide.cpfcustom')),n===void 0&&c.tm_epo_global_product_element_scroll==='yes'&&d.tcScrollTo(e,200,a.epoAPI.math.toFloat(c.tm_epo_global_product_element_scroll_offset))},210)}function ac(l,B,w){var ab=l.product_id,n=l.main_product,v=l.main_cart,ag=l.this_epo_container,aj=l.this_totals_container,Y=l.this_epo_totals_container,X=l.epoEventId,ac=l.main_epo_inside_form,ak=l.epo_id_selector,al=l.epo_id,am=l.product_id_selector,J='main',ai=l.is_associated?'tc-variation-form':'wc-variation-form',E=l.is_associated?'tc_':'',f,t,af,x,u,I,s,j,G,H,M,F,S,$,_,Z,L,O,W;w&&B?(J=a.epoAPI.applyFilter('tc_get_item_id',B.attr('data-item_id'),B),j=n.find('.tm-extra-product-options.tm-cart-'+J),G=n.find('.tm-totals-form-'+J),f=n.find('.tm-epo-totals.tm-cart-'+J),u=B.find('.variations_form').first()):((!v||v.length===0)&&(ag.is('.tc-shortcode')?v=n:v=R(n,n,'form',ab)),B=v.parent(),j=ag,G=aj,f=Y,u=l.variations_form),l.is_associated&&(J=j.attr('data-cart-id')),t=w||v,f.data('tm_for_cart',t),af=N(t),I=P(t),f.data('variationIdElement',bn(t,'.wceb_picker_wrap '+af)),f.data('qty_element',I),x=f.data('type'),u.data('tc_product_id',ab),s=f.attr('data-tm-epo-final-total-box'),d.on('epoCalculateRules',function(b,a){b&&a&&a.currentCart&&ae(l,a.currentCart)}),t.is('form')&&t.on('reset',function(){var b=a(this);setTimeout(function(){a(b.data('epo_id_selector')).find('.tm-epo-field').trigger('change')},1)}),ae(l,t),F=j.find('.tm-epo-field'),l.is_associated||(F=F.not(b.epoSelector+' '+b.associatedEpoSelector+' .tm-epo-field')),$=j.find('.tm-epo-field.tmcp-textarea,.tm-epo-field.tmcp-textfield'),l.is_associated||($=$.not(b.epoSelector+' '+b.associatedEpoSelector+' .tm-epo-field')),_=j.find('.tm-epo-reset-radio'),l.is_associated||(_=_.not(b.epoSelector+' '+b.associatedEpoSelector+' .tm-epo-reset-radio')),Z=j.find('.tm-epo-field.tmcp-upload'),l.is_associated||(Z=Z.not(b.epoSelector+' '+b.associatedEpoSelector+' .tm-epo-field.tmcp-upload')),L=j.find('.tm-has-clearbutton .tm-epo-field'),l.is_associated||(L=L.not(b.epoSelector+' '+b.associatedEpoSelector+' .tm-has-clearbutton .tm-epo-field')),O=j.find('.tm-quantity .tm-qty'),l.is_associated||(O=O.not(b.epoSelector+' '+b.associatedEpoSelector+' .tm-quantity .tm-qty')),W=j.find('.tm-quantity'),l.is_associated||(W=W.not(b.epoSelector+' '+b.associatedEpoSelector+' .tm-quantity')),S=j.find('select.tm-epo-field'),l.is_associated||(S=S.not(b.epoSelector+' '+b.associatedEpoSelector+' select.tm-epo-field')),S.off('tm-select-change-html').on('tm-select-change-html',function(){var b=a(this),g,h,d,e,i;if(b.is('.tc-epo-field-product')||b.is('.tmcp-selectmultiple'))return;if(v&&v.data('per_product_pricing')!==void 0&&!v.data('per_product_pricing'))return;g=k(b.find('option:selected').data('price'),f,!0,!1,b),h=k(b.find('option:selected').data('original_price'),f,!0,!1,b),d=b.closest('.tmcp-field-wrap').find('.tc-tooltip'),e=b.closest('.tmcp-field-wrap').find('.tc-inline-description'),A(b.closest('.tmcp-field-wrap').find('.tc-price'),b.find('option:selected').data('price'),g,b.find('option:selected').data('original_price'),h),d.length>0&&d.attr('data-tm-tooltip-html',b.find('option:selected').attr('data-tm-tooltip-html')).trigger('tc-tooltip-html-changed'),e.length>0&&(b.find('option:selected').attr('data-tm-tooltip-html')?e.html(b.find('option:selected').attr('data-tm-tooltip-html')):e.html('')),(b.find('option:selected').attr('data-hide-amount')==='0'||c.tm_epo_show_price_inside_option_hidden_even==='yes')&&c.tm_epo_show_price_inside_option==='yes'&&b.find('option:selected').attr('data-text')&&(c.tm_epo_auto_hide_price_if_zero==='yes'&&a.tmempty(b.find('option:selected').data('price'))===!1||c.tm_epo_auto_hide_price_if_zero!=='yes'&&b.find('option:selected').attr('data-price')!=='')&&(i='',b.find('option:selected').html(b.find('option:selected').attr('data-text')+' ('+i+g+')')),b.val()===''?d.addClass('tm-hidden'):b.find('option:selected').attr('data-tm-tooltip-html')?d.removeClass('tm-hidden'):d.addClass('tm-hidden')}).off('tm-math-select-change-html-all tm-select-change-html-all tm-select-change-html-all-math').on('tm-math-select-change-html-all tm-select-change-html-all tm-select-change-html-all-math',function(i){var b=a(this),e,h,d,g,j;if(b.is('.tc-epo-field-product'))return;if(e=b.closest('.tmcp-field-wrap').find('.tc-tooltip'),h=b.closest('.tmcp-field-wrap').find('.tc-inline-description'),e.length>0&&e.attr('data-tm-tooltip-html',b.find('option:selected').attr('data-tm-tooltip-html')).trigger('tc-tooltip-html-changed'),b.val()===''?e.addClass('tm-hidden'):b.find('option:selected').attr('data-tm-tooltip-html')?e.removeClass('tm-hidden'):e.addClass('tm-hidden'),h.length>0&&(b.find('option:selected').attr('data-tm-tooltip-html')?h.html(b.find('option:selected').attr('data-tm-tooltip-html')):h.html('')),v&&v.data('per_product_pricing')!==void 0&&!v.data('per_product_pricing'))return;c.tm_epo_show_price_inside_option==='yes'&&b.find('option').each(function(){if(d=a(this),!d.val())return!0;i.type==='tm-select-change-html-all'?(d.removeClass('tm-epo-late-field').removeData('tm-price-for-late islate'),r(l,b,void 0,d,1)):i.type==='tm-math-select-change-html-all'?r(l,b,void 0,d,1,!0):i.type==='tm-select-change-html-all-math'&&(d.removeClass('tm-epo-late-field').removeData('tm-price-for-late islate'),r(l,b,void 0,d,1,!0)),g=1,c.tm_epo_multiply_price_inside_option!=='yes'&&(g=b.data('tm-quantity')),g||(g=1),j=k(d.data('price')/g,f,!0,!1,b),(d.attr('data-hide-amount')==='0'||c.tm_epo_show_price_inside_option_hidden_even==='yes')&&d.attr('data-text')&&(c.tm_epo_auto_hide_price_if_zero==='yes'&&a.tmempty(d.data('price'))===!1||c.tm_epo_auto_hide_price_if_zero!=='yes'&&d.attr('data-price')!=='')&&d.html(d.attr('data-text')+' ('+j+')')})}).off('tm-select-change').on('tm-select-change',function(){var b=a(this),c=b.closest('.cpf-element').attr('data-uniqid');if(b.is('.tc-epo-field-product'))return;if(v&&v.data('per_product_pricing')!==void 0&&!v.data('per_product_pricing'))return;b.removeData('addedtcEpoBeforeOptionPriceCalculation'),b.removeData('addedfieldtcEpoBeforeOptionPriceCalculation'),d.off('tcEpoBeforeOptionPriceCalculation.math'+c),d.off('tcEpoAfterOptionPriceCalculation.math'+c),b.trigger('tm-select-change-html'),b.trigger('tm-select-change-html-all'),t.trigger({type:'tm-epo-update',norules:1,element:b})}).trigger('tm-select-change-html-all'),O.off('focus.cpf').on('focus.cpf',function(){var b=a(this),g=b.closest('.tmcp-field-wrap').find('.tm-epo-field'),c=parseFloat(b.val()),f=parseFloat(b.attr('max')),d=parseFloat(b.attr('min')),e=b.attr('step'),i=Q(g,!1),j=T(g,!1),h=!0;(!c||c===''||c==='NaN')&&(c=0),(f===''||f==='NaN')&&(f=''),(d===''||d==='NaN')&&(d=0),(e==='any'||e===''||e===void 0||parseFloat(e)==='NaN')&&(e=1),(c<d||c>f)&&(h=!1),i&&j&&h?b.data('tm-prev-value',c):b.data('tm-prev-value',d)}).off('change.cpf').on('change.cpf',function(m,h){var b=a(this),f=b.closest('.tmcp-field-wrap').find('.tm-epo-field'),c=parseFloat(b.val()),g=parseFloat(b.attr('max')),d=parseFloat(b.attr('min')),e=b.attr('step'),j=Q(f,!1),k=T(f,!1),i=!0;(!c||c===''||c==='NaN')&&(c=0),(g===''||g==='NaN')&&(g=''),(d===''||d==='NaN')&&(d=0),(e==='any'||e===''||e===void 0||parseFloat(e)==='NaN')&&(e=1),(c<d||c>g)&&(i=!1),j&&k&&i?(l.noEpoUpdate?f.data('tm-quantity',b.val()).trigger('change.cpf',h).trigger('change.cpfproduct',h):f.data('tm-quantity',b.val()).trigger('change',h),f.trigger('tm-select-change-html-all')):b.data('tm-prev-value')?b.val(b.data('tm-prev-value')):b.val(d),b.trigger('cpf-changed')}).off('tmaddquantity').on('tmaddquantity',function(){var b=a(this),c=b.closest('.tmcp-field-wrap').find('.tm-epo-field');c.data('tm-quantity',b.val())}),M=j.find('.tmcp-textfield.tm-epo-field[maxlength],textarea.tm-epo-field[maxlength]'),l.is_associated||(M=M.not(b.epoSelector+' '+b.associatedEpoSelector+' .tm-epo-field')),M.each(function(){var d=a(this),e=a.epoAPI.template.html(b.templateEngine.tc_chars_remanining,{maxlength:d.attr('maxlength'),characters_remaining:c.i18n_characters_remaining});d.after(a(e))}),M.off('change.tc_maxlen input.tc_maxlen').on('change.tc_maxlen input.tc_maxlen',function(){var b=a(this);b.closest('.tmcp-field-wrap').find('.tc-chars-remanining').html(parseInt(b.attr('maxlength'),10)-parseInt(b.val().length,10))}),F.off('tm_trigger_product_image').on('tm_trigger_product_image',function(){var b=a(this),c,e,g,f,d;b.is('.tm-product-image:checkbox, .tm-product-image:radio, select.tm-product-image')?(e=b.closest('.tmcp-field-wrap').find('label img'),g=b.closest('.cpf-section'),f=g.is('.tm-epo-variation-section'),c=b,b.is('select.tm-product-image')&&(c=b.children('option:selected')),a(e).length>0||f&&c.attr('data-image')!==void 0||c.attr('data-image')!==void 0&&c.attr('data-image')!==''||c.attr('data-imagep')!==void 0&&c.attr('data-imagep')!==''?b.is(':checked')||b.is('select.tm-product-image')&&b.val()!==''&&(b.find('option:selected').attr('data-rules')!==''||b.is('.tm-epo-variation-element'))?(d=a(e).first().attr('data-original'),!d&&!f&&(d=a(e).first().attr('src')),d||(d=c.attr('data-image')),c.attr('data-imagep')&&(d=c.attr('data-imagep')),d?n.trigger('tm_change_product_image',{src:d,element:b,element_current:c,main_product:n,epo_holder:j}):n.trigger('tm_change_product_image',{src:!1,element:b,element_current:c,main_product:n,epo_holder:j})):n.trigger('tm_restore_product_image',{element:b,element_current:c,main_product:n,epo_holder:j}):n.trigger('tm_restore_product_image',{element:b,element_current:c,main_product:n,epo_holder:j})):n.trigger('tm_attempt_product_image',{element:b,element_current:c,main_product:n,epo_holder:j})}),W.off('showhide.cpfcustom').on('showhide.cpfcustom',function(){var e=a(this),b=e.closest('.tmcp-field-wrap').find('.tm-epo-field'),f=!1,d,g,h,i;b.is('.tm-epo-variation-element')||(b.is('select')?b.val()!==''&&(f=!0):b.is(':checkbox')?b.is(':checked')&&(f=!0):b.is(':radio')?b.is(':checked')&&(f=!0,c.tm_epo_show_only_active_quantities==='yes'&&(i=b.closest('.tc-element-inner-wrap').find('.tm-epo-field.tmcp-radio'),i.each(function(){a(this).closest('.tmcp-field-wrap').find('.tm-quantity').hide()}))):b.val()&&(f=!0),d=e.find('.tm-qty'),g=d.val(),h=d.attr('min')||'',f?(c.tm_epo_show_only_active_quantities==='yes'&&e.show(),d.removeClass('ignore').prop('disabled',!1)):(c.tm_epo_show_only_active_quantities==='yes'&&(e.hide(),g||d.val(h)),d.addClass('ignore').prop('disabled',!0)),setTimeout(function(){e.closest('.tcowl-carousel').trigger('refresh.owl.carousel')},200))}),F.off('change.cpfcustom').on('change.cpfcustom',function(){a(this).closest('.tmcp-field-wrap').find('.tm-quantity').trigger('showhide.cpfcustom')}),F.off('change.cpf').on('change.cpf',function(h,g){var b=a(this),e=b.closest('.tmcp-field-wrap'),f=b.closest('.tmcp-ul-wrap'),c=f.attr('data-tm-connector'),d;b.is(':checkbox, :radio')&&(b.is(':radio')&&(g||(c!==void 0?a('[data-tm-connector="'+c+'"]').find('.tmcp-field-wrap').removeClass('tc-active'):f.find('.tmcp-field-wrap').removeClass('tc-active')),c!==void 0&&a('[data-tm-connector="'+c+'"]').find('.tmcp-field-wrap').removeClass('tc-active')),b.is(':checked')?e.addClass('tc-active'):e.removeClass('tc-active')),b.is('.tm-epo-variation-element')||(b.is('.use_images:checkbox, .use_images:radio')&&b.attr('data-imagec')&&(d=e.find('.radio-image,.checkbox-image').first(),d.length>0&&(b.is(':checked')?d.prop('src',b.attr('data-imagec')):d.prop('src',b.attr('data-image')))),b.is('.use_images:radio')&&b.closest('.cpf-type-radio').find('.use_images:radio').not(b).each(function(){var b=a(this);b.closest('.tmcp-field-wrap').find('.radio-image').first().prop('src',b.attr('data-image'))}),b.is('.tmcp-range')&&b.trigger('change.cpflogic'),b.is('select')?b.trigger('tm-select-change'):(b.is('.tmcp-radio')&&b.closest('.cpf-element').find('.tm-quantity .tm-qty').each(function(){a(this).closest('li.tmcp-field-wrap').find('.tmcp-radio').is(':checked')?a(this).prop('disabled',!1):a(this).attr('disabled','disabled')}),q=!0,t.trigger({type:'tm-epo-update',norules:1,element:b}),q=!1)),b.trigger('tm_trigger_product_image'),setTimeout(function(){a('.tm-owl-slider').each(function(){a(this).trigger('refresh.owl.carousel')})},200),n.trigger('tm_attempt_product_image',{element:b,main_product:n,epo_holder:j})}),F.filter(':checkbox:checked, :radio:checked').each(function(){a(this).closest('.tmcp-field-wrap').addClass('tc-active'),a(this).trigger('change.cpf')}),L.off('change.cpfclearbutton').on('change.cpfclearbutton cpfclearbutton',function(){var d=a(this),e=d.closest('.tmcp-field-wrap'),b,c;d.is(':checked')&&(c=d.closest('.tc-element-inner-wrap'),c.find('.tc-epo-element-product-li-container').length&&(c=c.find('.tmcp-ul-wrap').first().children('.tmcp-field-wrap').not('.tc-epo-element-product-li-container')),b=c.find('.tm-epo-reset-radio'),b.length||(b=d.closest('.tc-element-inner-wrap').find('.tm-epo-reset-radio').first()),b.removeClass('tm-hidden'),e.append(b))}),_.off('click.cpf').on('click.cpf',function(){var c=a(this),d=c.closest('.tc-element-inner-wrap'),b=d.find('.tm-epo-field.tmcp-radio:checked');b.length&&(b.prop('checked',!1),b.trigger('change',{forced:1})),c.addClass('tm-hidden')}),V&&V.debounce&&$.on('keyup',V.debounce(function(){var b=a(this);c.tm_epo_global_enable_validation==='yes'&&a.tc_validator&&b.closest('.tmcp-ul-wrap').data('tm-validation')&&b.tc_rules()&&t.tc_validate().element(b),b.trigger('change.cpf'),b.closest('.tmcp-field-wrap').find('.tm-quantity').trigger('showhide.cpfcustom')},10)),Z.off('change.cpfv tcupload').on('change.cpfv tcupload',function(){var d=a(this),r=d.closest('label'),n=d.closest('.tmcp-field-wrap'),q=n.find('.cpf-upload-container'),k=n.find('.tm-filename'),m=d.val().replace('C:\\fakepath\\',''),h=[],o=e.URL||e.webkitURL,g=n.find('.tc-upload-preview'),f,l,b,p,i;q.length&&k.length<=0&&(k=a('<span class="tm-filename"></span>'),r.after(k)),(m===void 0||m==='undefined')&&(m=''),d.next('.tmcp-upload-hidden').remove(),h=d.attr('data-file'),h=h?h.split('|'):[],this.files?f=Array.from(this.files):h.length>0&&(f=h),f.length>1?k.html(''+f.length+' '+(f.length===1?c.i18n_file:c.i18n_files)):f.length===1?k.html(m):k.empty(),g.length||(g=a('<div class="tc-upload-preview tc-hidden"></div>'),n.append(g)),g.empty(),b=j.data('num_uploads'),b||(b=[]),i=d.closest('.cpf-element').attr('data-uniqid'),b[i]||(b[i]=[]),(m||f.length>0)&&o&&o.createObjectURL?(c.tm_epo_upload_inline_image_preview==='yes'&&(f.length>1?g.addClass('multiple'):g.removeClass('multiple'),g.removeClass('tc-hidden')),p=function(h,c,b,f,e){var g=d[0].files&&d[0].files[b]&&d[0].files[b].size?d[0].files[b].size:0,a='<div class="tc-upload-image">';c?a=a+'<img src="'+c+'">':a=a+'<div class="tc-file-ext-overlay"></div>',a=a+'<div class="tc-file-name">'+h.name+'</div>',(D||z)&&(a=a+'<button type="button" class="tc-upload-remove"><svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg></button>'),e&&(a=a+'<div class="tc-file-ext">'+e+'</div>'),a=a+'<div class="tc-file-size">'+bq(g)+'</div>',a=a+'</div>',f.append(a)},f.forEach(function(d,f){var e;c.tm_epo_upload_inline_image_preview==='yes'&&(e=a('<div class="tc-upload-file"></div>'),g.append(e),l=new Image,l.onload=function(){p(d,this.src,f,e)},l.onerror=function(){p(d,!1,f,e,d.name.split('.').pop())},h.length>0?l.src=h[f]:(l.src=o.createObjectURL(d),o.revokeObjectURL(d))),b[i].push(d.name)}),j.data('num_uploads',b)):delete b[i],b[i]&&b[i].length===0&&delete b[i]}),h.on('click','.tc-upload-remove',function(){var r=a(this),g,q,e,p,o,n,m,l,k,d,b,f,h,i;(D||z)&&(q=r.closest('.cpf-element'),e=q.find('.tm-epo-field'),p=r.closest('.tc-upload-file'),o=r.closest('.tmcp-field-wrap'),n=o.find('.tc-upload-preview'),m=o.find('.tm-filename'),l=p.index(),g=e.val().replace('C:\\fakepath\\',''),(g===void 0||g==='undefined')&&(g=''),k=Array.from(e[0].files),k.splice(l,1),d=new D('').clipboardData||new z,k.forEach(function(a){d.items.add(a)}),k.length>1?n.addClass('multiple'):n.removeClass('multiple'),e[0].files=d.files,p.remove(),d.files.length>1?m.html(''+d.files.length+' '+(d.files.length===1?c.i18n_file:c.i18n_files)):d.files.length===1?m.html(g):m.empty(),b=j.data('num_uploads'),b||(b=[]),f=q.closest('.cpf-element').attr('data-uniqid'),b[f]||(b[f]=[]),b[f].splice(l,1),b[f].length===0&&(delete b[f],e.val('')),h=e.next('.tmcp-upload-hidden'),h.length&&(i=h.val().split('|'),i.length>0&&i.splice(l,1),i.length===0?h.remove():h.val(i.join('|'))),j.data('num_uploads',b))}),I.off('change.cpf input.cpf').on('change.cpf input.cpf',function(){var b=a(this);t.trigger('tm-epo-check-dpd'),b.data('tm-prev-value',b.val()),t.trigger({type:'tm-epo-update',norules:2})}).data('tm-prev-value',I.val()),j.find('.cpf-type-product').off('tc-logic').on('tc-logic',function(){var b=a(this);if(b.find('.tc-init').lengh)return;b.data('isactive')&&!b.data('donetclogic')&&(b.data('donetclogic',!0),b.find('.tc-epo-field-product').trigger('change.cpfproduct',{forced:1}))}),j.find('.cpf-type-product .tc-epo-field-product.tc-epo-field-product-checkbox').off('change.cpfrequired').on('change.cpfrequired',function(){var f=a(this),d=f.closest('.cpf-element'),b,c,e;d.is('.tc-is-required')&&(b=d.find('.tmcp-field.tc-epo-field-product-checkbox'),e=b.not(':checked'),c=d.find('.tmcp-field.tc-epo-field-product-checkbox:checked'),c.length>0?(e.removeAttr('required'),e.prop('required',!1),c.attr('required',!0),c.prop('required',!0)):(b.attr('required',!0),b.prop('required',!0)))}),j.find('.cpf-type-product .tc-epo-field-product').off('change.cpfproduct').on('change.cpfproduct',function(G,m){var d=a(this),e=d.closest('.cpf-element'),x=e.find('.tc-epo-element-product-container-wrap'),r=d.closest('.tmcp-field-wrap').find('.tc-epo-element-product-container-wrap'),w=r.length>0,z=!1,C=1e3,g=d,B=e.find('.tm-epo-field').not('.tc-epo-element-product-li-container .tm-epo-field'),F=B.filter(':checked'),D=d.attr('data-counter'),k,q,f,v,h,u,p,o,A,s,y,E;if(!1===e.data('isactive'))return;if(m&&m.forced===2)return;if(G.isTrigger!==void 0&&d.data('triggeredonce')&&!(m&&m.forced))return;if(d.data('triggeredonce',1),d.is(':checkbox')||(C=G.isTrigger),B.is(':radio')||B.is(':checkbox')?F.length>0&&(y=F.closest('.tmcp-field-wrap').find('input.tm-qty')):y=B.closest('.tmcp-field-wrap').find('input.tm-qty'),d.is(':checkbox'))if(d.is('.tc-epo-field-product-hidden'))d.is(':checked')?x.addClass('tc-active-product'):x.removeClass('tc-active-product'),q=d.val(),v=d.attr('data-type'),e.find('.tc-epo-element-product-li-container').removeClass('tm-hidden');else{if(d.is(':checked'))w&&r.removeClass('tm-hidden');else{if(w&&r.addClass('tm-hidden'),!(m&&m.forced))return;z=!0}z||(q=d.val(),v=d.attr('data-type'),e.find('.tc-epo-element-product-li-container').removeClass('tm-hidden'))}else if(d.is(':radio')){if(d.is(':checked'))w&&(x.addClass('tm-hidden'),r.removeClass('tm-hidden'));else{if(w&&r.addClass('tm-hidden'),!(m&&m.forced))return;z=!0}z||(q=d.val(),v=d.attr('data-type'),e.find('.tc-epo-element-product-li-container').removeClass('tm-hidden'))}else d.is('select')&&(A=d.children(':selected'),g=A,D=A.index(),d.children(':first').val()===''&&D--,q=d.val(),v=A.attr('data-type'),e.find('.tc-epo-element-product-li-container').removeClass('tm-hidden'));if(d.is('.tc-epo-field-product-checkbox')?s=r.find('.tc-epo-element-product-container'):s=e.find('.tc-epo-element-product-container'),k=s.filter('[data-product_id="'+q+'"]'),f=k.find(b.associateQtySelector),x.html()!==''&&y&&y.length>0&&f.length===0&&y.val(0),d.is(':checkbox'))d.is('.tc-epo-field-product-hidden')&&(d.is(':checked')?f.val()==='0'&&(f.attr('min')==='0'?f.val(1).trigger('change'):f.val(f.attr('min')).trigger('change')):(f.val(0),f.closest('.tm-quantity-alt').removeClass('tm-hidden'),m.forced!==1&&f.closest('.tm-quantity-alt').find('.single_add_to_cart_product').trigger('cpfqtybutton'),x.find(b.associatedEpoCart).trigger('tm-epo-update')));else if(d.is(':radio'))d.val()&&!d.data('set_initial')&&f.val()==='0'&&(f.attr('min')==='0'?f.val(1).trigger('change'):f.val(f.attr('min')).trigger('change'),d.data('set_initial',1));else if(d.is('select'))d.val()&&!d.data('set_initial')&&f.val()==='0'&&(f.attr('min')==='0'||f.val(f.attr('min')).trigger('change'),d.data('set_initial',1));else return;if(!q){s.addClass('tm-hidden'),p=a.epoAPI.util.parseJSON(g.attr('data-rules')),p=p[0]||0,o=a.epoAPI.util.parseJSON(g.attr('data-original-rules')),o=o||0,g.is('.tcenabled')&&g.data('associated_price_set',1),g.data('price_set',1),g.data('raw_price',p),g.data('raw_original_price',o),g.data('price',p),g.data('original_price',o),h=g,h.is('option')&&(h=g.closest('select')),u=!1,h.is('.tc-epo-field-product')&&(h.is('select')?h.val()!==''&&(u=!0):h.is(':checkbox')||h.is(':radio')?h.is(':checked')&&(u=!0):h.val()!==''&&(u=!0)),K(g.closest('.tmcp-field-wrap').find('.tc-price').not(b.associatedEpoSelector+' .tc-price'),p,u?i(p):g.data('price-html'),o,u?i(o):''),I.trigger('change.cpf');return}k.length===0?(E={action:'wc_epo_get_associated_product_html',product_id:q,parent_id:j.attr('data-product-id'),mode:e.attr('data-mode'),layout_mode:e.attr('data-product-layout-mode'),uniqid:e.attr('data-uniqid'),name:d.attr('name'),counter:D,quantity_min:e.attr('data-quantity-min'),quantity_max:e.attr('data-quantity-max'),priced_individually:e.attr('data-priced-individually'),discount:e.attr('data-discount'),discount_type:e.attr('data-discount-type'),discount_exclude_addons:e.attr('data-discount-exclude-addons'),show_image:e.attr('data-show-image'),show_title:e.attr('data-show-title'),show_price:e.attr('data-show-price'),show_description:e.attr('data-show-description'),show_meta:e.attr('data-show-meta'),disable_epo:e.attr('data-disable-epo')},e.block({message:null,overlayCSS:{background:'#fff',opacity:.6}}),a.ajax({url:c.ajax_url,type:'POST',data:E,dataType:'json',success:function(c){c.result===200&&(k=a(c.html),w?d.closest('.tmcp-field-wrap').find('.tc-epo-element-product-container-wrap').empty().append(k):e.find('.tc-epo-element-product-container-wrap').append(k),aH(l,n,k,v,d,t,s,C,f),k.find(b.associateQtySelector).trigger('change'))},complete:function(){e.unblock()}})):(aH(l,n,k,v,d,t,s,C,f),k.find(b.associateQtySelector).trigger('change'))}),h.off('click.cpfqtybutton cpfqtybutton','.cpf-type-product .single_add_to_cart_product').on('click.cpfqtybutton cpfqtybutton','.cpf-type-product .single_add_to_cart_product',function(){var d=a(this),c=d.closest('.tm-quantity-alt').find(b.associateQtySelector),h=d.is('.alt'),e=d.closest('.cpf-element').find('.tc-epo-element-product-container-wrap'),g,f;d.data('inittriggeredonce')&&(g=a.epoAPI.math.toInt(c.attr('data-min')),f=a.epoAPI.math.toInt(c.attr('data-max')),h?(e.addClass('tc-active-product'),c.attr('min',g),f&&c.attr('max',f),c.val()==='0'&&(c.attr('min')==='0'?c.val(1).trigger('change'):c.val(c.attr('min')).trigger('change')),d.removeClass('alt').text(d.attr('data-remove'))):(e.removeClass('tc-active-product'),c.val(0).trigger('change'),c.closest('.tm-quantity-alt').removeClass('tm-hidden'),d.addClass('alt').text(d.attr('data-add')))),d.data('inittriggeredonce',1),e.find(b.associatedEpoCart).trigger('tm-epo-update')}),h.off('change.cpfqtyalt','.cpf-type-product '+b.associateQtySelector).on('change.cpfqtyalt','.cpf-type-product '+b.associateQtySelector,function(){var c=a(this),d=c.closest('.cpf-element').find('.tm-epo-field').not('.tc-epo-element-product-li-container .tm-epo-field'),g=c.closest('.tm-quantity-alt').find('.single_add_to_cart_product'),f=d.filter(':checked'),j=a.epoAPI.math.toInt(c.attr('min')),i=a.epoAPI.math.toInt(c.attr('max')),e,h;if(d.is('.tc-epo-field-product-hidden')&&d.is(':checkbox')&&(f.length===0&&c.val()!=='0'?(d.prop('checked',!0).trigger('change'),f=d.filter(':checked')):c.val()==='0'&&f.length&&d.prop('checked',!1).trigger('change')),d.is(':radio')||d.is(':checkbox')){if(f.length===0)return;e=f.closest('.tmcp-field-wrap').find('input.tm-qty').not('.tc-element-qty')}else e=d.closest('.tmcp-field-wrap').find('input.tm-qty').not('.tc-element-qty');if(e.length===0)return;e.attr('min',j),i&&e.attr('max',i),h=c.closest('.tc-epo-element-product-container').find(b.associatedEpoCart),h.trigger('tm-epo-update'),e.val(c.val()),a.epoAPI.math.toFloat(c.val())>0?(h.find('.tm-epo-field.tcenabled').removeClass('ignore'),c.removeClass('ignore')):(h.find('.tm-epo-field.tcenabled').addClass('ignore'),c.addClass('ignore')),d.trigger('change.cpfproduct',{forced:2}),g.data('inittriggeredonce')&&(c.val()==='0'?g.removeClass('alt'):g.addClass('alt')),g.trigger('cpfqtybutton')}),t.off('tm-epo-update').on('tm-epo-update',function(M){var I=a(this),F=!1,an=0,aA=!1,ap=0,z=0,D=0,G=!1,ak=1,aq=!0,V=[],J=0,Q=0,h={},E=0,a_=!1,a$=!1,bb=!1,bc='',bd=!1,bs=!1,af='',ab='',aw=0,aT=0,$,aS,bf,A,aN,aj,U,W,Z,aL,aV,ao,aG,ay,aY,u,L,O,au,am,aW,aX,T,S,aZ,e,aE,bq,bo,bj,bi,bh,aM,aB,aO,aP,be,H,ai,aQ,N,ag,ax,_,az,aC,aD,R,ah,al,aU,at,aF,bg,q,aK,aJ,bl,bn,aI,bp,aH,br,ba;if(M.epoObject?e=a.extend(!0,{},M.epoObject):e=a.extend(!0,{},l),!e)return;if(e.noEpoUpdate)return;if(d.trigger('tcEpoUpdateStart',{epo:e,alternativeCart:e,this_product_type:x,cart:I,totalsHolder:f,fetchOptionPrices:m,epoHolder:j}),am=a.epoAPI.applyFilter('tc_get_bundleid',I.attr('data-product_id'),I,e),aY=f.attr('data-price-override'),u=bk(I),bf=bm(I),e.associated_connect&&e.associated_connect.length===1&&(u=parseFloat(e.main_product.find(b.associateQtySelector).not(b.associatedEpoSelector+' '+b.qtySelector).last().val())),M.stopImmediatePropagation(),F=a.epoAPI.applyFilter('tcGetCurrentProductPrice',ad(f,!0),t,f),an=F,aA=a.epoAPI.applyFilter('tcGetCurrentProductRegularPrice',aa(f,!0),t,f),ap=aA,F=a.epoAPI.applyFilter('tcCalculateCurrentProductPrice',F,{epo:e,alternativeCart:w,cart:I,main_product:n}),Number.isFinite(u)||(f.attr('data-is-sold-individually')||P(I).length===0)&&(u=1),bg={qty:u,product_price:an,original_product_price:ap},f.data('totalsHolder_tc_totals_ob',bg),M.norules?M.norules&&(M.norules===1&&r(e,M.element),a.tcepo.lateFieldsPrices[X]=[],j.find('.tm-epo-late-field').toArray().forEach(function(b){b=a(b),b.data('price',0),a.tcepo.lateFieldsPrices[X].push({setter:b,price:b.data('tm-price-for-late'),original_price:b.data('tm-original-price-for-late'),bundleid:am,pricetype:aR(e,b)})})):ae(e,I),e.associated_connect&&e.associated_connect.length===1&&(N=e.associated_connect,e.associated_connect.is('select')&&(N=e.associated_connect.find('option:selected'))),F===!1){f.empty(),e.associated_connect&&e.associated_connect.length===1&&K(N.closest('.tmcp-field-wrap').find('.tc-price').not(b.associatedEpoSelector+' .tc-price'),0,'',0,'');return}ak=a.epoAPI.applyFilter('tcAlterElementQty',ak,{epo:e,alternativeCart:w,currentCart:t,main_product:n}),t.data('per_product_pricing')!==void 0&&(aq=t.data('per_product_pricing')),aq=a.epoAPI.applyFilter('tcCalculatePerProductPricing',aq,{epo:e,alternativeCart:w,cart:I,main_product:n}),ac&&c.tm_epo_totals_box_placement==='woocommerce_before_add_to_cart_button'&&(x==='variable'||x==='variable-subscription')&&!f.data('moved_inside')&&f.data('moved_inside',1),d.trigger('tcEpoBeforeOptionPriceCalculation',{epo:e,alternativeCart:e,this_product_type:x,cart:I,totalsHolder:f,fetchOptionPrices:m,epoHolder:j,total:z,original_total:D,floatingBoxData:V,showTotal:G,cart_fee_options_total:J,cart_fee_options_original_total:Q}),!e.associated_connect&&!M.noassociated&&c.tm_epo_global_product_element_quantity_sync==='yes'&&!I.is(a.tcAPI().associatedEpoCart)&&I.find(a.tcAPI().associatedEpoCart).filter(':visible').toArray().forEach(function(b){a(b).trigger({type:'tm-epo-update',noassociated:1})}),c.tm_epo_global_product_element_quantity_sync==='no'?(H=m(e,j,'.tmcp-field:not(.tc-epo-field-product)',z,D,V,G),z=H.total,D=H.original_total,V=H.floatingBoxData,G=H.showTotal,ah=H.elementsLength,H=m(e,j,'.tc-epo-field-product',aw,0,V,G),aw=H.total,aT=H.original_total,V=H.floatingBoxData,G=G&&H.showTotal,ah=ah+H.elementsLength,f.data('tm-floating-box-data',V)):(H=m(e,j,'.tmcp-field',z,D,V,G),z=H.total,D=H.original_total,V=H.floatingBoxData,G=H.showTotal,ah=H.elementsLength,f.data('tm-floating-box-data',V)),H=m(e,j,'.tmcp-fee-field',J,Q,V,G,!1,!0),J=H.total,Q=H.original_total,V=H.floatingBoxData,G=H.showTotal,ah=ah+H.elementsLength,d.trigger('tcEpoAfterOptionPriceCalculation',{epo:e,alternativeCart:e,this_product_type:x,cart:I,totalsHolder:f,fetchOptionPrices:m,epoHolder:j,total:z,original_total:D,floatingBoxData:V,showTotal:G,cart_fee_options_total:J,cart_fee_options_original_total:Q}),a.tcepo.oneOptionIsSelected[X]=G,av(n,ah,a.tcepo.oneOptionIsSelected[X],e),G=a.epoAPI.applyFilter('tcFinalTotalsBoxVisibility',G,{epo:e,alternativeCart:w,cart:I,main_product:n,totalsHolder:f,this_epo_totals_container:Y}),J>0&&(G=!0),w&&!aq&&(G=!1),(s==='pxq'||s==='hide'||s==='normal'||s==='options'||s==='final'||s==='hideoptionsifzero'||s==='hideiftotaliszero'||s==='optionsiftotalnotzero')&&(G=!0),u>1&&(G=!0),(x==='variable'||x==='variable-subscription')&&!a.epoAPI.math.toFloat(bf)&&(G=!1),L=z,O=D,au=ar(e,parseFloat(F),parseFloat(ap),parseFloat(L+aw),parseFloat(O+aT),am,f),s==='disable'&&(G=!1),(s==='disable_change'||c.tm_epo_change_variation_price==='yes'||c.tm_epo_change_original_price==='yes')&&(G=!0),e.is_associated&&!aq&&(G=!1),c.tm_epo_total_price_as_unit_price==='yes'&&(u=1),A=parseFloat(F*u),c.extraFee&&(E=parseFloat(c.extraFee),Number.isFinite(E)||(E=0)),aj=a.epoAPI.applyFilter('tcCalculateFinalProductPrice',!1,{alternativeCart:w,product_price:F,product_total_price:A,v_product_price:an,tm_set_tax_price:g,main_product:n,totalsHolder:f,cartQty:u}),aj!==!1&&typeof aj=='object'&&Object.prototype.hasOwnProperty.call(aj,'productPrice')&&Object.prototype.hasOwnProperty.call(aj,'productTotalPrice')&&(F=aj.productPrice,A=aj.productTotalPrice),L=L+au[0],L=a.epoAPI.applyFilter('tc_adjust_options_price_per_unit',L,A),z=parseFloat(L*u*ak),z=z+aw,z=a.epoAPI.applyFilter('tc_adjust_options_total_price',z,u,ak,L,aw,f),O=O+au[1],O=a.epoAPI.applyFilter('tc_adjust_options_price_per_unit',O,A),D=parseFloat(O*u*ak),D=D+aT,D=a.epoAPI.applyFilter('tc_adjust_options_original_total_price',D,u,ak,O,aT,f),aY==='1'&&parseFloat(z)>0&&(F=0,an=0,A=0),A=a.epoAPI.applyFilter('tc_adjust_product_total_price_without_options',A),z=a.epoAPI.applyFilter('tcAdjustTotal',z,{epo:e,totalsHolder:f,cart:I,main_product:n}),D=a.epoAPI.applyFilter('tcAdjustOriginalTotal',D,{epo:e,totalsHolder:f,cart:I,main_product:n}),z=parseFloat(a.epoAPI.applyFilter('tc_adjust_total',z,f)),J=parseFloat(a.epoAPI.applyFilter('tc_adjust_totals_fee',J,f)),D=parseFloat(a.epoAPI.applyFilter('tc_adjust_total',D,f)),Q=parseFloat(a.epoAPI.applyFilter('tc_adjust_totals_fee',Q,f)),U=z+J,W=D+Q,aE=z,bq=L,bi=J,aM=U,bo=D,bj=O,bh=Q,aB=W,aO=A,aP=parseFloat(A+U+E),be=parseFloat(ap+W+E),F=g(F,f,void 0,void 0,void 0,void 0,!0),aA=g(aA,f,void 0,void 0,void 0,void 0,!0),A=g(A,f,void 0,void 0,void 0,void 0,!0),z=g(z,f,void 0,void 0,void 0,void 0,!0),L=g(L,f,void 0,void 0,void 0,void 0,!0),U=parseFloat(J)+parseFloat(g(aE,f,void 0,void 0,void 0,void 0,!0)),D=g(D,f,void 0,void 0,void 0,void 0,!0),O=g(O,f,void 0,void 0,void 0,void 0,!0),Q=g(Q,f,void 0,void 0,void 0,void 0,!0),W=parseFloat(Q)+parseFloat(D),E=g(E,f,void 0,void 0,void 0,void 0,!0),ai=i(z,f,!0,!0),al=i(J,f,!0,!0),aQ=i(D,f,!0,!0),aU=i(Q,f,!0,!0),Z=A,A=a.epoAPI.applyFilter('tc_adjust_product_total_price',parseFloat(A+U+E),Z,U,E,z,J,f),aN=a.epoAPI.applyFilter('tc_adjust_product_total_original_price',parseFloat(Z+W+E),Z,W,E,D,Q,f),$=i(A,f,!0,!0),aS=i(aN,f,!0,!0),aL=parseFloat(F+parseFloat(L)),aV=parseFloat(F+parseFloat(O)),c.tm_epo_fees_on_unit_price==='yes'&&(aL=parseFloat(F+parseFloat(L)+parseFloat(parseFloat(J)/u)),aV=parseFloat(F+parseFloat(O)+parseFloat(parseFloat(Q)/u))),ao=i(parseFloat(F+parseFloat(L)+parseFloat(parseFloat(J)/u)),f,!0,!0),aG=i(parseFloat(F+parseFloat(O)+parseFloat(parseFloat(Q)/u)),f,!0,!0),s!=='pxq'&&s!=='final'&&s!=='hide'&&!(U===0&&s==='hideoptionsifzero')&&((!(z===0&&s==='hideoptionsifzero')||s==='options')&&(a_=!0,c.tm_epo_enable_vat_options_total==='yes'&&(a$=!0)),J!==0&&(bb=!0)),E&&(bd=!0,bc=i(E,f,!0,!0)),$&&s!=='options'&&s!=='optionsiftotalnotzero'&&(bs=!0),ba=f.attr('data-prices-include-tax')||c.prices_include_tax,ba==='1'?(aK=parseFloat(y(z,f,void 0,!0,void 0,void 0,!0)-aE),aJ=parseFloat(y(W,f,void 0,!0,void 0,void 0,!0)-aM),aI=parseFloat(y(A,f,void 0,!0,void 0,void 0,!0)-aP),aH=parseFloat(y(Z,f,void 0,!0,void 0,void 0,!0)-aO)):(aK=parseFloat(z-aE),aJ=parseFloat(W-aM),aI=parseFloat(A-aP),aH=parseFloat(Z-aO)),bl=i(aK),bn=i(aJ),bp=i(aI),br=i(aH),ao=a.epoAPI.applyFilter('tc_adjust_formatted_unit_price',ao,F,L,J,u),ai=a.epoAPI.applyFilter('tc_adjust_formatted_options_total',ai,z,L,u),al=a.epoAPI.applyFilter('tc_adjust_formatted_fees_total',al,J),$=a.epoAPI.applyFilter('tc_adjust_formatted_final_total',$,A,Z,U,E,u),ao=a.epoAPI.applyFilter('tcAdjustFormattedUnitPrice',ao,{epo:e,totalsHolder:f,event:M,unit_price:aL,productPrice:F,_total:L,total_plcart_fee_options_totals_fee:J,cartQty:u}),aG=a.epoAPI.applyFilter('tcAdjustFormattedUnitOriginalPrice',aG,{epo:e,totalsHolder:f,event:M,unit_original_price:aV,productPrice:F,_original_total:O,total_plcart_fee_options_totals_fee:J,cartQty:u}),ai=a.epoAPI.applyFilter('tcAdjustFormattedOptionsTotal',ai,{epo:e,totalsHolder:f,event:M,total:z,_total:L,total_plus_fee:U,extraFee:E,cartQty:u}),aQ=a.epoAPI.applyFilter('tcAdjustFormattedOptionsOriginalTotal',aQ,{epo:e,totalsHolder:f,event:M,original_total:D,_original_total:O,original_total_plus_fee:W,extraFee:E,cartQty:u}),al=a.epoAPI.applyFilter('tcAdjustFormattedFeesTotal',al,{epo:e,totalsHolder:f,event:M,cart_fee_options_total:J,extraFee:E,cartQty:u}),aU=a.epoAPI.applyFilter('tcAdjustFormattedFeesOriginalTotal',aU,{epo:e,totalsHolder:f,event:M,cart_fee_options_original_total:Q,extraFee:E,cartQty:u}),$=a.epoAPI.applyFilter('tcAdjustFormattedFinalTotal',$,{epo:e,totalsHolder:f,event:M,product_total_price:A,product_total_price_without_options:Z,total_plus_fee:U,extraFee:E,cartQty:u}),aS=a.epoAPI.applyFilter('tcAdjustFormattedFinalOriginalTotal',aS,{epo:e,totalsHolder:f,event:M,product_total_original_price:aN,product_total_price_without_options:Z,original_total_plus_fee:W,extraFee:E,cartQty:u}),h={qty:u,product_price:F,raw_product_price:an,product_regular_price:aA,raw_product_regular_price:ap,late_total_prices:au,late_total_price:g(au[0],f),late_total_original_price:g(au[1],f),raw_options_price_per_unit:bq,raw_options_total_price:aE,raw_cart_fee_options_total_price:bi,raw_total_plus_fee:aM,raw_options_original_price_per_unit:bj,raw_options_original_total_price:bo,raw_cart_fee_options_original_total_price:bh,raw_original_total_plus_fee:aB,raw_product_total_price:aP,raw_product_total_original_price:be,raw_product_total_price_without_options:aO,options_price_per_unit:L,options_total_price:z,cart_fee_options_total_price:J,total_plus_fee:U,options_original_price_per_unit:O,options_original_total_price:D,cart_fee_options_total_original_price:Q,original_total_plus_fee:W,vat_options_total:aK,vat_options_total_plus_fee:aJ,formatted_vat_options_total:bl,formatted_vat_options_total_plus_fee:bn,vat_total:aI,formatted_vat_total:bp,vat_product_base:aH,formatted_vat_product_base:br,product_total_price:A,product_total_original_price:aN,product_total_price_without_options:Z,product_unit_price:aL,product_unit_original_price:aV,formatted_unit_price:ao,formatted_options_total:ai,formatted_fees_total:al,formatted_final_total:$,formatted_unit_original_price:aG,formatted_options_original_total:aQ,formatted_fees_original_total:aU,formatted_final_original_total:aS,formatted_extra_fee:bc,show_options_total:a_,show_fees_total:bb,show_extra_fee:bd,show_final_total:bs,show_options_vat:a$,unit_price:c.i18n_unit_price,show_unit_price:c.tm_epo_show_unit_price==='yes',options_total:c.i18n_options_total,fees_total:c.i18n_fees_total,extra_fee:c.i18n_extra_fee,final_total:c.i18n_final_total,options_vat_total:c.i18n_vat_options_total},ai&&z>0&&(at=o(z),aF=o(D),at=a.epoAPI.applyFilter('tcFilterFormattedFTotal',at,{epo:e,totalsHolder:f,event:M,total:z,_total:L,total_plus_fee:U,extraFee:E,cartQty:u}),aF=a.epoAPI.applyFilter('tcFilterFormattedFOriginalTotal',aF,{epo:e,totalsHolder:f,event:M,original_total:D,total:D,_total:L,total_plus_fee:U,extraFee:E,cartQty:u}),c.tm_epo_enable_original_final_total==='yes'&&z!==D?(h.formatted_options_total=a.epoAPI.util.decodeHTML(a.epoAPI.template.html(b.templateEngine.tc_formatted_sale_price,{price:aF,sale_price:at,customer_price_format_wrap_start:af,customer_price_format_wrap_end:ab})),h._foriginal_total=aF,h._ftotal=at):h.formatted_options_total=a.epoAPI.util.decodeHTML(a.epoAPI.util.decodeHTML(a.epoAPI.template.html(b.templateEngine.tc_formatted_price,{price:at,customer_price_format_wrap_start:af,customer_price_format_wrap_end:ab})))),$&&A>=0&&(T=o(A),aY==='1'&&parseFloat(aB+E)>0?S=parseFloat(aB+E):S=parseFloat(parseFloat(ap*u)+aB+E),c.customer_price_format&&(af=c.customer_price_format_wrap_start,ab=c.customer_price_format_wrap_end,aZ=c.customer_price_format,T=aZ.replace('__PRICE__',T).replace('__CODE__',c.current_currency),f.data('is-on-sale')||(S=aZ.replace('__PRICE__',S).replace('__CODE__',c.current_currency))),T=a.epoAPI.applyFilter('tc_adjust_native_price',T,A),S=g(S,f,void 0,void 0,void 0,void 0,!0),S=o(S),S=a.epoAPI.applyFilter('tc_adjust_native_regular_price',S,A),c.tm_epo_enable_original_final_total==='yes'&&(f.data('is-on-sale')||S!==T)?h.formatted_final_total=a.epoAPI.util.decodeHTML(a.epoAPI.template.html(b.templateEngine.tc_formatted_sale_price,{price:S,sale_price:T,customer_price_format_wrap_start:af,customer_price_format_wrap_end:ab})):h.formatted_final_total=a.epoAPI.util.decodeHTML(a.epoAPI.util.decodeHTML(a.epoAPI.template.html(b.templateEngine.tc_formatted_price,{price:T,customer_price_format_wrap_start:af,customer_price_format_wrap_end:ab}))),h._f_regular_price=S,h._fprice=T),h=a.epoAPI.applyFilter('tc_adjust_tc_totals_ob',h,{epo_object:e,showTotal:G,epoHolder:j,totalsHolder:f,tm_set_price:k,tm_set_price_totals:i,product_total_price:A,product_price:F,qty:u}),h=p('formatted_fees_original_total','cart_fee_options_total_original_price',h,f),h=p('formatted_fees_total','cart_fee_options_total_price',h,f),h=p('formatted_final_original_total','product_total_original_price',h,f),h=p('formatted_final_total','product_total_price',h,f),h=p('formatted_options_original_total','options_original_total_price',h,f),h=p('formatted_options_total','options_total_price',h,f),h=p('formatted_unit_original_price','product_unit_original_price',h,f),h=p('formatted_unit_price','product_unit_price',h,f),e.tc_totals_ob=h,h.showTotal!==void 0&&(G=h.showTotal),ay=a.epoAPI.template.html(b.templateEngine.tc_final_totals,h),f.data('tm-html',ay),f.data('tc_totals_ob',h),e.associated_connect&&e.associated_connect.length===1&&(e.associated_connect.attr('data-no-price')==='1'?(ag=0,ax=0,_=0,az=0,aC='',aD='',K(N.closest('.tmcp-field-wrap').find('.tc-price').not(b.associatedEpoSelector+' .tc-price'),ag,aC,_,aD)):(ag=h.product_price+h.options_price_per_unit+h.cart_fee_options_total_price/h.qty,ax=h.raw_product_price+h.raw_options_price_per_unit+h.raw_cart_fee_options_total_price/h.qty,_=h.product_regular_price+h.options_original_price_per_unit+h.cart_fee_options_total_original_price/h.qty,az=h.raw_product_regular_price+h.raw_options_original_price_per_unit+h.raw_cart_fee_options_original_total_price/h.qty,aC=k(ag,e.this_epo_totals_containe,!1,!1,N),aD=k(_,e.this_epo_totals_containe,!1,!1,N),K(N.closest('.tmcp-field-wrap').find('.tc-price').not(b.associatedEpoSelector+' .tc-price'),ag,aC,_,aD),e.associated_connect.data('tm-quantity',h.qty),e.associated_connect.data('tm-quantity')&&(ag=ag*parseFloat(e.associated_connect.data('tm-quantity')),ax=ax*parseFloat(e.associated_connect.data('tm-quantity')),_=_*parseFloat(e.associated_connect.data('tm-quantity')),az=az*parseFloat(e.associated_connect.data('tm-quantity'))),aC=k(ag,e.this_epo_totals_containe,!1,!1,N),aD=k(_,e.this_epo_totals_containe,!1,!1,N)),e.associated_connect.data('price_set',1),N.is('.tcenabled')&&N.data('associated_price_set',1),N.data('price_set',1),N.data('raw_price',ax),N.data('raw_original_price',az),N.data('price',g(ag,e.this_epo_totals_containe,N)),N.data('original_price',g(_,e.this_epo_totals_containe,N)),e.associated_connect.data('price-changed',1),setTimeout(function(){e.associated_connect&&M.noassociated||e.mainEpoObject.main_cart.trigger({type:'tm-epo-update',norules:2})},20)),d.trigger('tcEpoAfterCalculateTotals',{epo:e,alternativeCart:w,this_product_type:x,cart:I,bundleid:am,totalsObject:h,main_product:n,per_product_pricing:aq}),aW=a.epoAPI.applyFilter('hide_native_price',!0),G&&u>0?((s==='disable_change'||c.tm_epo_change_variation_price==='yes')&&(aW===!0&&s!=='disable'&&s!=='disable_change'?C(I).hide():C(I).show()),s==='disable'||s==='disable_change'||s==='hideiftotaliszero'&&A===0||(s==='hideifoptionsiszero'||s==='optionsiftotalnotzero')&&U===0||s==='hide'?(ay='',f.html(ay)):(f.html(ay),d.trigger('tc-totals-container',{epo:h,totals_holder:f,data:{epo_object:e,tm_set_price:k,tm_set_price_totals:i,product_total_price:A,product_price:F,qty:u},tm_epo_js:c})),$&&A>=0&&(aX=C(I),(s==='disable_change'||c.tm_epo_change_variation_price==='yes')&&(f.data('is-on-sale')?(q=a.epoAPI.util.decodeHTML(a.epoAPI.template.html(b.templateEngine.tc_formatted_sale_price,{price:S,sale_price:T,customer_price_format_wrap_start:af,customer_price_format_wrap_end:ab})),q={formatted:q,raw:h.product_total_price},q=p('formatted','raw',q,f),q=q.formatted,aX.html(q).show()):(q=a.epoAPI.util.decodeHTML(a.epoAPI.template.html(b.templateEngine.tc_formatted_price,{price:T,customer_price_format_wrap_start:af,customer_price_format_wrap_end:ab})),q={formatted:q,raw:h.product_total_price},q=p('formatted','raw',q,f),q=q.formatted,aX.html(q).show())),(s==='disable_change'||c.tm_epo_change_original_price==='yes')&&((!w||n.find('.cpf-bto-price').length===0)&&(e.associated_connect?R=e.main_product.find(b.associatedNativeProductPriceSelector):R=a(b.nativeProductPriceSelector),R.length===0&&n.is('.tc-after-shop-loop')&&(R=n.closest('.product').find('.price')),R.data('tc-original-html')===void 0&&R.data('tc-original-html',R.html()),A>0?f.data('is-on-sale')?(q=a.epoAPI.util.decodeHTML(a.epoAPI.template.html(b.templateEngine.tc_formatted_sale_price,{price:S,sale_price:T,customer_price_format_wrap_start:af,customer_price_format_wrap_end:ab})),q={formatted:q,raw:h.product_total_price},q=p('formatted','raw',q,f),q=q.formatted,R.html(q).show()):(q=a.epoAPI.util.decodeHTML(a.epoAPI.template.html(b.templateEngine.tc_formatted_price,{price:T,customer_price_format_wrap_start:af,customer_price_format_wrap_end:ab})),q={formatted:q,raw:h.product_total_price},q=p('formatted','raw',q,f),q=q.formatted,R.html(q).show()):x&&x!=='composite'&&(e.associated_connect?e.variations_form.length?(q=e.this_epo_totals_container.data('variationIdElement'),q.length>0&&(q=parseFloat(q.val()),!q||q===0||R.html(a.epoAPI.util.decodeHTML(c.assoc_current_free_text)))):R.html(a.epoAPI.util.decodeHTML(c.assoc_current_free_text)):R.html(a.epoAPI.util.decodeHTML(c.current_free_text)))),d.trigger('tcEpoMaybeChangePriceHtml',{epo:e,alternativeCart:w,this_product_type:x,cart:I,bundleid:am,totalsObject:h,main_product:n,nativePrice:T}))),w?v.trigger({type:'tm-epo-update',norules:1}):Y.data('is_active',!0)):(e.associated_connect&&(R=e.main_product.find(b.associatedNativeProductPriceSelector),R.html(R.data('tc-original-html'))),C(I).each(function(){var b=a(this);b.data('tm-original-html')?b.html(b.data('tm-original-html')):b.data('tm-original-html',b.html())}),an===0&&c.tm_epo_remove_free_price_label==='yes'?C(I).hide():(s==='disable_change'||c.tm_epo_change_variation_price==='yes')&&!(aW===!0&&s!=='disable'&&s!=='disable_change')&&C(I).show(),f.empty(),w&&v.trigger({type:'tm-epo-update',norules:1})),v.trigger('tm-epo-after-update',{container:B}),d.trigger('tc-epo-after-update',{epo:h,totals_holder:f,data:{epo_object:e,add_late_fields_prices:ar,tm_set_price:k,tm_set_price_totals:i,product_total_price:A,product_price:F,qty:u,bundleid:am,currentCart:t},tm_epo_js:c})}),(x==='variable'||x==='variable-subscription')&&(H=j.find('.tm-epo-variation-section').first(),H.find('.tm-epo-reset-variation').off('click.cpfv').on('click.cpfv',function(){var b=a(this),c=a.epoAPI.dom.id(b.attr('data-tm-for-variation')),d=b.closest('.cpf-type-variations'),e=b.closest('.cpf-element').find('.tm-epo-variation-element'),f=b.closest('.cpf-element').find('.tmcp-field-wrap');e.prop('checked',!1),f.removeClass('tc-active'),u.find("[data-attribute_name='attribute_"+c+"']").val('').trigger('change'),u.find("[data-attribute_name='attribute_"+c+"']").trigger('focusin'),n.find('.cpf-type-variations').not(d).each(function(c,b){u.find("[data-attribute_name='attribute_"+a.epoAPI.dom.id(a(b).find('.tm-epo-variation-element').first().attr('data-tm-for-variation'))+"']").trigger('focusin')}),b.trigger('blur'),u.trigger('woocommerce_update_variation_values_tmlogic')}),H.find('input.tm-epo-variation-element,input.tm-epo-variation-element + span').off('mouseup.cpfv').on('mouseup.cpfv',function(){var b=a(this),c;b.is('span')&&(b=b.prev('input')),b.attr('disabled')&&u.find('.reset_variations').trigger('click'),c=a.epoAPI.dom.id(b.attr('data-tm-for-variation')),u.find("[data-attribute_name='attribute_"+c+"']").trigger('focusin')}),H.off('click.'+ai+'.tmepo','.reset_variations, .tc-epo-element-variable-reset-variations').on('click.'+ai+'.tmepo','.reset_variations, .tc-epo-element-variable-reset-variations',{_epoObject:l},function(e){var d;(s==='disable_change'||c.tm_epo_change_original_price==='yes')&&(!w||n.find('.cpf-bto-price').length===0)&&(e.data._epoObject.associated_connect?d=e.data._epoObject.main_product.find(b.associatedNativeProductPriceSelector):d=a(b.nativeProductPriceSelector),d.data('tc-original-html')&&d.html(d.data('tc-original-html'))),u.find('.variations .reset_variations, .tc-epo-element-variable-reset-variations').first().trigger('click')}),H.find('.tm-epo-variation-element').off('change.cpfv tm_epo_variation_element_change').on('change.cpfv tm_epo_variation_element_change',function(d){var b=a(this),g=a.epoAPI.dom.id(b.attr('data-tm-for-variation')),e=b.val(),h=b.closest('.cpf-type-variations'),c=u.find("[data-attribute_name='attribute_"+g+"']"),f;if(b.closest('.tm-epo-variation-section').is('.tm-hidden'))return;d&&d.type&&d.type==='tm_epo_variation_element_change'||(f=!1,c.each(function(){if(this.value===e)return f=!0,!1}),f||c.trigger('focusin'),c.val(e).trigger('change')),e||c.trigger('focusin'),n.find('.cpf-type-variations').not(h).each(function(){u.find('#'+a.epoAPI.dom.id(a(this).find('.tm-epo-variation-element').first().attr('data-tm-for-variation'))).trigger('focusin')}),b.trigger('blur'),u.trigger('woocommerce_update_variation_values_tmlogic')}).off('focusin.cpfv').on('focusin.cpfv',function(){var b=a(this),c;if(!b.is('select'))return;c=a.epoAPI.dom.id(b.attr('data-tm-for-variation')),u.find("[data-attribute_name='attribute_"+c+"']").trigger('focusin'),u.trigger('woocommerce_update_variation_values_tmlogic')}),u.off(E+'found_variation.tmepo tm_fix_stock','.single_variation_wrap').on(E+'found_variation.tmepo tm_fix_stock','.single_variation_wrap',function(){U(a(this),B)}),u.off(E+'found_variation.tmepo').on(E+'found_variation.tmepo',function(e,b){var c=a(this);f.data('is-on-sale',b.tc_is_on_sale),f.data('regular-price',ah(b.display_regular_price,f,b)),d.trigger('tm-epo-found-variation',{epo:l,totalsHolder:f,totalsHolderContainer:G,currentCart:t,variationForm:c,variation:b}),bu({epoHolder:j,totalsHolder:f,totalsHolderContainer:G,currentCart:t,variationForm:c,variation:b}),U(c,B)}).off(E+'hide_variation.tmepo').on(E+'hide_variation.tmepo',{_epoObject:l},function(e){var d;(s==='disable_change'||c.tm_epo_change_original_price==='yes')&&(!w||n.find('.cpf-bto-price').length===0)&&(e.data._epoObject.associated_connect?d=e.data._epoObject.main_product.find(b.associatedNativeProductPriceSelector):d=a(b.nativeProductPriceSelector),d.data('tc-original-html')&&d.html(d.data('tc-original-html'))),f.data('price',!1),f.removeData('tcprice'),t.trigger({type:'tm-epo-update',norules:2})}).off(E+'check_variations.tmepo').on(E+'check_variations.tmepo',function(){var d={},c=0,b=H.find('.reset_variations');u.find('.variations select, .tc-epo-variable-product-selector').each(function(){var e=a(this).data('attribute_name')||a(this).attr('name'),b=a(this).val()||'';b.length>0&&c++,d[e]=b}),c>0?b.css('visibility')==='hidden'&&b.css('visibility','visible').hide().fadeIn():b.css('visibility','hidden')}).trigger(E+'check_variations'),ba(l,B,J,n,j)),S.trigger('tm-select-change-html'),O.trigger('change.cpf',{init:1}),W.trigger('showhide.cpfcustom'),L.filter(':checked').trigger('cpfclearbutton'),d.on('tm-do-epo-update',function(){t.trigger({type:'tm-epo-update'})}),d.trigger('tm-epo-init-events',{epo:{epo_id:al,form:l.form,currentCart:t,cart_container:B,epo_holder:j,totals_holder_container:G,totals_holder:f,main_cart:v,main_epo_inside_form:ac,product_id_selector:am,epo_id_selector:ak,product_id:ab,this_epo_container:ag,this_totals_container:aj,this_epo_totals_container:Y}}),d.trigger('epoEventHandlers',{epo:l,currentCart:t,cartContainer:B,qtyElement:I,epoHolder:j,totalsHolderContainer:G,totalsHolder:f,variationForm:u,variation_id_selector:af,main_epo_inside_form:ac,this_product_type:x,get_price_excluding_tax:aB,get_price_including_tax:y}),s!=='disable'&&s!=='disable_change'&&s!=='hide'&&G.addClass('tc-show'),d.trigger('epo_options_before_visible'),c.tm_epo_progressive_display==='yes'?setTimeout(function(){j.css('opacity',0).addClass('tc-show').animate({opacity:1},b.epoAnimationDelay,'easeOutExpo',function(){d.trigger('epo_options_visible'),d.trigger('tmlazy')})},b.epoDelay):(j.addClass('tc-show'),d.trigger('epo_options_visible'),d.trigger('tmlazy')),n.addClass('tc-init')}function aI(b){var c=b.variations_form,g=b.main_cart,e=b.this_epo_container,f=b.is_associated?'tc_variation_form.cpf':'wc_variation_form.cpf';c.off(f).on(f,function(){if(c.data('epo_loaded'))return;X(e),ab(e),a.tcepo.lateFieldsPrices[b.epoEventId]=[],ac(b),au(b),aq(b),b.noEpoUpdate=!1,setTimeout(function(){w(e),g.trigger({type:'tm-epo-update',rules:'init'})},10),c.data('epo_loaded',!0)}),aN&&c.trigger(f),d.trigger('epo-after-init',{epo:b})}function aM(a){var c=requestAnimationFrame(function(){aM(a)}),b=a.variations_form,d=b.data('bound'),e=a.is_associated?'tc_variation_form.cpf':'wc_variation_form.cpf';d&&(cancelAnimationFrame(c),aI(a),b.trigger(e))}function bA(b,c,h,d,k){var l=a.extend(!0,{},b),i=d.attr('data-product-id'),j=d.attr('data-epo-id'),e='.tm-product-id-'+i,g="[data-epo-id='"+j+"']",f='p'+i+'e'+j,m=a('.tc-extra-product-options'+e+g),n=a('.tc-totals-form'+e+g),o=a('.tc-epo-totals'+e+g);b.isManual=!0,a.tcepo.formSubmitEvents[f]=[],a.tcepo.errorObject[f]=!1,a.tcepo.initialActivation[f]=!1,b.product_id=i,b.product_id_selector=e,b.epo_id=j,b.epo_id_selector=g,b.epoEventId=f,b.noEpoUpdate=!0,b.thisForm=c,b.this_epo_container=m,b.this_totals_container=n,b.this_epo_totals_container=o,aL(),k.find('.tm-collapse').tmtoggle(),k.find('.tm-section-link').tmsectionpoplink(),L(c),S(c),aw(),aC(c,b),aK(c),J(d),aA(d.find('.tc-lightbox-image').not('.tm-extra-product-options-variations .radio-image')),X(d),ab(d),w(d),a.tcToolTip(c.find('.tm-tooltip')),ac(b,c,h),b.noEpoUpdate=!1,h.trigger({type:'tm-epo-update',norules:2}),setTimeout(function(){b.main_cart.trigger({type:'tm-epo-update',epoObject:l,norules:1})},200),U(h,c)}function v(f,v,j,l,C,B,x){var h=!1,y=!1,z=!1,t=typeof j!='undefined',A=!1,D=a('.variation_form_section .variations-table').length>0,u=!1,n,o,i,r,q,g,m,k,p;if(f=a(f),f.is('.tc-init')&&!x)return!0;if(v?E=f:E=a(e),d.trigger('tm-epo-init-start'),t||f.is('.product')&&(A=!0,t=s.find(b.epoSelector).length),!t&&c.tm_epo_enable_final_total_box_all==='no'&&!f.is('.tm-no-options-composite')){d.trigger('tm-epo-init-end-no-options');return}return A&&(d.trigger('tm-epo-init-no-options'),f.is('.product')&&!(f.is('.tm-no-options-pxq')||f.is('.tm-no-options-composite'))&&(f=s)),j||(p=f.find(b.addToCartSelector).last(),p.length>0?j=p.val():(p=a('.tc-totals-form.tm-totals-form-main'),j=p.attr('data-product-id')),j||(j='')),l||(l=parseInt(f.find('input.tm-epo-counter').last().val(),10),Number.isFinite(l)||(l='')),n='.tm-product-id-'+j,o="[data-epo-id='"+l+"']",i=a('.tc-extra-product-options'+n+o),r=a('.tc-totals-form'+n+o),q=a('.tc-epo-totals'+n+o),m=f.find('.variations_form').not('.composite_component .variations_form').first(),k='p'+j+'e'+l,m&&m.attr('data-product_id')&&m.attr('data-product_id')!==j&&(m=f.find(".variations_form[data-product_id='"+j+"']")),h=R(f,f,'form',j),h.length===0&&(f.is('.tc-shortcode-wrap')?h=R(r,r,'.tc-totals-form',j):f.is('.tc-epo-element-product-container')&&(h=f.find(b.associatedEpoCart),h.length===0&&(h=i.parent(b.associatedEpoSelector),h.length===0&&(h=f.find('.tc-epo-element-product-container-right'))),u=!0)),u&&m.length===0&&f.is('.variations_form')&&(m=f),a.tcepo.formSubmitEvents[k]=[],a.tcepo.errorObject[k]=!1,a.tcepo.initialActivation[k]=!1,h.find(b.epoSelector).length>0&&(y=!0),h.find('.tc-totals-form').length>0&&(z=!0),z||(a.tcepo.formSubmitEvents[k][a.tcepo.formSubmitEvents[k].length]={trigger:function(){return!0},on_true:function(){var c=a('.tc-totals-form.tm-product-id-'+j+"[data-epo-id='"+l+"']").tcClone(),b=a('<div class="tm-hidden tm-formepo-normal"></div>');return h.find('.tm-formepo-normal').remove(),b.append(c),h.append(b),!0},on_false:function(){setTimeout(function(){a('.tm-formepo-normal').remove()},100)}}),y||(a.tcepo.formSubmitEvents[k][a.tcepo.formSubmitEvents[k].length]={trigger:function(){return!0},on_true:function(){var d=a(b.epoSelector+'.tm-product-id-'+j+"[data-epo-id='"+l+"']").tcClone().addClass('formepo'),c=a('<div class="tm-hidden tm-formepo"></div>');return h.find('.tm-formepo').remove(),c.append(d),h.append(c),!0},on_false:function(){setTimeout(function(){a('.tm-formepo').remove()},100)}}),g={main_product:f,main_cart:h,epo_id:l,form:ap(f),main_epo_inside_form:y,product_id_selector:n,epo_id_selector:o,product_id:j,this_epo_container:i,this_totals_container:r,this_epo_totals_container:q,qtySelector:b.qtySelector,manualInitEPO:bA,epoEventId:k,variations_form:m,has_epo:t,is_quickview:v,is_associated:u,is_epo_shortcode:i.is('.tc-shortcode'),mainEpoObject:B,associated_connect:C,noEpoUpdate:!0},a(g.form).data('epo_object',g),h.data('product_id',j).data('epo_id',l).data('product_id_selector',n).data('epo_id_selector',o),a_(g),aZ(g),L(i),S(i),aw(),aC(i,g),bd(),a.tcToolTip(i.find('.tm-tooltip')),i.find('.tm-collapse').tmtoggle(),i.find('.tm-section-link').tmsectionpoplink(),x&&i.addClass('reactivate'),m.length>0?(x&&m.data('epo_loaded',!1),q.data('price',!1),D?aM(g):aI(g)):(setTimeout(function(){X(i),ab(i),w(i),a.tcepo.lateFieldsPrices[k]=[],ac(g),au(g),aq(g),d.trigger('epo-after-init-in-timeout',{epo:g}),h.trigger('tm-epo-check-dpd'),g.noEpoUpdate=!1,h.trigger({type:'tm-epo-update',rules:'init'})},20),d.trigger('epo-after-init',{epo:g})),aL(),aK(i),J(i),aA(i.find('.tc-lightbox-image').not('.tm-extra-product-options-variations .radio-image')),a$(g),bl(g),u||(aY(q,v,h),bt(g),av(f,g,a.tcepo.oneOptionIsSelected[k],g)),d.trigger('tm-epo-init-end',{epo:g}),g}function bC(h,d){var c=a(h),e=c.attr('data-product-id'),f=c.attr('data-epo-id'),g=!1,b=c.parent();b.is('form')||(b=c.closest('form'),b.is('form')||(b=c.parent())),b=b.parent(),v(b,g,e,f,void 0,void 0,d)}function aQ(){var d,f;c.tm_epo_no_lazy_load==='no'&&a.extend(a.lazyLoadXT,{autoInit:!1,selector:'img.tmlazy',srcAttr:'data-original',visibleOnly:!1,updateEvent:a.lazyLoadXT.updateEvent+' tmlazy'}),d=a('.tm-no-options-pxq, .tm-no-options-composite'),d.length>0&&d.each(function(c,b){v(a(b),!1)}),setTimeout(function(){try{f=a(b.epoSelector).not(b.associatedEpoSelector+' '+b.epoSelector+', .tm-no-options-pxq, .tm-no-options-composite, .wc-product-table '+b.epoSelector),f.length>0&&f.each(function(){var d=a(this),e=d.attr('data-product-id'),f=d.attr('data-epo-id'),h=!1,g=!1,c=d.closest('.tc-after-shop-loop.tm-has-options');c.length===0?(c=a(b.tcAddToCartSelector+"[data-epo-id='"+f+"'][value='"+e+"']").closest('form,.cart').first().parent(),c.length===0&&(c=a(b.addToCartSelector+"[value='"+e+"']").closest('form,.cart').first().parent(),c.length===0&&(c=d.closest('form,.cart').first().parent('.tm-has-options'),c.length===0&&(d.is('.tc-shortcode')&&(c=d.wrap('<div class="tc-shortcode-wrap tc-wrap-'+f+'"></div>'),c=d.parent()),c.length>0&&(g=!0))))):g=!0,c.length>0&&(g&&(h=!0,d.closest('form,.cart').first().append(a('<input name="add-to-cart" value="'+e+'" type="hidden">')),d.closest('form,.cart').first().append(a('<input type="hidden" value="" class="variation_id" name="variation_id">'))),c.is('form')&&(c=c.parent()),v(c,h,e,f))})}catch(a){e.console.log(a),I=a}},1)}a.tcepo.tm_init_epo=function(a,b,c,d){v(a,b,c,d)},a.tcepo.tmLazyloadContainer=function(a){x=a},d.on('tc_manual_init',function(c,a){var b;'container'in a&&'reactivate'in a&&(b=a.reactivate,a=a.container),bC(a,b)}),a(function(){b=a.epoAPI.applyFilter('tc_api',b),d.on('lazyLoadXToncomplete',function(){a('.tm-owl-slider').each(function(){a(this).trigger('refresh.owl.carousel')})}),d.on('tc_init_epo_plugin',function(a){aQ(a)}),d.on('tcShowLastError',function(){e.console.log(I)}),s.on('adding_to_cart',function(b,c,a){e.console.log(a)}),s.on('click.tcajax','.ajax_add_to_cart',function(){var c,b,h,g,d,e,f;if(l=a(this),void 0!==l.attr('data-product_id')){if(d=l.closest('.cart').find('.tm-epo-counter').val(),!d)return;if(l.closest('.tm-has-options').length!==1)return;c=l.attr('data-product_id'),e={},b=a('.tc-extra-product-options.tm-product-id-'+c+'[data-epo-id="'+d+'"]'),b.length>1&&(b.filter('.formepo')?b=b.filter('.formepo'):b=b.first()),b.length===1&&(h=a('.tc-totals-form.tm-product-id-'+c+'[data-epo-id="'+d+'"]').find('.cpf-product-price').val(),g=a('.tc-totals-form.tm-product-id-'+c+'[data-epo-id="'+d+'"]').find('.tc_form_prefix').val(),e=a.extend(e,{tcajax:1,tcaddtocart:c,cpf_product_price:h}),g&&(e.tc_form_prefix=g)),f=l.data(),f=a.extend(f,b.tcSerializeObject(),e),l.removeData(),l.data(f)}}),a.ajaxPrefilter(function(b,e){var s=!1,h,r,g,j,m,f,k,i,d,t,o,p,q,n;if(c.tm_epo_enable_in_shop==='yes')if(h=b.url.split('?'),h&&h.length>=1)if(h=h[1],h){r=h.split('&');for(g=0;g<r.length;g+=1)j=r[g].split('='),j.length>=1&&j[0]&&j[1]&&j[0]==='wc-ajax'&&j[1]==='add_to_cart'&&(s=!0);s&&(b.originalsuccess=b.success,b.success=function(c){c&&c.error&&c.product_url?(l&&l.length===1&&(m=l),m=a(".ajax_add_to_cart[data-product_id='"+e.data.product_id+"']"),m.removeClass('added'),m.removeClass('loading')):b.originalsuccess.call(null,c)})}FormData&&e.data&&(f=e.data,typeof e.data=='string'&&(f=a.epoAPI.util.parseParams(e.data)),k=[],e.url&&e.url.indexOf&&(k=a.epoAPI.util.parseParams(e.url.slice(e.url.indexOf('?')+1))),'quantity'in f&&(f.product_id||f['add-to-cart']||k.product_id||k['add-to-cart']||f.tcaddtocart)&&(i=f.product_id||f['add-to-cart']||k.product_id||k['add-to-cart']||f.tcaddtocart,l&&l.length===1&&l.closest('.tm-has-options').length===1?d=l.closest('.tm-has-options').find('.tc-extra-product-options.tm-product-id-'+i):d=a('.tc-extra-product-options.tm-product-id-'+i),d.length>1&&(d.filter('.formepo')?d=d.filter('.formepo'):d=d.first()),d.length===1&&(t=a('.tc-totals-form.tm-product-id-'+i).find('.cpf-product-price').val(),o=a('.tc-totals-form.tm-product-id-'+i).find('.tc_form_prefix').val(),p={tcajax:1,tcaddtocart:i,cpf_product_price:t},o&&(p.tc_form_prefix=o),b.data=a.epoAPI.util.parseParams(b.data,!0),b.data=a.extend(b.data,d.tcSerializeObject(),p),q=b.data,n=new FormData,Object.keys(q).forEach(function(a){n.append(a,q[a])}),d.find(':file').toArray().forEach(function(b){for(g=0;g<a(b)[0].files.length;g++)n.append(a(b).attr('name'),a(b)[0].files[g])}),b.data=n,b.contentType=!1,b.cache=!1,b.processData=!1)))}),h.ajaxSuccess(function(t,s,j){var h=c.quickview_array||'null',k=c.quickview_container||'null',p={},r=1,e=a.epoAPI.util.parseParams(j.data),n,o,i,g,f,l,q,m;if(e.action==='wc_epo_get_associated_product_html')return;a('.tm-formepo-normal').remove(),a('.tm-formepo').remove(),a('.tm-cart-link').tmpoplink(),h=a.epoAPI.util.parseJSON(h),k=a.epoAPI.util.parseJSON(k);for(l in k)Object.prototype.hasOwnProperty.call(k,l)&&(p[k[l][0]]=a(k[l][1]));a.extend(h,p),q=function(){var b=!1;return Object.keys(h).forEach(function(c){a(h[c]).length&&(b=c)}),b},m=function(l){var p=requestAnimationFrame(function(){setTimeout(function(){m(l-1)},200)}),c=q(),k;if(c||0===l)if(cancelAnimationFrame(p),c){if(i=!1,f=a(h[c]),c==='woothemes_quick_view'&&f.is('.fusion-woocommerce-quick-view-container'))return!0;if(c==='fusion_quick_view_load'&&f.find(b.epoSelector).length===0)return!0;if(c==='woodmart_quick_shop'&&(e=a.epoAPI.util.parseParams(j.url),e.action==='woodmart_quick_shop'&&(g=a(a.epoAPI.util.escapeSelector(h[c]+'.post-'+e.id)),g.length&&(f=g,i=!0))),c==='woodmart_quick_view'&&(e=a.epoAPI.util.parseParams(j.url),e.action==='woodmart_quick_view'&&(g=a(a.epoAPI.util.escapeSelector(h[c]+'.post-'+e.id)),g.length&&(f=g,i=!0))),c==='quickview_pro'&&(e=j.url.split('/'),e.length&&(g=a(a.epoAPI.util.escapeSelector(h[c]+' .post-'+e[e.length-1])),g.length&&(f=g,i=!0))),(c==='exwoofood_booking_info'||c==='wqv_popup_content'||c==='wp_food'||c==='jet_popup_get_content')&&(i=!0),c==='woofood'&&j.data&&(e=a.epoAPI.util.parseParams(j.data),e.action==='woofood_quickview_ajax'&&(g=g=f.find('form').parent(),g.length&&(f=g,i=!0))),f.find('.product').length===0&&f.is('.product')&&(i=!0),f.find('.product').length>0||i){if(f.removeClass('tc-init'),(c==='fusion_quick_view_load'||c==='jet_popup_get_content'||c==='wp_food'||c==='woodmart_quick_shop'||c==='woodmart_quick_view'||c==='lightboxpro'||c==='jckqv_quick_view'||c==='yith_quick_view'||c==='theme_flatsome')&&(aN=!0),x=f,k=x.find(b.epoSelector),k.length===0)return delete h[c],m(10),!0;c==='fusion_quick_view_load'&&(r=1400),setTimeout(function(){n=k.attr('data-product-id'),o=k.attr('data-epo-id'),c==='woodmart_quick_shop'&&f.addClass('has-options'),b.getElementFromFieldCache=[],v(x,!0,n,o),d.trigger('tmlazy'),d.trigger('tm_epo_loaded_quickview'),a.jMaskGlobals&&x.find(a.jMaskGlobals.maskElements).each(function(){var b=a(this);b.attr('data-mask')&&b.mask(b.attr('data-mask'))})},r)}}},m(10)}),aQ(),a('.tm-cart-link').tmpoplink(),s.on('updated_checkout',function(){a('.tm-cart-link').tmpoplink()}),d.trigger('tmlazy'),d.trigger('tm_epo_loaded')}),a(function(){var d=navigator.userAgent||navigator.vendor||e.opera;d=d.indexOf('FBAN')>-1||d.indexOf('FBAV')>-1||d.indexOf('Instagram')>-1,d&&a('.tmcp-upload').removeAttr('accept'),h.on('click','.quantity .jckqv-qty-spinner, .quantity .ui-spinner-button',function(){a(this).closest('.quantity').find(b.qtySelector).trigger('change')}),a('#wholesale_form').on('submit',function(){var d=a('form.cart').find(b.addToCartSelector).val(),e=a(b.epoSelector+".tm-cart-main[data-product-id='"+d+"']").tcClone(),f=a(".tm-totals-form-main[data-product-id='"+d+"']").tcClone(),c=a("<div class='tm-hidden tm-formepo'></div>");return c.append(e),c.append(f),a(this).append(c),!0}),h.on('click','#add_to_quote',function(g){var d,e,f;c&&c.tm_epo_global_enable_validation==='yes'&&(d=a(this).parents('form'),e=parseInt(d.find('.tm-epo-counter').val(),10),f=a(b.epoSelector+"[data-epo-id='"+e+"']"),c.tm_epo_global_enable_validation==='yes'&&a.tc_validator&&d.length>0&&f.length>0&&!d.tc_validate().form()&&g.stopImmediatePropagation())}),a('.single_add_to_cart_button.paypal_checkout_button').on('click',function(d){var b=a('.cart'),c;b.data('tc_validator')&&(c=b.data('tc_validator'),c.errorList&&d.stopImmediatePropagation())}),a('.wc-product-table').on('init.wcpt',function(d,c){c.$table.find(b.epoSelector).addClass('hidden'),c.$table.find('thead tr').append('<th>&nbsp;</th>'),setTimeout(function(){c.$table.find('.cart:not(.cart_group)').each(function(){var c=a(this).find(b.epoSelector),d=c.closest('tr');a("<td class='wc-product-table-epo'></td>").appendTo(d).append(c),a(e).trigger('tc_manual_init',c),c.removeClass('hidden')})},500)})})})(window,document,window.jQuery)