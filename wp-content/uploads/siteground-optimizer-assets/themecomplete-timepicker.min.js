/*! jQuery Timepicker Addon - v1.6.3 - 2016-04-20
 * http://trentrichardson.com/examples/timepicker
 * Modified version of jQuery Timepicker
 * Copyright (c) 2016 Trent Richardson; Licensed MIT */(function(a){'use strict';typeof window.define=='function'&&window.define.amd?window.define(['jquery','jquery-ui'],a):a(window.jQuery)})(function(a){'use strict';var b=function(d,b){var c;a.extend(d,b);for(c in b)(b[c]===null||b[c]===void 0)&&(d[c]=b[c]);return d},i=function(a){var b;for(b in a)if(Object.prototype.hasOwnProperty.call(a,b))return!1;return!0},j=function(c){var b=c.replace(/'.*?'/g,'').toLowerCase(),a=function(a,b){return a.indexOf(b)!==-1};return{hour:a(b,'h'),minute:a(b,'m'),second:a(b,'s'),millisec:a(b,'l'),microsec:a(b,'c'),timezone:a(b,'z'),ampm:a(b,'t')&&a(c,'h'),iso8601:a(c,'Z')}},e=function(a){return a%=12,a===0&&(a=12),String(a)},f=function(b,c){return b&&b[c]?b[c]:a.tm_timepicker._defaults[c]},h=function(e,c){var a=f(c,'separator'),h=f(c,'timeFormat'),i=h.split(a),d=i.length,b=e.split(a),g=b.length;return g>1?{dateString:b.splice(0,g-d).join(a),timeString:b.splice(0,d).join(a)}:{dateString:e,timeString:''}},g=function(i,j,f,g,e){var d,b,c;if(b=h(f,e),d=a.tm_datepicker._base_parseDate(i,b.dateString,g),b.timeString==='')return{date:d};if(c=a.tm_datepicker.parseTime(j,b.timeString,e),!c)throw'Wrong time format';return{date:d,timeObj:c}},c=function(a,c){var b;a&&a.timezone_select&&(b=c||new Date,a.timezone_select.val(-b.getTimezoneOffset()))},d=function(){this.regional=[],this.regional['']={currentText:'Now',closeText:'Done',amNames:['AM','A'],pmNames:['PM','P'],timeFormat:'HH:mm',timeSuffix:'',timeOnlyTitle:'Choose Time',timeText:'Time',hourText:'Hour',minuteText:'Minute',secondText:'Second',millisecText:'Millisecond',microsecText:'Microsecond',timezoneText:'Time Zone',isRTL:!1},this._defaults={showButtonPanel:!0,timeOnly:!1,timeOnlyShowDate:!1,showHour:null,showMinute:null,showSecond:null,showMillisec:null,showMicrosec:null,showTimezone:null,showTime:!0,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,stepMicrosec:1,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,microsecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,microsecMax:999,minDateTime:null,maxDateTime:null,maxTime:null,minTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,microsecGrid:0,alwaysSetTime:!0,separator:' ',altFieldTimeOnly:!0,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,altRedirectFocus:!0,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:!0,timezoneList:null,addSliderAccess:!1,sliderAccessArgs:null,controlType:'slider',oneLine:!1,defaultValue:null,parse:'strict',afterInject:null},a.extend(this._defaults,this.regional[''])};if(a.ui.tm_timepicker=a.ui.tm_timepicker||{},a.ui.tm_timepicker.version)return;a.extend(a.ui,{tm_timepicker:{version:'1.6.3'}}),a.extend(d.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,microsec_slider:null,timezone_select:null,maxTime:null,minTime:null,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,microsecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,microsecMaxOriginal:null,ampm:'',formattedDate:'',formattedTime:'',formattedDateTime:'',timezoneList:null,units:['hour','minute','second','millisec','microsec'],support:{},control:null,setDefaults:function(a){return b(this._defaults,a||{}),this},_newInst:function(c,n){var b=new d,p={},o={},i=0,l=null,h,m,e,k,g,f;for(h in this._defaults)Object.prototype.hasOwnProperty.call(this._defaults,h)&&(m=c.attr('data-'+h),m&&(p[h]=m));g={beforeShow:function(a,d){if(typeof b._defaults.evnts.beforeShow=='function')return b._defaults.evnts.beforeShow.call(c[0],a,d,b)},onChangeMonthYear:function(a,d,e){typeof b._defaults.evnts.onChangeMonthYear=='function'&&b._defaults.evnts.onChangeMonthYear.call(c[0],a,d,e,b)},onClose:function(d,a){b.timeDefined===!0&&c.val()!==''&&b._updateDateTime(a),typeof b._defaults.evnts.onClose=='function'&&b._defaults.evnts.onClose.call(c[0],d,a,b)}};for(f in g)Object.prototype.hasOwnProperty.call(g,f)&&(o[f]=n[f]||this._defaults[f]||null);if(b._defaults=a.extend({},this._defaults,p,n,g,{evnts:o,tm_timepicker:b}),b.amNames=a.map(b._defaults.amNames,function(a){return a.toUpperCase()}),b.pmNames=a.map(b._defaults.pmNames,function(a){return a.toUpperCase()}),b.support=j(b._defaults.timeFormat+(b._defaults.pickerTimeFormat?b._defaults.pickerTimeFormat:'')+(b._defaults.altTimeFormat?b._defaults.altTimeFormat:'')),typeof b._defaults.controlType=='string'?(b._defaults.controlType==='slider'&&typeof a.ui.slider=='undefined'&&(b._defaults.controlType='select'),b.control=b._controls[b._defaults.controlType]):b.control=b._defaults.controlType,e=[-720,-660,-600,-570,-540,-480,-420,-360,-300,-270,-240,-210,-180,-120,-60,0,60,120,180,210,240,270,300,330,345,360,390,420,480,525,540,570,600,630,660,690,720,765,780,840],b._defaults.timezoneList!==null&&(e=b._defaults.timezoneList),k=e.length,k>0&&typeof e[0]!='object')for(;i<k;i+=1)l=e[i],e[i]={value:l,label:a.tm_timepicker.timezoneOffsetString(l,b.support.iso8601)};return b._defaults.timezoneList=e,b.timezone=b._defaults.timezone!==null?a.tm_timepicker.timezoneOffsetNumber(b._defaults.timezone):(new Date).getTimezoneOffset()*-1,b.hour=b._defaults.hour<b._defaults.hourMin?b._defaults.hourMin:b._defaults.hour>b._defaults.hourMax?b._defaults.hourMax:b._defaults.hour,b.minute=b._defaults.minute<b._defaults.minuteMin?b._defaults.minuteMin:b._defaults.minute>b._defaults.minuteMax?b._defaults.minuteMax:b._defaults.minute,b.second=b._defaults.second<b._defaults.secondMin?b._defaults.secondMin:b._defaults.second>b._defaults.secondMax?b._defaults.secondMax:b._defaults.second,b.millisec=b._defaults.millisec<b._defaults.millisecMin?b._defaults.millisecMin:b._defaults.millisec>b._defaults.millisecMax?b._defaults.millisecMax:b._defaults.millisec,b.microsec=b._defaults.microsec<b._defaults.microsecMin?b._defaults.microsecMin:b._defaults.microsec>b._defaults.microsecMax?b._defaults.microsecMax:b._defaults.microsec,b.ampm='',b.$input=c,b._defaults.altField&&(b.$altInput=a(b._defaults.altField),b._defaults.altRedirectFocus===!0&&b.$altInput.css({cursor:'pointer'}).on('focus',function(){c.trigger('focus')})),(b._defaults.minDate===0||b._defaults.minDateTime===0)&&(b._defaults.minDate=new Date),(b._defaults.maxDate===0||b._defaults.maxDateTime===0)&&(b._defaults.maxDate=new Date),b._defaults.minDate!==void 0&&b._defaults.minDate instanceof Date&&(b._defaults.minDateTime=new Date(b._defaults.minDate.getTime())),b._defaults.minDateTime!==void 0&&b._defaults.minDateTime instanceof Date&&(b._defaults.minDate=new Date(b._defaults.minDateTime.getTime())),b._defaults.maxDate!==void 0&&b._defaults.maxDate instanceof Date&&(b._defaults.maxDateTime=new Date(b._defaults.maxDate.getTime())),b._defaults.maxDateTime!==void 0&&b._defaults.maxDateTime instanceof Date&&(b._defaults.maxDate=new Date(b._defaults.maxDateTime.getTime())),b.$input.on('focus',function(){b._onFocus()}),b.$input.next('.ui-tm-timepicker-trigger').on('click',function(){return b._onFocus(),!1}),b},_addTimePicker:function(b){var c=a.epoAPI.util.trim(this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+' '+this.$altInput.val():this.$input.val());this.timeDefined=this._parseTime(c),this._limitMinMaxDateTime(b,!1),this._injectTimePicker(),this._afterInject()},_parseTime:function(b,f){var c,d,e;if(this.inst||(this.inst=a.tm_datepicker._getInst(this.$input[0])),f||!this._defaults.timeOnly){c=a.tm_datepicker._get(this.inst,'dateFormat');try{if(d=g(c,this._defaults.timeFormat,b,a.tm_datepicker._getFormatConfig(this.inst),this._defaults),!d.timeObj)return!1;a.extend(this,d.timeObj)}catch(d){return a.tm_timepicker.log('Error parsing the date/time string: '+d+'\ndate/time string = '+b+'\ntimeFormat = '+this._defaults.timeFormat+'\ndateFormat = '+c),!1}return!0}return!(e=a.tm_datepicker.parseTime(this._defaults.timeFormat,b,this._defaults),!e)&&(a.extend(this,e),!0)},_afterInject:function(){var a=this.inst.settings;typeof a.afterInject=='function'&&a.afterInject.call(this)},_ui_tpicker_onclick:function(b){var d=a(b.target),e=d.html(),c=parseInt(e.replace(/[^0-9]/g),10),f=e.replace(/[^apm]/gi),g=d.data('for');g==='hour'&&(f.indexOf('p')!==-1&&c<12?c+=12:f.indexOf('a')!==-1&&c===12&&(c=0)),b.data.tp_inst.control.value(b.data.tp_inst,b.data.tp_inst[g+'_slider'],b.data.litem,c),b.data.tp_inst._onTimeChange(),b.data.tp_inst._onSelectHandler()},_injectTimePicker:function(){var r=this.inst.dpDiv,d=this.inst.settings,e=this,b='',h='',k=null,m={},l={},p=null,i=0,o=0,j,g,q,w,n,v,f,x,t,y,u,s;if(r.find('div.ui-tm-timepicker-div').length===0&&d.showTimepicker){j=' ui_tpicker_unit_hide',g='<div class="ui-tm-timepicker-div'+(d.isRTL?' ui-tm-timepicker-rtl':'')+(d.oneLine&&d.controlType==='select'?' ui-tm-timepicker-oneLine':'')+'"><dl>'+'<dt class="ui_tpicker_time_label'+(d.showTime?'':j)+'">'+d.timeText+'</dt>'+'<dd class="ui_tpicker_time '+(d.showTime?'':j)+'"><input class="ui_tpicker_time_input" '+(d.timeInput?'':'disabled')+'></dd>';for(i=0,o=this.units.length;i<o;i+=1){if(b=this.units[i],h=b.substring(0,1).toUpperCase()+b.substring(1),k=d['show'+h]!==null?d['show'+h]:this.support[b],m[b]=parseInt(d[b+'Max']-(d[b+'Max']-d[b+'Min'])%d['step'+h],10),l[b]=0,g+='<dt class="ui_tpicker_'+b+'_label'+(k?'':j)+'">'+d[b+'Text']+'</dt>'+'<dd class="ui_tpicker_'+b+(k?'':j)+'"><div class="ui_tpicker_'+b+'_slider'+(k?'':j)+'"></div>',k&&d[b+'Grid']>0){if(g+='<div><table class="ui-tpicker-grid-label"><tr>',b==='hour')for(q=d[b+'Min'];q<=m[b];q+=parseInt(d[b+'Grid'],10))l[b]+=1,w=a.tm_datepicker.formatTime(this.support.ampm?'hht':'HH',{hour:q},d),g+='<td data-for="'+b+'">'+w+'</td>';else for(n=d[b+'Min'];n<=m[b];n+=parseInt(d[b+'Grid'],10))l[b]+=1,g+='<td data-for="'+b+'">'+(n<10?'0':'')+n+'</td>';g+='</tr></table></div>'}g+='</dd>'}v=d.showTimezone!==null?d.showTimezone:this.support.timezone,g+='<dt class="ui_tpicker_timezone_label'+(v?'':j)+'">'+d.timezoneText+'</dt>',g+='<dd class="ui_tpicker_timezone'+(v?'':j)+'"></dd>',g+='</dl></div>',f=a(g),d.timeOnly===!0&&(f.prepend('<div class="tm-ui-widget-header"><div class="tm-ui-tp-title">'+d.timeOnlyTitle+'</div>'+'</div>'),r.find('.tm-ui-dp-inner-container').hide());for(i=0,o=e.units.length;i<o;i+=1)b=e.units[i],h=b.substring(0,1).toUpperCase()+b.substring(1),k=d['show'+h]!==null?d['show'+h]:this.support[b],e[b+'_slider']=e.control.create(e,f.find('.ui_tpicker_'+b+'_slider'),b,e[b],d[b+'Min'],m[b],d['step'+h]),k&&d[b+'Grid']>0&&(p=100*l[b]*d[b+'Grid']/(m[b]-d[b+'Min']),f.find('.ui_tpicker_'+b+' table').css({width:p+'%',marginLeft:d.isRTL?'0':p/(-2*l[b])+'%',marginRight:d.isRTL?p/(-2*l[b])+'%':'0',borderCollapse:'collapse'}).find('td').on('click',{that:this,tp_inst:e,litem:b},this._ui_tpicker_onclick).css({cursor:'pointer',width:100/l[b]+'%',textAlign:'center',overflow:'hidden'}));this.timezone_select=f.find('.ui_tpicker_timezone').append('<select></select>').find('select'),a.fn.append.apply(this.timezone_select,a.map(d.timezoneList,function(b){return a('<option />').val(typeof b=='object'?b.value:b).text(typeof b=='object'?b.label:b)})),typeof this.timezone!='undefined'&&this.timezone!==null&&this.timezone!==''?(x=new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12).getTimezoneOffset()*-1,x===this.timezone?c(e):this.timezone_select.val(this.timezone)):typeof this.hour!='undefined'&&this.hour!==null&&this.hour!==''?this.timezone_select.val(d.timezone):c(e),this.timezone_select.on('change',function(){e._onTimeChange(),e._onSelectHandler(),e._afterInject()}),t=r.find('.tm-ui-dp-buttonpane'),t.length?t.before(f):r.append(f),this.$timeObj=f.find('.ui_tpicker_time_input'),this.$timeObj.on('change',function(){var d=e.inst.settings.timeFormat,b=a.tm_datepicker.parseTime(d,this.value),c=new Date;b?(c.setHours(b.hour),c.setMinutes(b.minute),c.setSeconds(b.second),a.datepicker._setTime(e.inst,c)):(this.value=e.formattedTime,this.trigger('blur'))}),this.inst!==null&&(y=this.timeDefined,this._onTimeChange(),this.timeDefined=y),this._defaults.addSliderAccess&&(u=this._defaults.sliderAccessArgs,s=this._defaults.isRTL,u.isRTL=s,setTimeout(function(){var b;f.find('.ui-slider-access').length===0&&(f.find('.ui-slider:visible').sliderAccess(u),b=f.find('.ui-slider-access:eq(0)').outerWidth(!0),b&&f.find('table:visible').each(function(){var c=a(this),d=c.outerWidth(),g=c.css(s?'marginRight':'marginLeft').toString().replace('%',''),e=d-b,h=g*e/d+'%',f={width:e,marginRight:0,marginLeft:0};f[s?'marginRight':'marginLeft']=h,c.css(f)}))},10)),e._limitMinMaxDateTime(this.inst,!0)}},_limitMinMaxDateTime:function(b,k){var e=this._defaults,h=new Date(b.selectedYear,b.selectedMonth,b.selectedDay),f,j,g,i,c,d,l,m,n,o,p;if(!this._defaults.showTimepicker)return;a.tm_datepicker._get(b,'minDateTime')!==null&&a.tm_datepicker._get(b,'minDateTime')!==void 0&&h&&(f=a.tm_datepicker._get(b,'minDateTime'),j=new Date(f.getFullYear(),f.getMonth(),f.getDate(),0,0,0,0),(this.hourMinOriginal===null||this.minuteMinOriginal===null||this.secondMinOriginal===null||this.millisecMinOriginal===null||this.microsecMinOriginal===null)&&(this.hourMinOriginal=e.hourMin,this.minuteMinOriginal=e.minuteMin,this.secondMinOriginal=e.secondMin,this.millisecMinOriginal=e.millisecMin,this.microsecMinOriginal=e.microsecMin),b.settings.timeOnly||j.getTime()===h.getTime()?(this._defaults.hourMin=f.getHours(),this.hour<=this._defaults.hourMin?(this.hour=this._defaults.hourMin,this._defaults.minuteMin=f.getMinutes(),this.minute<=this._defaults.minuteMin?(this.minute=this._defaults.minuteMin,this._defaults.secondMin=f.getSeconds(),this.second<=this._defaults.secondMin?(this.second=this._defaults.secondMin,this._defaults.millisecMin=f.getMilliseconds(),this.millisec<=this._defaults.millisecMin?(this.millisec=this._defaults.millisecMin,this._defaults.microsecMin=f.getMicroseconds()):(this.microsec<this._defaults.microsecMin&&(this.microsec=this._defaults.microsecMin),this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)),a.tm_datepicker._get(b,'maxDateTime')!==null&&a.tm_datepicker._get(b,'maxDateTime')!==void 0&&h&&(g=a.tm_datepicker._get(b,'maxDateTime'),i=new Date(g.getFullYear(),g.getMonth(),g.getDate(),0,0,0,0),(this.hourMaxOriginal===null||this.minuteMaxOriginal===null||this.secondMaxOriginal===null||this.millisecMaxOriginal===null)&&(this.hourMaxOriginal=e.hourMax,this.minuteMaxOriginal=e.minuteMax,this.secondMaxOriginal=e.secondMax,this.millisecMaxOriginal=e.millisecMax,this.microsecMaxOriginal=e.microsecMax),b.settings.timeOnly||i.getTime()===h.getTime()?(this._defaults.hourMax=g.getHours(),this.hour>=this._defaults.hourMax?(this.hour=this._defaults.hourMax,this._defaults.minuteMax=g.getMinutes(),this.minute>=this._defaults.minuteMax?(this.minute=this._defaults.minuteMax,this._defaults.secondMax=g.getSeconds(),this.second>=this._defaults.secondMax?(this.second=this._defaults.secondMax,this._defaults.millisecMax=g.getMilliseconds(),this.millisec>=this._defaults.millisecMax?(this.millisec=this._defaults.millisecMax,this._defaults.microsecMax=g.getMicroseconds()):(this.microsec>this._defaults.microsecMax&&(this.microsec=this._defaults.microsecMax),this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.hourMax=this.hourMaxOriginal,this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)),b.settings.minTime!==null&&(c=new Date('01/01/1970 '+b.settings.minTime),parseFloat(b.settings.minTime).toString()===b.settings.minTime&&(c=new Date(Date.now()+parseFloat(b.settings.minTime))),this.hour<c.getHours()?(this._defaults.hourMin=c.getHours(),this.hour=this._defaults.hourMin,this._defaults.minuteMin=c.getMinutes(),this.minute=this._defaults.minuteMin):this.hour===c.getHours()&&this.minute<c.getMinutes()?(this._defaults.minuteMin=c.getMinutes(),this.minute=this._defaults.minuteMin):this._defaults.hourMin<c.getHours()?(this._defaults.hourMin=c.getHours(),this._defaults.minuteMin=c.getMinutes()):this._defaults.hourMin===c.getHours()===this.hour&&this._defaults.minuteMin<c.getMinutes()?this._defaults.minuteMin=c.getMinutes():this._defaults.minuteMin=0),b.settings.maxTime!==null&&(d=new Date('01/01/1970 '+b.settings.maxTime),this.hour>d.getHours()?(this._defaults.hourMax=d.getHours(),this.hour=this._defaults.hourMax,this._defaults.minuteMax=d.getMinutes(),this.minute=this._defaults.minuteMax):this.hour===d.getHours()&&this.minute>d.getMinutes()?(this._defaults.minuteMax=d.getMinutes(),this.minute=this._defaults.minuteMax):this._defaults.hourMax>d.getHours()?(this._defaults.hourMax=d.getHours(),this._defaults.minuteMax=d.getMinutes()):this._defaults.hourMax===d.getHours()===this.hour&&this._defaults.minuteMax>d.getMinutes()?this._defaults.minuteMax=d.getMinutes():this._defaults.minuteMax=59),k!==void 0&&k===!0&&(l=parseInt(this._defaults.hourMax-(this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour,10),m=parseInt(this._defaults.minuteMax-(this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute,10),n=parseInt(this._defaults.secondMax-(this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond,10),o=parseInt(this._defaults.millisecMax-(this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec,10),p=parseInt(this._defaults.microsecMax-(this._defaults.microsecMax-this._defaults.microsecMin)%this._defaults.stepMicrosec,10),this.hour_slider&&(this.control.options(this,this.hour_slider,'hour',{min:this._defaults.hourMin,max:l,step:this._defaults.stepHour}),this.control.value(this,this.hour_slider,'hour',this.hour-this.hour%this._defaults.stepHour)),this.minute_slider&&(this.control.options(this,this.minute_slider,'minute',{min:this._defaults.minuteMin,max:m,step:this._defaults.stepMinute}),this.control.value(this,this.minute_slider,'minute',this.minute-this.minute%this._defaults.stepMinute)),this.second_slider&&(this.control.options(this,this.second_slider,'second',{min:this._defaults.secondMin,max:n,step:this._defaults.stepSecond}),this.control.value(this,this.second_slider,'second',this.second-this.second%this._defaults.stepSecond)),this.millisec_slider&&(this.control.options(this,this.millisec_slider,'millisec',{min:this._defaults.millisecMin,max:o,step:this._defaults.stepMillisec}),this.control.value(this,this.millisec_slider,'millisec',this.millisec-this.millisec%this._defaults.stepMillisec)),this.microsec_slider&&(this.control.options(this,this.microsec_slider,'microsec',{min:this._defaults.microsecMin,max:p,step:this._defaults.stepMicrosec}),this.control.value(this,this.microsec_slider,'microsec',this.microsec-this.microsec%this._defaults.stepMicrosec)))},_onTimeChange:function(){var b=!!this.hour_slider&&this.control.value(this,this.hour_slider,'hour'),h=!!this.minute_slider&&this.control.value(this,this.minute_slider,'minute'),d=!!this.second_slider&&this.control.value(this,this.second_slider,'second'),e=!!this.millisec_slider&&this.control.value(this,this.millisec_slider,'millisec'),f=!!this.microsec_slider&&this.control.value(this,this.microsec_slider,'microsec'),g=!!this.timezone_select&&this.timezone_select.val(),c=this._defaults,j=c.pickerTimeFormat||c.timeFormat,k=c.pickerTimeSuffix||c.timeSuffix,l,i,m,n;if(!this._defaults.showTimepicker)return;typeof b=='object'&&(b=!1),typeof h=='object'&&(h=!1),typeof d=='object'&&(d=!1),typeof e=='object'&&(e=!1),typeof f=='object'&&(f=!1),typeof g=='object'&&(g=!1),b!==!1&&(b=parseInt(b,10)),h!==!1&&(h=parseInt(h,10)),d!==!1&&(d=parseInt(d,10)),e!==!1&&(e=parseInt(e,10)),f!==!1&&(f=parseInt(f,10)),g!==!1&&(g=g.toString()),l=c[b<12?'amNames':'pmNames'][0],i=b!==parseInt(this.hour,10)||h!==parseInt(this.minute,10)||d!==parseInt(this.second,10)||e!==parseInt(this.millisec,10)||f!==parseInt(this.microsec,10)||this.ampm.length>0&&b<12!==(a.inArray(this.ampm.toUpperCase(),this.amNames)!==-1)||this.timezone!==null&&g!==this.timezone.toString(),i&&(b!==!1&&(this.hour=b),h!==!1&&(this.minute=h),d!==!1&&(this.second=d),e!==!1&&(this.millisec=e),f!==!1&&(this.microsec=f),g!==!1&&(this.timezone=g),this.inst||(this.inst=a.tm_datepicker._getInst(this.$input[0])),this._limitMinMaxDateTime(this.inst,!0)),this.support.ampm&&(this.ampm=l),this.formattedTime=a.tm_datepicker.formatTime(c.timeFormat,this,c),this.$timeObj&&(j===c.timeFormat?this.$timeObj.val(this.formattedTime+k):this.$timeObj.val(a.tm_datepicker.formatTime(j,this,c)+k),this.$timeObj[0].setSelectionRange&&(m=this.$timeObj[0].selectionStart,n=this.$timeObj[0].selectionEnd,this.$timeObj[0].setSelectionRange(m,n))),this.timeDefined=!0,i&&this._updateDateTime()},_onSelectHandler:function(){var a=this._defaults.onSelect||this.inst.settings.onSelect,b=this.$input?this.$input[0]:null;a&&b&&a.apply(b,[this.formattedDateTime,this])},_updateDateTime:function(b){var c='',d,k,g,h,e,i,j,f;b=this.inst||b,i=b.currentYear>0?new Date(b.currentYear,b.currentMonth,b.currentDay):new Date(b.selectedYear,b.selectedMonth,b.selectedDay),d=a.tm_datepicker._daylightSavingAdjust(i),k=a.tm_datepicker._get(b,'dateFormat'),g=a.tm_datepicker._getFormatConfig(b),h=d!==null&&this.timeDefined,this.formattedDate=a.tm_datepicker.formatDate(k,d===null?new Date:d,g),e=this.formattedDate,b.lastVal===''&&(b.currentYear=b.selectedYear,b.currentMonth=b.selectedMonth,b.currentDay=b.selectedDay),this._defaults.timeOnly===!0&&this._defaults.timeOnlyShowDate===!1?e=this.formattedTime:(this._defaults.timeOnly!==!0&&(this._defaults.alwaysSetTime||h)||this._defaults.timeOnly===!0&&this._defaults.timeOnlyShowDate===!0)&&(e+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix),this.formattedDateTime=e,this._defaults.showTimepicker?this.$altInput&&this._defaults.timeOnly===!1&&this._defaults.altFieldTimeOnly===!0?(this.$altInput.val(this.formattedTime),this.$input.val(this.formattedDate)):this.$altInput?(this.$input.val(e),c='',j=this._defaults.altSeparator!==null?this._defaults.altSeparator:this._defaults.separator,f=this._defaults.altTimeSuffix!==null?this._defaults.altTimeSuffix:this._defaults.timeSuffix,this._defaults.timeOnly||(this._defaults.altFormat?c=a.tm_datepicker.formatDate(this._defaults.altFormat,d===null?new Date:d,g):c=this.formattedDate,c&&(c+=j)),this._defaults.altTimeFormat!==null?c+=a.tm_datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults)+f:c+=this.formattedTime+f,this.$altInput.val(c)):this.$input.val(e):this.$input.val(this.formattedDate),this.$input.trigger('change')},_onFocus:function(){var b,c;if(!this.$input.val()&&this._defaults.defaultValue)if(this.$input.val(this._defaults.defaultValue),b=a.tm_datepicker._getInst(this.$input.get(0)),c=a.tm_datepicker._get(b,'tm_timepicker'),c)if(c._defaults.timeOnly&&b.input.val()!==b.lastVal)try{a.tm_datepicker._updateDatepicker(b)}catch(b){a.tm_timepicker.log(b)}},_controls:{slider:{create:function(b,i,g,d,e,f,h){var c=b._defaults.isRTL;return i.prop('slide',null).slider({orientation:'horizontal',value:c?d*-1:d,min:c?f*-1:e,max:c?e*-1:f,step:h,slide:function(e,d){b.control.value(b,a(this),g,c?d.value*-1:d.value),b._onTimeChange()},stop:function(){b._onSelectHandler()}})},options:function(f,b,g,a,c){var e,d;return f._defaults.isRTL?typeof a=='string'?a==='min'||a==='max'?c!==void 0?b.slider(a,c*-1):Math.abs(b.slider(a)):b.slider(a):(e=a.min,d=a.max,a.max=null,a.min=null,e!==void 0&&(a.max=e*-1),d!==void 0&&(a.min=d*-1),b.slider(a)):typeof a=='string'&&c!==void 0?b.slider(a,c):b.slider(a)},value:function(c,a,d,b){return c._defaults.isRTL?b!==void 0?a.slider('value',b*-1):Math.abs(a.slider('value')):b!==void 0?a.slider('value',b):a.slider('value')}},select:{create:function(d,f,e,k,g,h,i){var c='<select class="ui-tm-timepicker-select ui-state-default ui-corner-all" data-unit="'+e+'" data-min="'+g+'" data-max="'+h+'" data-step="'+i+'">',j=d._defaults.pickerTimeFormat||d._defaults.timeFormat,b;for(b=g;b<=h;b+=i)c+='<option value="'+b+'"'+(b===k?' selected':'')+'>',e==='hour'?c+=a.tm_datepicker.formatTime(a.epoAPI.util.trim(j.replace(/[^ht ]/gi,'')),{hour:b},d._defaults):e==='millisec'||e==='microsec'||b>=10?c+=b:c+='0'+b.toString(),c+='</option>';return c+='</select>',f.children('select').remove(),a(c).appendTo(f).on('change',function(){d._onTimeChange(),d._onSelectHandler(),d._afterInject()}),f},options:function(f,d,g,c,e){var b={},a=d.children('select');if(typeof c=='string'){if(e===void 0)return a.data(c);b[c]=e}else b=c;return f.control.create(f,d,a.data('unit'),a.val(),b.min>=0?b.min:a.data('min'),b.max||a.data('max'),b.step||a.data('step'))},value:function(d,c,e,a){var b=c.children('select');return a!==void 0?b.val(a):b.val()}}}}),a.fn.extend({tm_timepicker:function(b){var c=Array.prototype.slice.call(arguments);return b=b||{},typeof b=='object'&&(c[0]=a.extend(b,{timeOnly:!0})),a(this).each(function(){a.fn.tm_datetimepicker.apply(a(this),c)})},tm_datetimepicker:function(b){var c=arguments;return b=b||{},typeof b=='string'?b==='getDate'||b==='option'&&c.length===2&&typeof c[1]=='string'?a.fn.tm_datepicker.apply(a(this[0]),c):this.each(function(){var b=a(this);b.tm_datepicker.apply(b,c)}):this.each(function(){var c=a(this);c.tm_datepicker(a.tm_timepicker._newInst(c,b)._defaults)})}}),a.tm_datepicker.parseDateTime=function(h,c,d,e,f){var b=g(h,c,d,e,f),a;return b.timeObj&&(a=b.timeObj,b.date.setHours(a.hour,a.minute,a.second,a.millisec),b.date.setMicroseconds(a.microsec)),b.date},a.tm_datepicker.parseTime=function(d,e,g){var c=b(b({},a.tm_timepicker._defaults),g||{}),f=function(g,j,f){var k=function(c,d){var b=[];return c&&a.merge(b,c),d&&a.merge(b,d),b=a.map(b,function(a){return a.replace(/[.*+?|()[\]{}\\]/g,'\\$&')}),'('+b.join('|')+')?'},h=function(d){var b=d.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g),c={h:-1,m:-1,s:-1,l:-1,c:-1,t:-1,z:-1},a;if(b)for(a=0;a<b.length;a+=1)c[b[a].toString().charAt(0)]===-1&&(c[b[a].toString().charAt(0)]=a+1);return c},i='^'+g.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(b){var a=b.length;switch(b.charAt(0).toLowerCase()){case'h':return a===1?'(\\d?\\d)':'(\\d{'+a+'})';case'm':return a===1?'(\\d?\\d)':'(\\d{'+a+'})';case's':return a===1?'(\\d?\\d)':'(\\d{'+a+'})';case'l':return'(\\d?\\d?\\d)';case'c':return'(\\d?\\d?\\d)';case'z':return'(z|[-+]\\d\\d:?\\d\\d|\\S+)?';case't':return k(f.amNames,f.pmNames);default:return'('+b.replace(/'/g,'').replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(a){return'\\'+a})+')?'}}).replace(/\s/g,'\\s?')+f.timeSuffix+'$',b=h(g),e='',d={hour:0,minute:0,second:0,millisec:0,microsec:0},c=j.match(new RegExp(i,'i'));return!!c&&(b.t!==-1&&(c[b.t]===void 0||c[b.t].length===0?(e='',d.ampm=''):(e=a.inArray(c[b.t].toUpperCase(),a.map(f.amNames,function(a){return a.toUpperCase()}))!==-1?'AM':'PM',d.ampm=f[e==='AM'?'amNames':'pmNames'][0])),b.h!==-1&&(e==='AM'&&c[b.h]==='12'?d.hour=0:e==='PM'&&c[b.h]!=='12'?d.hour=parseInt(c[b.h],10)+12:d.hour=Number(c[b.h])),b.m!==-1&&(d.minute=Number(c[b.m])),b.s!==-1&&(d.second=Number(c[b.s])),b.l!==-1&&(d.millisec=Number(c[b.l])),b.c!==-1&&(d.microsec=Number(c[b.c])),b.z!==-1&&c[b.z]!==void 0&&(d.timezone=a.tm_timepicker.timezoneOffsetNumber(c[b.z])),d)},h=function(d,c,e){var b;try{if(b=new Date('2012-01-01 '+c),isNaN(b.getTime()))if(b=new Date('2012-01-01T'+c),isNaN(b.getTime()))if(b=new Date('01/01/2012 '+c),isNaN(b.getTime()))throw'Unable to parse time with native Date: '+c;return{hour:b.getHours(),minute:b.getMinutes(),second:b.getSeconds(),millisec:b.getMilliseconds(),microsec:b.getMicroseconds(),timezone:b.getTimezoneOffset()*-1}}catch(b){try{return f(d,c,e)}catch(b){a.tm_timepicker.log('Unable to parse \ntimeString: '+c+'\ntimeFormat: '+d)}}return!1};return typeof c.parse=='function'?c.parse(d,e,c):c.parse==='loose'?h(d,e,c):f(d,e,c)},a.tm_datepicker.formatTime=function(h,b,c){var g,d,f;return c=c||{},c=a.extend({},a.tm_timepicker._defaults,c),b=a.extend({hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null},b),g=h,d=c.amNames[0],f=parseInt(b.hour,10),f>11&&(d=c.pmNames[0]),g=g.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(g){switch(g){case'HH':return('0'+f).slice(-2);case'H':return f;case'hh':return('0'+e(f)).slice(-2);case'h':return e(f);case'mm':return('0'+b.minute).slice(-2);case'm':return b.minute;case'ss':return('0'+b.second).slice(-2);case's':return b.second;case'l':return('00'+b.millisec).slice(-3);case'c':return('00'+b.microsec).slice(-3);case'z':return a.tm_timepicker.timezoneOffsetString(b.timezone===null?c.timezone:b.timezone,!1);case'Z':return a.tm_timepicker.timezoneOffsetString(b.timezone===null?c.timezone:b.timezone,!0);case'T':return d.charAt(0).toUpperCase();case'TT':return d.toUpperCase();case't':return d.charAt(0).toLowerCase();case'tt':return d.toLowerCase();default:return g.replace(/'/g,'')}}),g},a.tm_datepicker._base_selectDate=a.tm_datepicker._selectDate,a.tm_datepicker._selectDate=function(c,d){var b=this._getInst(a(c)[0]),e=this._get(b,'tm_timepicker'),f;e&&b.settings.showTimepicker?(e._limitMinMaxDateTime(b,!0),f=b.inline,b.stay_open=!0,b.inline=!0,this._base_selectDate(c,d),b.inline=f,b.stay_open=!1,this._notifyChange(b),this._updateDatepicker(b)):this._base_selectDate(c,d)},a.tm_datepicker._base_updateDatepicker=a.tm_datepicker._updateDatepicker,a.tm_datepicker._updateDatepicker=function(b){var d=b.input[0],c;if(a.tm_datepicker._curInst&&a.tm_datepicker._curInst!==b&&a.tm_datepicker._datepickerShowing&&a.tm_datepicker._lastInput!==d)return;(typeof b.stay_open!='boolean'||b.stay_open===!1)&&(this._base_updateDatepicker(b),c=this._get(b,'tm_timepicker'),c&&c._addTimePicker(b))},a.tm_datepicker._base_doKeyPress=a.tm_datepicker._doKeyPress,a.tm_datepicker._doKeyPress=function(d){var e=a.tm_datepicker._getInst(d.target),b=a.tm_datepicker._get(e,'tm_timepicker'),c,h,f,i,g;if(b)if(a.tm_datepicker._get(e,'constrainInput'))return c=b.support.ampm,h=b._defaults.showTimezone!==null?b._defaults.showTimezone:b.support.timezone,f=a.tm_datepicker._possibleChars(a.tm_datepicker._get(e,'dateFormat')),i=b._defaults.timeFormat.toString().replace(/[hms]/g,'').replace(/TT/g,c?'APM':'').replace(/Tt/g,c?'AaPpMm':'').replace(/tT/g,c?'AaPpMm':'').replace(/T/g,c?'AP':'').replace(/tt/g,c?'apm':'').replace(/t/g,c?'ap':'')+' '+b._defaults.separator+b._defaults.timeSuffix+(h?b._defaults.timezoneList.join(''):'')+b._defaults.amNames.join('')+b._defaults.pmNames.join('')+f,g=String.fromCharCode(d.charCode===void 0?d.keyCode:d.charCode),d.ctrlKey||g<' '||!f||i.indexOf(g)>-1;return a.tm_datepicker._base_doKeyPress(d)},a.tm_datepicker._base_updateAlternate=a.tm_datepicker._updateAlternate,a.tm_datepicker._updateAlternate=function(d){var b=this._get(d,'tm_timepicker'),e,f,h,c,g,i,j;b?(e=b._defaults.altField,e&&(f=this._getDate(d),h=a.tm_datepicker._getFormatConfig(d),c='',g=b._defaults.altSeparator?b._defaults.altSeparator:b._defaults.separator,i=b._defaults.altTimeSuffix?b._defaults.altTimeSuffix:b._defaults.timeSuffix,j=b._defaults.altTimeFormat!==null?b._defaults.altTimeFormat:b._defaults.timeFormat,c+=a.tm_datepicker.formatTime(j,b,b._defaults)+i,!b._defaults.timeOnly&&!b._defaults.altFieldTimeOnly&&f!==null&&(b._defaults.altFormat?c=a.tm_datepicker.formatDate(b._defaults.altFormat,f,h)+g+c:c=b.formattedDate+g+c),a(e).val(d.input.val()?c:''))):a.tm_datepicker._base_updateAlternate(d)},a.tm_datepicker._base_doKeyUp=a.tm_datepicker._doKeyUp,a.tm_datepicker._doKeyUp=function(c){var b=a.tm_datepicker._getInst(c.target),d=a.tm_datepicker._get(b,'tm_timepicker');if(d)if(d._defaults.timeOnly&&b.input.val()!==b.lastVal)try{a.tm_datepicker._updateDatepicker(b)}catch(b){a.tm_timepicker.log(b)}return a.tm_datepicker._base_doKeyUp(c)},a.tm_datepicker._base_gotoToday=a.tm_datepicker._gotoToday,a.tm_datepicker._gotoToday=function(e){var d=this._getInst(a(e)[0]),c,f,b;if(this._base_gotoToday(e),c=this._get(d,'timepicker'),!c)return;f=a.tm_timepicker.timezoneOffsetNumber(c.timezone),b=new Date,b.setMinutes(b.getMinutes()+b.getTimezoneOffset()+parseInt(f,10)),this._setTime(d,b),this._setDate(d,b),c._onSelectHandler()},a.tm_datepicker._disableTimepickerDatepicker=function(d){var b=this._getInst(d),c;if(!b)return;c=this._get(b,'tm_timepicker'),a(d).tm_datepicker('getDate'),c&&(b.settings.showTimepicker=!1,c._defaults.showTimepicker=!1,c._updateDateTime(b))},a.tm_datepicker._enableTimepickerDatepicker=function(d){var b=this._getInst(d),c;if(!b)return;c=this._get(b,'tm_timepicker'),a(d).tm_datepicker('getDate'),c&&(b.settings.showTimepicker=!0,c._defaults.showTimepicker=!0,c._addTimePicker(b),c._updateDateTime(b))},a.tm_datepicker._setTime=function(d,a){var b=this._get(d,'tm_timepicker'),c;b&&(c=b._defaults,b.hour=a?a.getHours():c.hour,b.minute=a?a.getMinutes():c.minute,b.second=a?a.getSeconds():c.second,b.millisec=a?a.getMilliseconds():c.millisec,b.microsec=a?a.getMicroseconds():c.microsec,b._limitMinMaxDateTime(d,!0),b._onTimeChange(),b._updateDateTime(d))},a.tm_datepicker._setTimeDatepicker=function(e,c,f){var d=this._getInst(e),a,b;if(!d)return;a=this._get(d,'tm_timepicker'),a&&(this._setDateFromField(d),c&&(typeof c=='string'?(a._parseTime(c,f),b=new Date,b.setHours(a.hour,a.minute,a.second,a.millisec),b.setMicroseconds(a.microsec)):(b=new Date(c.getTime()),b.setMicroseconds(c.getMicroseconds())),b.toString()==='Invalid Date'&&(b=void 0),this._setTime(d,b)))},a.tm_datepicker._base_setDateDatepicker=a.tm_datepicker._setDateDatepicker,a.tm_datepicker._setDateDatepicker=function(e,f){var g=this._getInst(e),b=f,d,c;if(!g)return;typeof f=='string'&&(b=new Date(f),b.getTime()||(this._base_setDateDatepicker.apply(this,arguments),b=a(e).tm_datepicker('getDate'))),d=this._get(g,'tm_timepicker'),b instanceof Date?(c=new Date(b.getTime()),c.setMicroseconds(b.getMicroseconds())):c=b,d&&c&&(!d.support.timezone&&d._defaults.timezone===null&&(d.timezone=c.getTimezoneOffset()*-1),b=a.tm_timepicker.timezoneAdjust(b,a.tm_timepicker.timezoneOffsetString(-b.getTimezoneOffset()),d.timezone),c=a.tm_timepicker.timezoneAdjust(c,a.tm_timepicker.timezoneOffsetString(-c.getTimezoneOffset()),d.timezone)),this._updateDatepicker(g),this._base_setDateDatepicker.apply(this,arguments),this._setTimeDatepicker(e,c,!0)},a.tm_datepicker._base_getDateDatepicker=a.tm_datepicker._getDateDatepicker,a.tm_datepicker._getDateDatepicker=function(f,g){var d=this._getInst(f),b,c,e;if(!d)return;return b=this._get(d,'tm_timepicker'),b?(d.lastVal===void 0&&this._setDateFromField(d,g),c=this._getDate(d),e=null,b.$altInput&&b._defaults.altFieldTimeOnly?e=b.$input.val()+' '+b.$altInput.val():b.$input.get(0).tagName!=='INPUT'&&b.$altInput?e=b.$altInput.val():e=b.$input.val(),c&&b._parseTime(e,!d.settings.timeOnly)&&(c.setHours(b.hour,b.minute,b.second,b.millisec),c.setMicroseconds(b.microsec),b.timezone!==null&&(!b.support.timezone&&b._defaults.timezone===null&&(b.timezone=c.getTimezoneOffset()*-1),c=a.tm_timepicker.timezoneAdjust(c,b.timezone,a.tm_timepicker.timezoneOffsetString(-c.getTimezoneOffset())))),c):this._base_getDateDatepicker(f,g)},a.tm_datepicker._base_parseDate=a.tm_datepicker.parseDate,a.tm_datepicker.parseDate=function(c,b,e){var d;try{d=this._base_parseDate(c,b,e)}catch(f){if(f.indexOf(':')>=0)d=this._base_parseDate(c,b.substring(0,b.length-(f.length-f.indexOf(':')-2)),e),a.tm_timepicker.log('Error parsing the date string: '+f+'\ndate string = '+b+'\ndate format = '+c);else throw f}return d},a.tm_datepicker._base_formatDate=a.tm_datepicker._formatDate,a.tm_datepicker._formatDate=function(a){var b=this._get(a,'tm_timepicker');return b?(b._updateDateTime(a),b.$input.val()):this._base_formatDate(a)},a.tm_datepicker._base_optionDatepicker=a.tm_datepicker._optionDatepicker,a.tm_datepicker._optionDatepicker=function(l,b,f){var o=this._getInst(l),g,h,c,d,m,j,k,e,p,q,n;if(!o)return null;if(h=this._get(o,'tm_timepicker'),h){if(c=null,d=null,m=null,j=h._defaults.evnts,k={},typeof b=='string'){if(b==='minDate'||b==='minDateTime')c=f;else if(b==='maxDate'||b==='maxDateTime')d=f;else if(b==='onSelect')m=f;else if(Object.prototype.hasOwnProperty.call(j,b)){if(typeof f=='undefined')return j[b];k[b]=f,g={}}}else if(typeof b=='object'){b.minDate?c=b.minDate:b.minDateTime?c=b.minDateTime:b.maxDate?d=b.maxDate:b.maxDateTime&&(d=b.maxDateTime);for(e in j)Object.prototype.hasOwnProperty.call(j,e)&&b[e]&&(k[e]=b[e])}for(e in k)Object.prototype.hasOwnProperty.call(k,e)&&(j[e]=k[e],g||(g=a.extend({},b)),delete g[e]);if(g&&i(g))return;if(c?(c===0?c=new Date:c=new Date(c),h._defaults.minDate=c,h._defaults.minDateTime=c):d?(d===0?d=new Date:d=new Date(d),h._defaults.maxDate=d,h._defaults.maxDateTime=d):m&&(h._defaults.onSelect=m),c||d)return n=a(l),q=n.tm_datetimepicker('getDate'),p=this._base_optionDatepicker.call(a.tm_datepicker,l,g||b,f),n.tm_datetimepicker('setDate',q),p}return f===void 0?this._base_optionDatepicker.call(a.tm_datepicker,l,b):this._base_optionDatepicker.call(a.tm_datepicker,l,g||b,f)},a.tm_timepicker=new d,a.tm_timepicker.timezoneOffsetString=function(a,g){var b,c,e,f,d;return isNaN(a)||a>840||a<-720?a:(b=a,c=b%60,e=(b-c)/60,f=g?':':'',d=(b>=0?'+':'-')+('0'+Math.abs(e)).slice(-2)+f+('0'+Math.abs(c)).slice(-2),d==='+00:00')?'Z':d},a.tm_timepicker.timezoneOffsetNumber=function(b){var a=b.toString().replace(':','');return a.toUpperCase()==='Z'?0:/^(-|\+)\d{4}$/.test(a)?(a.substring(0,1)==='-'?-1:1)*(parseInt(a.substring(1,3),10)*60+parseInt(a.substring(3,5),10)):parseInt(b,10)},a.tm_timepicker.timezoneAdjust=function(b,d,e){var f=a.timepicker.timezoneOffsetNumber(d),c=a.tm_timepicker.timezoneOffsetNumber(e);return isNaN(c)||b.setMinutes(b.getMinutes()+-f- -c),b},a.tm_timepicker.timeRange=function(b,c,d){return a.tm_timepicker.handleRange('tm_timepicker',b,c,d)},a.tm_timepicker.datetimeRange=function(b,c,d){a.tm_timepicker.handleRange('tm_datetimepicker',b,c,d)},a.tm_timepicker.dateRange=function(b,c,d){a.tm_timepicker.handleRange('tm_datepicker',b,c,d)},a.tm_timepicker.handleRange=function(c,e,d,b){var g=!1;b=a.extend({},{minInterval:0,maxInterval:0,start:{},end:{}},b),c==='tm_timepicker'&&(g=!0,c='tm_datetimepicker');function h(k,i){var g=e[c]('getDate'),h=d[c]('getDate'),j=k[c]('getDate'),f,a;g!==null&&(f=new Date(g.getTime()),a=new Date(g.getTime()),f.setMilliseconds(f.getMilliseconds()+b.minInterval),a.setMilliseconds(a.getMilliseconds()+b.maxInterval),b.minInterval>0&&f>h?d[c]('setDate',f):b.maxInterval>0&&a<h?d[c]('setDate',a):g>h&&i[c]('setDate',j))}function f(d,f,e){var a;if(!d.val())return;a=d[c].call(d,'getDate'),a!==null&&b.minInterval>0&&(e==='minDate'&&a.setMilliseconds(a.getMilliseconds()+b.minInterval),e==='maxDate'&&a.setMilliseconds(a.getMilliseconds()-b.minInterval)),a.getTime&&f[c].call(f,'option',e,a)}return a.fn[c].call(e,a.extend({timeOnly:g,onClose:function(){h(a(this),d)},onSelect:function(){f(a(this),d,'minDate')}},b,b.start)),a.fn[c].call(d,a.extend({timeOnly:g,onClose:function(){h(a(this),e)},onSelect:function(){f(a(this),e,'maxDate')}},b,b.end)),h(e,d),f(e,d,'minDate'),f(d,e,'maxDate'),a([e.get(0),d.get(0)])},a.tm_timepicker.log=function(){window.console&&window.console.log&&window.console.log.apply&&window.console.log.apply(window.console,Array.prototype.slice.call(arguments))},a.tm_timepicker._util={_extendRemove:b,_isEmptyObject:i,_convert24to12:e,_detectSupport:j,_selectLocalTimezone:c,_computeEffectiveSetting:f,_splitDateTime:h,_parseDateTimeInternal:g},Date.prototype.getMicroseconds||(Object.defineProperty(Date.prototype,'microseconds',{value:0,writable:!0}),Object.defineProperty(Date.prototype,'getMicroseconds',{value:function(){return this.microseconds}}),Object.defineProperty(Date.prototype,'setMicroseconds',{value:function(a){return this.setMilliseconds(this.getMilliseconds()+Math.floor(a/1e3)),this.microseconds=a%1e3,this}})),a.tm_timepicker.version='1.6.3'})